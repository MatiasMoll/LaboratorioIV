(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return tn}),n.d(e,"b",function(){return Ua}),n.d(e,"c",function(){return Da}),n.d(e,"d",function(){return ka}),n.d(e,"e",function(){return Ra}),n.d(e,"f",function(){return ku}),n.d(e,"g",function(){return _u}),n.d(e,"h",function(){return Fs}),n.d(e,"i",function(){return $a}),n.d(e,"j",function(){return ls}),n.d(e,"k",function(){return qa}),n.d(e,"l",function(){return ps}),n.d(e,"m",function(){return dr}),n.d(e,"n",function(){return pa}),n.d(e,"o",function(){return zi}),n.d(e,"p",function(){return wn}),n.d(e,"q",function(){return k}),n.d(e,"r",function(){return Je}),n.d(e,"s",function(){return so}),n.d(e,"t",function(){return Ds}),n.d(e,"u",function(){return Ps}),n.d(e,"v",function(){return Fa}),n.d(e,"w",function(){return Xs}),n.d(e,"x",function(){return Eu}),n.d(e,"y",function(){return Ys}),n.d(e,"z",function(){return mu}),n.d(e,"A",function(){return Za}),n.d(e,"B",function(){return _n}),n.d(e,"C",function(){return La}),n.d(e,"D",function(){return Ma}),n.d(e,"E",function(){return ys}),n.d(e,"F",function(){return ms}),n.d(e,"G",function(){return yr}),n.d(e,"H",function(){return bs}),n.d(e,"I",function(){return ur}),n.d(e,"J",function(){return On}),n.d(e,"K",function(){return Cu}),n.d(e,"L",function(){return Qs}),n.d(e,"M",function(){return ou}),n.d(e,"N",function(){return en}),n.d(e,"O",function(){return _s}),n.d(e,"P",function(){return ws}),n.d(e,"Q",function(){return Js}),n.d(e,"R",function(){return L}),n.d(e,"S",function(){return yu}),n.d(e,"T",function(){return pu}),n.d(e,"U",function(){return g}),n.d(e,"V",function(){return du}),n.d(e,"W",function(){return Au}),n.d(e,"X",function(){return uu}),n.d(e,"Y",function(){return Va}),n.d(e,"Z",function(){return Qi}),n.d(e,"ab",function(){return Yo}),n.d(e,"bb",function(){return sr}),n.d(e,"cb",function(){return Hn}),n.d(e,"db",function(){return Rn}),n.d(e,"eb",function(){return Nn}),n.d(e,"fb",function(){return Un}),n.d(e,"gb",function(){return Mn}),n.d(e,"hb",function(){return Pn}),n.d(e,"ib",function(){return Ln}),n.d(e,"jb",function(){return Qo}),n.d(e,"kb",function(){return xu}),n.d(e,"lb",function(){return Ko}),n.d(e,"mb",function(){return Wo}),n.d(e,"nb",function(){return Dn}),n.d(e,"ob",function(){return B}),n.d(e,"pb",function(){return mo}),n.d(e,"qb",function(){return xo}),n.d(e,"rb",function(){return Co}),n.d(e,"sb",function(){return Io}),n.d(e,"tb",function(){return Go}),n.d(e,"ub",function(){return It}),n.d(e,"vb",function(){return f}),n.d(e,"wb",function(){return kn}),n.d(e,"xb",function(){return uo}),n.d(e,"yb",function(){return _t}),n.d(e,"zb",function(){return as}),n.d(e,"Ab",function(){return ti}),n.d(e,"Bb",function(){return bo}),n.d(e,"Cb",function(){return No}),n.d(e,"Db",function(){return Ia}),n.d(e,"Eb",function(){return tt}),n.d(e,"Fb",function(){return at}),n.d(e,"Gb",function(){return O}),n.d(e,"Hb",function(){return E}),n.d(e,"Ib",function(){return it}),n.d(e,"Jb",function(){return ut}),n.d(e,"Kb",function(){return wo}),n.d(e,"Lb",function(){return To}),n.d(e,"Mb",function(){return So}),n.d(e,"Nb",function(){return Eo}),n.d(e,"Ob",function(){return We}),n.d(e,"Pb",function(){return qo}),n.d(e,"Qb",function(){return yn}),n.d(e,"Rb",function(){return Ye}),n.d(e,"Sb",function(){return ja}),n.d(e,"Tb",function(){return Ao}),n.d(e,"Ub",function(){return xa}),n.d(e,"Vb",function(){return _o}),n.d(e,"Wb",function(){return Ca}),n.d(e,"Xb",function(){return cr}),n.d(e,"Yb",function(){return ot}),n.d(e,"Zb",function(){return Vo}),n.d(e,"ac",function(){return Fo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("EQ5u"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function w(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function _(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${w(t)} found${n}`)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return T(t,I)||T(t,A)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function C(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(j))?t[x]:null}const I=l({"\u0275prov":l}),x=l({"\u0275inj":l}),A=l({ngInjectableDef:l}),j=l({ngInjectorDef:l});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let R;function D(t){const e=R;return R=t,e}function N(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void _(f(t),"Injector")}function P(t){return{toString:t}.toString()}var M=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const U="undefined"!=typeof globalThis&&globalThis,V="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=U||q||V||F,H={},z=[],G=[],Q=l({"\u0275cmp":l}),K=l({"\u0275dir":l}),W=l({"\u0275pipe":l}),$=l({"\u0275mod":l}),Y=l({"\u0275loc":l}),X=l({"\u0275fac":l}),Z=l({__NG_ELEMENT_ID__:l});let J=0;function tt(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[K]||null}(t)}function nt(t){return function(t){return t[W]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{rt[t.id]=t.type}),e}function ot(t,e){return P(()=>{const n=lt(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function st(t,e){if(null==t)return H;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[Q]||null}function lt(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(X)?t[X]:null}class wt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return Ot}function Ot(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),Et}function Et(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===H)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:H,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new wt(u&&u.currentValue,e,s===H),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}let Ct;function It(t){Ct=t}function xt(t){return!!t.listen}_t.ngInherit=!0;const At={createRenderer:(t,e)=>void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0};function jt(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return jt(e[t])}function Rt(t,e){return jt(e[t.index])}function Dt(t,e){return t.data[e]}function Nt(t,e){const n=e[t];return dt(n)?n:n[0]}function Pt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Mt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Ut(t,e){return null==e?null:t[e]}function Vt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function Ht(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Gt(){let t=Qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qt(){return qt.lFrame.currentTNode}function Kt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Wt(){return qt.lFrame.isParent}function $t(){return qt.isInCheckNoChangesMode}function Yt(t){qt.isInCheckNoChangesMode=t}function Xt(){return qt.lFrame.bindingIndex++}function Zt(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jt(e)}function Jt(t){qt.lFrame.currentDirectiveIndex=t}function te(){return qt.lFrame.currentQueryIndex}function ee(t){qt.lFrame.currentQueryIndex=t}function ne(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=ne(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=oe();return r.currentTNode=e,r.lView=t,!0}function ie(t){const e=oe(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oe(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ue=ae;function ce(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function le(){return qt.lFrame.selectedIndex}function he(t){qt.lFrame.selectedIndex=t}function fe(){const t=qt.lFrame;return Dt(t.tView,t.selectedIndex)}function de(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function pe(t,e,n){ye(t,e,3,n)}function ge(t,e,n,r){(3&t[2])===n&&ye(t,e,n,r)}function me(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ye(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ve(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ve(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const be=-1;class we{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function _e(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ee(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Oe(t){return 3===t||4===t||6===t}function Ee(t){return 64===t.charCodeAt(0)}function Se(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Te(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Te(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ce(t){return t!==be}function Ie(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ae=!0;function je(t){const e=Ae;return Ae=t,e}let ke=0;function Re(t,e){const n=Ne(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,De(r.data,t),De(e,null),De(r.blueprint,null));const i=Pe(t,e),o=t.injectorIndex;if(Ce(i)){const t=Ie(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function De(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ne(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Pe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return be;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return be}function Me(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Z)&&(r=n[Z]),null==r&&(r=n[Z]=ke++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Le(t,e,n){if(n&k.Optional)return t;_(e,"NodeInjector")}function Ue(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=D(void 0);try{return i?i.get(e,r,n&k.Optional):N(e,r,n&k.Optional)}finally{D(o)}}return Le(r,e,n)}function Ve(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Z)?t[Z]:void 0;return"number"==typeof e?e>=0?255&e:qe:e}(n);if("function"==typeof o){if(!re(e,t,r))return r&k.Host?Le(i,n,r):Ue(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;_(n)}finally{ue()}}else if("number"==typeof o){let i=null,s=Ne(t,e),a=be,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?Pe(t,e):e[s+8],a!==be&&Qe(r,!1)?(i=e[1],s=Ie(a),e=xe(a,e)):s=-1);-1!==s;){const t=e[1];if(Ge(o,s,t.data)){const t=Be(s,e,n,i,r,u);if(t!==Fe)return t}a=e[s+8],a!==be&&Qe(r,e[1].data[s+8]===u)&&Ge(o,s,e)?(i=t,s=Ie(a),e=xe(a,e)):s=-1}}}return Ue(e,n,r,i)}const Fe={};function qe(){return new Ke(Gt(),Ht())}function Be(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=He(a,s,n,null==r?mt(a)&&Ae:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?ze(e,s,u,a):Fe}function He(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof we){const s=i;s.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(w(o[n]));const a=je(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?D(s.injectImpl):null;re(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ot(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&D(u),je(a),s.resolving=!1,ue()}}return i}function Ge(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Qe(t,e){return!(t&k.Self||t&k.Host&&e)}class Ke{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ve(this._tNode,this._lView,t,void 0,e)}}function We(t){return P(()=>{const e=t.prototype.constructor,n=e[X]||$e(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[X]||$e(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function $e(t){return y(t)?()=>{const e=$e(m(t));return e&&e()}:bt(t)}function Ye(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Oe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}const Xe="__parameters__";function Ze(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Xe)?t[Xe]:Object.defineProperty(t,Xe,{value:[]})[Xe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tn=new Je("AnalyzeForEntryComponents"),en=Function;function nn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),nn(r,e)):e!==t&&e.push(r)}return e}function rn(t,e){t.forEach(t=>Array.isArray(t)?rn(t,e):e(t))}function on(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function an(t,e,n){let r=cn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function un(t,e){const n=cn(t,e);if(n>=0)return t[1|n]}function cn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const ln={},hn=/\n/gm,fn="__source",dn=l({provide:String,useValue:l});let pn;function gn(t){const e=pn;return pn=t,e}function mn(t,e=k.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?N(t,void 0,e):pn.get(t,e&k.Optional?null:void 0,e)}function yn(t,e=k.Default){return(R||mn)(m(t),e)}function vn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(yn(t,n))}else e.push(yn(r))}return e}function bn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const wn=bn(Ze("Inject",t=>({token:t})),-1),_n=bn(Ze("Optional"),8),On=bn(Ze("SkipSelf"),4);let En;function Sn(t){var e;return(null===(e=function(){if(void 0===En&&(En=null,B.trustedTypes))try{En=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return En}())||void 0===e?void 0:e.createHTML(t))||t}class Tn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Cn extends Tn{getTypeName(){return"HTML"}}class In extends Tn{getTypeName(){return"Style"}}class xn extends Tn{getTypeName(){return"Script"}}class An extends Tn{getTypeName(){return"URL"}}class jn extends Tn{getTypeName(){return"ResourceURL"}}function kn(t){return t instanceof Tn?t.changingThisBreaksApplicationSecurity:t}function Rn(t,e){const n=Dn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Dn(t){return t instanceof Tn&&t.getTypeName()||null}function Nn(t){return new Cn(t)}function Pn(t){return new In(t)}function Mn(t){return new xn(t)}function Ln(t){return new An(t)}function Un(t){return new jn(t)}class Vn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Sn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Fn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Sn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Sn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Hn(t){return(t=String(t)).match(qn)||t.match(Bn)?t:"unsafe:"+t}function zn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Gn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Qn=zn("area,br,col,hr,img,wbr"),Kn=zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wn=zn("rp,rt"),$n=Gn(Wn,Kn),Yn=Gn(Qn,Gn(Kn,zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gn(Wn,zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$n),Xn=zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zn=zn("srcset"),Jn=Gn(Xn,Zn,zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=zn("script,style,template");class er{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Yn.hasOwnProperty(e))return this.sanitizedSomething=!0,!tr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Jn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Xn[o]&&(s=Hn(s)),Zn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Hn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ir(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Yn.hasOwnProperty(e)&&!Qn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ir(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rr=/([^\#-~ |!])/g;function ir(t){return t.replace(/&/g,"&amp;").replace(nr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(rr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let or;function sr(t,e){let n=null;try{or=or||function(t){const e=new Fn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Sn(""),"text/html")}catch(t){return!1}}()?new Vn(e):e}(t);let r=e?String(e):"";n=or.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=or.getInertBodyElement(r)}while(r!==o);return Sn((new er).sanitizeChildren(ar(n)||n))}finally{if(n){const t=ar(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ar(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ur=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function cr(t){const e=function(){const t=Ht();return t&&t[12]}();return e?e.sanitize(ur.URL,t)||"":Rn(t,"URL")?kn(t):Hn(b(t))}function lr(t){return t.ngDebugContext}function hr(t){return t.ngOriginalError}function fr(t,...e){t.error(...e)}class dr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||fr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?lr(t)?lr(t):this._findContext(hr(t)):null}_findOriginalError(t){let e=hr(t);for(;e&&hr(e);)e=hr(e);return e}}function pr(t,e){t.__ngContext__=e}const gr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function mr(t){return t instanceof Function?t():t}var yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function vr(t,e){return(void 0)(t,e)}function br(t){const e=t[3];return pt(e)?e[3]:e}function wr(t){return Or(t[13])}function _r(t){return Or(t[4])}function Or(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Er(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=jt(r);0===t&&null!==n?null==i?jr(e,n,a):Ar(e,n,a,i||null,!0):1===t&&null!==n?Ar(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Rr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==jt(n)&&Er(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];Ur(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Sr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Tr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Cr(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Tr(o,r),e>0&&(t[n-1][4]=r[4]);const s=sn(t,ft+e);Ur(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ir(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&Ur(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&xr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&xr(e[1],e),n=e&&e[4]}e=n}}(e)}}function xr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof we)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):jt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Tr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ar(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function jr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function kr(t,e,n,r,i){null!==r?Ar(t,e,n,r,i):jr(t,e,n)}function Rr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Dr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Rt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Rt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)kr(o,i,n[a],s,!1);else kr(o,i,n,s,!1)}function Nr(t,e){if(null!==e){const n=e.type;if(3&n)return Rt(e,t);if(4&n)return Mr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Nr(t,n);{const n=t[e.index];return pt(n)?Mr(-1,n):jt(n)}}if(32&n)return vr(e,t)()||jt(t[e.index]);{const n=Pr(t,e);return null!==n?Array.isArray(n)?n[0]:Nr(br(t[16]),n):Nr(t,e.next)}}return null}function Pr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Mr(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Nr(t,r)}return e[7]}function Lr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&pr(jt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Lr(t,e,n.child,r,i,o,!1),Er(e,t,i,a,o);else if(32&u){const s=vr(n,r);let u;for(;u=s();)Er(e,t,i,u,o);Er(e,t,i,a,o)}else 16&u?Vr(t,e,r,n,i,o):Er(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ur(t,e,n,r,i,o){Lr(n,r,t.firstChild,e,i,o,!1)}function Vr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Er(e,t,i,a[u],o);else Lr(t,e,a,s[3],i,o,!0)}function Fr(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function qr(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Br(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Hr="ng-template";function zr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Br(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Gr(t){return 4===t.type&&t.value!==Hr}function Qr(t,e,n){return e===(4!==t.type||n?t.value:Hr)}function Kr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Oe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Qr(t,u,n)||""===u&&1===e.length){if(Wr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!zr(t.attrs,c,n)){if(Wr(r))return!1;s=!0}continue}const l=$r(8&r?"class":u,i,Gr(t),n);if(-1===l){if(Wr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Br(e,c,0)||2&r&&c!==t){if(Wr(r))return!1;s=!0}}}}else{if(!s&&!Wr(r)&&!Wr(u))return!1;if(s&&Wr(u))continue;s=!1,r=u|1&r}}return Wr(r)||s}function Wr(t){return 0==(1&t)}function $r(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Yr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Kr(t,e[r],n))return!0;return!1}function Xr(t,e){return t?":not("+e.trim()+")":e}function Zr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Wr(s)||(e+=Xr(o,i),i=""),r=s,o=o||!Wr(r);n++}return""!==i&&(e+=Xr(o,i)),e}const Jr={};function ti(t){ei(zt(),Ht(),le()+t,$t())}function ei(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&pe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ge(e,r,0,n)}he(n)}function ni(t,e){return t<<17|e<<2}function ri(t){return t>>17&32767}function ii(t){return 2|t}function oi(t){return(131068&t)>>2}function si(t,e){return-131069&t|e<<2}function ai(t){return 1|t}function ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ee(i),n.contentQueries(2,e[o],o)}}}function ci(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Vt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function li(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Qt(),s=Wt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Kt(o,!0),o}function hi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function fi(t,e,n){ie(e);try{const r=t.viewQuery;null!==r&&Li(1,r,n);const i=t.template;null!==i&&gi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ui(t,e),t.staticViewQueries&&Li(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ri(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ce()}}function di(t,e,n,r){const i=e[2];if(256==(256&i))return;ie(e);const o=$t();try{Vt(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&gi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&pe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),me(e,0)}if(function(t){for(let e=wr(t);null!==e;e=_r(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=wr(t);null!==e;e=_r(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ui(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&pe(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),me(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)he(~r);else{const i=r,o=n[++t],s=n[++t];Zt(o,i),s(2,e[i])}}}finally{he(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ji(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Li(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&pe(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),me(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ce()}}function pi(t,e,n,r){const i=e[10],o=!$t(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&fi(t,e,r),di(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function gi(t,e,n,r,i){const o=le();try{he(-1),2&r&&e.length>ht&&ei(t,e,ht,$t()),n(r,i)}finally{he(o)}}function mi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=yi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function yi(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function vi(t,e,n,r){const i=Vi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Fi(t).push(r,i.length-1))}function bi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function wi(t,e,n,r,i,o,s,a){const u=Rt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Bi(t,n,c,r,i),mt(e)&&function(t,e){const n=Nt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(u,r,i):Ee(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function _i(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Oi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ei(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Si(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function Ti(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ci(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new we(o,vt(i),null);t.blueprint[r]=s,n[r]=s,_i(t,e,0,r,hi(t,n,i.hostVars,Jr),i)}function Ii(t,e,n){const r=Rt(e,t),i=mi(n),o=t[10],s=Di(t,ci(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function xi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ai(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function ji(t,e){const n=Nt(e,t);if(Lt(n)){const t=n[1];80&n[2]?di(t,n,t.template,n[8]):n[5]>0&&ki(n)}}function ki(t){for(let n=wr(t);null!==n;n=_r(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];di(t,e,t.template,e[8])}else e[5]>0&&ki(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Nt(e[n],t);Lt(r)&&r[5]>0&&ki(r)}}function Ri(t,e){const n=Nt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),fi(r,n,n[8])}function Di(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ni(t){for(;t;){t[2]|=64;const e=br(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Pi(t,e,n){const r=e[10];r.begin&&r.begin();try{di(t,e,t.template,n)}catch(i){throw qi(e,i),i}finally{r.end&&r.end()}}function Mi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Pt(n),i=r[1];pi(i,r,i.template,n)}}(t[8])}function Li(t,e,n){ee(0),e(t,n)}const Ui=(()=>Promise.resolve(null))();function Vi(t){return t[7]||(t[7]=[])}function Fi(t){return t.cleanup||(t.cleanup=[])}function qi(t,e){const n=t[9],r=n?n.get(dr,null):null;r&&r.handleError(e)}function Bi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Hi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=d(i,t):2==o&&(r=d(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const zi=new Je("INJECTOR",-1);class Gi{get(t,e=ln){if(e===ln){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const Qi=new Je("Set Injector scope."),Ki={},Wi={},$i=[];let Yi;function Xi(){return void 0===Yi&&(Yi=new Gi),Yi}function Zi(t,e=null,n=null,r){return new Ji(t,n,e||Xi(),r)}class Ji{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&rn(e,n=>this.processProvider(n,t,e)),rn([t],t=>this.processInjectorType(t,[],i)),this.records.set(zi,no(void 0,this));const o=this.records.get(Qi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ln,n=k.Default){this.assertNotDestroyed();const r=gn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Je)&&S(t);e=n&&this.injectableDefInScope(n)?no(to(t),Ki):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?Xi():this.parent).get(t,e=n&k.Optional&&e===ln?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(f(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[fn]&&i.unshift(e[fn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(hn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{gn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=C(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=C(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{rn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];rn(r,t=>this.processProvider(t,n,r||$i))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,no(a,Ki));const u=r.providers;if(null!=u&&!s){const e=t;rn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=io(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return ro(t)?no(void 0,t.useValue):no(eo(t),Ki)}(t);if(io(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=no(void 0,Ki,!0),e.factory=()=>vn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ki&&(e.value=Wi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function to(t){const e=S(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof Je)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function eo(t,e,n){let r;if(io(t)){const e=m(t);return bt(e)||to(e)}if(ro(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...vn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>yn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||to(e);r=()=>new e(...vn(t.deps))}var i;return r}function no(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ro(t){return null!==t&&"object"==typeof t&&dn in t}function io(t){return"function"==typeof t}const oo=function(t,e,n){return function(t,e=null,n=null,r){const i=Zi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let so=(()=>{class t{static create(t,e){return Array.isArray(t)?oo(t,e,""):oo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=ln,t.NULL=new Gi,t.\u0275prov=O({token:t,providedIn:"any",factory:()=>yn(zi)}),t.__NG_ELEMENT_ID__=-1,t})();function ao(t,e){de(Pt(t)[1],Gt())}function uo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=co(t.inputs),e.declaredInputs=co(t.declaredInputs),e.outputs=co(t.outputs);const n=i.hostBindings;n&&fo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&lo(t,o),s&&ho(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===uo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Se(i.hostAttrs,n=Se(n,i.hostAttrs))}}(r)}function co(t){return t===H?{}:t===G?[]:t}function lo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ho(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function fo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let po=null;function go(){if(!po){const t=B.Symbol;if(t&&t.iterator)po=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(po=n)}}}return po}function mo(t){return!!yo(t)&&(Array.isArray(t)||!(t instanceof Map)&&go()in t)}function yo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function vo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function bo(t,e,n,r){const i=Ht();return vo(i,Xt(),e)&&(zt(),function(t,e,n,r,i,o){const s=Rt(t,e);!function(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(fe(),i,t,e,n,r)),bo}function wo(t,e=k.Default){const n=Ht();return null===n?yn(t,e):Ve(Gt(),n,m(t),e)}function _o(t,e,n){const r=Ht();return vo(r,Xt(),e)&&wi(zt(),fe(),r,t,e,r[11],n,!1),_o}function Oo(t,e,n,r,i){const o=i?"class":"style";Bi(t,n,e.inputs[o],o,r)}function Eo(t,e,n,r){const i=Ht(),o=zt(),s=ht+t,a=i[11],u=i[s]=Sr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=li(e,t,2,i,Ut(a,o));return function(t,e,n,r){let i=!1;if(Bt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Yr(n,s.selectors,!1)&&(i||(i=[]),Me(Re(n,e),t,s.type),vt(s)?(Ei(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ti(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=hi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Se(n.mergedAttrs,c.hostAttrs),Ci(t,n,e,u,c),Si(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Gr(e)?null:Ai(n,i);o.push(c),s=bi(n,u,s),a=bi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}n.mergedAttrs=Se(n.mergedAttrs,n.attrs)}(e,n,u,Ut(a,s)),null!==u.attrs&&Hi(u,u.attrs,!1),null!==u.mergedAttrs&&Hi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Kt(c,!0);const l=c.mergedAttrs;null!==l&&_e(a,u,l);const h=c.classes;null!==h&&qr(a,u,h);const f=c.styles;null!==f&&Fr(a,u,f),64!=(64&c.flags)&&Dr(o,i,u,c),0===qt.lFrame.elementDepthCount&&pr(u,i),qt.lFrame.elementDepthCount++,yt(c)&&(function(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Re(n,e),pr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Ii(e,n,r);const u=ze(e,t,a,n);pr(u,e),null!==s&&xi(0,a-i,u,r,0,s),o&&(Nt(n.index,e)[8]=u)}}(t,e,n,Rt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{he(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Jt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Oi(r,i)}}finally{he(-1),Jt(s)}}(t,e,n))}(o,i,c),function(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&function(t,e,n=Rt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}(i,c)}function So(){let t=Gt();Wt()?qt.lFrame.isParent=!1:(t=t.parent,Kt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(de(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Oo(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Oo(n,e,Ht(),e.stylesWithoutHost,!1)}function To(t,e,n,r){Eo(t,e,n,r),So()}function Co(t){return!!t&&"function"==typeof t.then}function Io(t){return!!t&&"function"==typeof t.subscribe}const xo=Io;function Ao(t,e,n=!1,r){const i=Ht(),o=zt(),s=Gt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&Fi(t),l=Vi(e);let h=!0;if(3&r.type){const f=Rt(r,e),d=a?a(f):H,p=d.target||f,g=l.length,m=a?t=>a(jt(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ko(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=ko(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=ko(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Ao}function jo(t,e,n){try{return!1!==e(n)}catch(r){return qi(t,r),!1}}function ko(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Nt(t.index,e):e;0==(32&e[2])&&Ni(s);let a=jo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=jo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ro(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ri(o):oi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Do(t[a],e)&&(u=!0,t[a+1]=r?ai(n):ii(n)),a=r?ri(n):oi(n)}u&&(t[n+1]=r?ii(o):ai(o))}function Do(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&cn(t,e)>=0}function No(t,e){return function(t,e,n,r){const i=Ht(),o=zt(),s=function(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[le()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Mo(n=Po(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Po(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==oi(r))return t[ri(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Po(null,t,e,n[1],r),n=Mo(n,e.attrs,r),function(t,e,n,r){t[ri(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Mo(r,t[o].hostAttrs,true);return Mo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ri(s),u=oi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||cn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ri(t[a+1]);t[r+1]=ni(e,a),0!==e&&(t[e+1]=si(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ni(a,0),0!==a&&(t[a+1]=si(t[a+1],r)),a=r;else t[r+1]=ni(u,0),0===a?a=r:t[u+1]=si(t[u+1],r),u=r;l&&(t[r+1]=ii(t[r+1])),Ro(t,c,r,!0),Ro(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&cn(o,e)>=0&&(n[r+1]=ai(n[r+1]))}(e,c,t,r),s=ni(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Jr&&vo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Uo(1==(1&c)?Lo(u,e,n,i,oi(c),s):void 0)||(Uo(o)||function(t){return 2==(2&t)}(c)&&(o=Lo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,kt(le(),n),i,o))}(o,o.data[le()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=f(kn(t))),t}(e),true,s)}(t,e),No}function Po(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Mo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Mo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),an(t,s,!!n||e[++o]))}return void 0===t?null:t}function Lo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Jr&&(l=c?z:void 0);let h=c?un(l,r):u===r?l:void 0;if(o&&!Uo(h)&&(h=un(e,r)),Uo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ri(f):oi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=un(t,r))}return a}function Uo(t){return void 0!==t}function Vo(t,e=""){const n=Ht(),r=zt(),i=t+ht,o=r.firstCreatePass?li(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Dr(r,n,s,o),Kt(o,!1)}function Fo(t,e,n){const r=Ht(),i=function(t,e,n,r){return vo(t,Xt(),n)?e+b(n)+r:Jr}(r,t,e,n);return i!==Jr&&function(t,e,n){const r=kt(e,t);!function(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,le(),i),Fo}function qo(t,e,n){const r=Ht();return vo(r,Xt(),e)&&wi(zt(),fe(),r,t,e,r[11],n,!0),qo}const Bo=void 0;var Ho=["en",[["a","p"],["AM","PM"],Bo],[["AM","PM"],Bo,Bo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bo,"{1} 'at' {0}",Bo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let zo={};function Go(t,e,n){"string"!=typeof e&&(n=e,e=t[Yo.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),zo[e]=t,n&&(zo[e][Yo.ExtraData]=n)}function Qo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=$o(e);if(n)return n;const r=e.split("-")[0];if(n=$o(r),n)return n;if("en"===r)return Ho;throw new Error(`Missing locale data for the locale "${t}".`)}function Ko(t){return Qo(t)[Yo.CurrencyCode]||null}function Wo(t){return Qo(t)[Yo.PluralCase]}function $o(t){return t in zo||(zo[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),zo[t]}var Yo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Xo="en-US";let Zo=Xo;function Jo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Zo=t.toLowerCase().replace(/_/g,"-"))}function ts(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let o=0;o<t.length;o++)ts(t[o],e,n,r,i);else{const o=zt(),s=Ht();let a=io(t)?t:m(t.provide),u=eo(t);const c=Gt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(io(t)||!t.multi){const r=new we(u,i,wo),d=rs(a,e,i?l:l+f,h);-1===d?(Me(Re(c,s),o,a),es(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=rs(a,e,l+f,h),p=rs(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Me(Re(c,s),o,a);const l=function(t,e,n,r,i){const o=new we(t,n,wo);return o.multi=[],o.index=e,o.componentProviders=0,ns(o,i,r&&!n),o}(i?os:is,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),es(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else es(o,t,d>-1?d:p,ns(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function es(t,e,n,r){const i=io(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ns(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function rs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function is(t,e,n,r){return ss(this.multi,[])}function os(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ss(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ss(i,o);return o}function ss(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function as(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=vt(t);ts(n,r.data,r.blueprint,i,!0),ts(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class us{}class cs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ls=(()=>{class t{}return t.NULL=new cs,t})();function hs(...t){}function fs(t,e){return new ps(Rt(t,e))}const ds=function(){return fs(Gt(),Ht())};let ps=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ds,t})();function gs(t){return t instanceof ps?t.nativeElement:t}class ms{}let ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>vs(),t})();const vs=function(){const t=Ht(),e=Nt(Gt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let bs=(()=>{class t{}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>null}),t})();class ws{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const _s=new ws("11.2.6");class Os{constructor(){}supports(t){return mo(t)}create(t){return new Ss(t)}}const Es=(t,e)=>e;class Ss{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Es}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<xs(n,r,i)?e:n,s=xs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!mo(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[go()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ts(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Is),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Is),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ts{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Is{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Cs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class As{constructor(){}supports(t){return t instanceof Map||yo(t)}create(){return new js}}class js{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||yo(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ks(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ks{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Rs(){return new Ds([new Os])}let Ds=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Rs()),deps:[[t,new On,new _n]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Rs}),t})();function Ns(){return new Ps([new As])}let Ps=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ns()),deps:[[t,new On,new _n]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Ns}),t})();function Ms(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(jt(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Ms(e[1],e,n,r)}const s=n.type;if(8&s)Ms(t,e,n.child,r);else if(32&s){const t=vr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Pr(e,n);if(Array.isArray(t))r.push(...t);else{const n=br(e[16]);Ms(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ls{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ms(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Cr(t,n),sn(e,n))}this._attachedToViewContainer=!1}Ir(this._lView[1],this._lView)}onDestroy(t){vi(this._lView[1],this._lView,null,t)}markForCheck(){Ni(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Pi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Yt(!0);try{Pi(t,e,n)}finally{Yt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Ur(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Us extends Ls{constructor(t){super(t),this._view=t}detectChanges(){Mi(this._view)}checkNoChanges(){!function(t){Yt(!0);try{Mi(t)}finally{Yt(!1)}}(this._view)}get context(){return null}}const Vs=qs;let Fs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Vs,t.__ChangeDetectorRef__=!0,t})();function qs(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Nt(t.index,e);return new Ls(n,n)}return 47&t.type?new Ls(e[16],e):null}(Gt(),Ht(),t)}const Bs=[new As],Hs=new Ds([new Os]),zs=new Ps(Bs),Gs=function(){return $s(Gt(),Ht())};let Qs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Gs,t})();const Ks=Qs,Ws=class extends Ks{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),fi(e,n,t),new Ls(n)}};function $s(t,e){return 4&t.type?new Ws(e,t,fs(t,e)):null}class Ys{}class Xs{}const Zs=function(){return ia(Gt(),Ht())};let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zs,t})();const ta=Js,ea=class extends ta{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return fs(this._hostTNode,this._hostLView)}get injector(){return new Ke(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pe(this._hostTNode,this._hostLView);if(Ce(t)){const e=xe(t,this._hostLView),n=Ie(t);return new Ke(e[1].data[n+8],e)}return new Ke(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=na(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ys,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ea(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],on(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Mr(i,o),a=n[11],u=Rr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Ur(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),on(ra(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=na(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);n&&(sn(ra(this._lContainer),e),Ir(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);return n&&null!=sn(ra(this._lContainer),e)?new Ls(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function na(t){return t[8]}function ra(t){return t[8]||(t[8]=[])}function ia(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=jt(r);else{const n=e[11];i=n.createComment("");const r=Rt(t,e);Ar(n,Rr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=new Array(r,!0,!1,e,null,0,t,i,null,null),Di(e,n)}return new ea(n,t,e)}const oa={};class sa extends ls{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new ca(e,this.ngModule)}}function aa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ua=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gr});class ca extends us{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Zr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return aa(this.componentDef.inputs)}get outputs(){return aa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,oa,i);return o!==oa||r===oa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ms,At),s=i.get(bs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Sr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:gr,clean:Ui,playerHandler:null,flags:0},f=yi(0,null,null,1,0,null,null,null,null,null),d=ci(null,f,h,l,null,null,o,a,s,i);let p,g;ie(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=li(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Hi(a,u,!0),null!==t&&(_e(i,t,u),null!==a.classes&&qr(i,t,a.classes),null!==a.styles&&Fr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ci(n,mi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Me(Re(a,n),s,e.type),Ei(s,a),Ti(a,n.length,1)),Di(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)_e(a,c,["ng-version",_s.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Wr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&_e(a,c,t),e&&e.length>0&&qr(a,c,e.join(" "))}if(g=Dt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ci(t,r,e,hi(t,e,1,null),n));const i=ze(e,t,r.directiveStart,r);pr(i,e);const o=Rt(r,e);return o&&pr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Gt();e.contentQueries(1,s,t.directiveStart)}const a=Gt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(he(a.index),_i(n[1],a,0,a.directiveStart,a.directiveEnd,e),Oi(e,s)),s}(t,this.componentDef,d,h,[ao]),fi(f,d,null)}finally{ce()}return new la(this.componentType,p,fs(g,d),d,g)}}class la extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Us(r),this.componentType=t}get injector(){return new Ke(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ha=new Map;class fa extends Ys{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new sa(this);const n=lt(t),r=t[Y]||null;r&&Jo(r),this._bootstrapComponents=mr(n.bootstrap),this._r3Injector=Zi(t,e,[{provide:Ys,useValue:this},{provide:ls,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=so.THROW_IF_NOT_FOUND,n=k.Default){return t===so||t===Ys||t===zi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class da extends Xs{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,ha.get(i),n),ha.set(i,n));const o=mr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new fa(this.moduleType,t)}}const pa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ga(){return this._results[go()]()}class ma{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=go(),n=ma.prototype;n[e]||(n[e]=ga)}get changes(){return this._changes||(this._changes=new pa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=nn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ya{constructor(t){this.queryList=t,this.matches=null}clone(){return new ya(this.queryList)}setDirty(){this.queryList.setDirty()}}class va{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new va(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Aa(t,e).matches&&this.queries[e].setDirty()}}class ba{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class wa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new wa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class _a{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new _a(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Oa(e,i)),this.matchTNodeWithReadOption(t,e,He(e,t,i,!1,!1))}else n===Qs?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,He(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ps||r===Js||r===Qs&&4&e.type)this.addMatch(e.index,-2);else{const n=He(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Oa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ea(t,e,n,r){return-1===n?function(t,e){return 11&t.type?fs(t,e):4&t.type?$s(t,e):null}(e,t):-2===n?function(t,e,n){return n===ps?fs(e,t):n===Qs?$s(e,t):n===Js?ia(e,t):void 0}(t,e,r):ze(t,t[1],n,e)}function Sa(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ea(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ta(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Sa(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ta(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ta(n[1],n,i,r)}}}}}return r}function Ca(t){const e=Ht(),n=zt(),r=te();ee(r+1);const i=Aa(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ta(n,e,r,[]):Sa(n,e,i,r);t.reset(o,gs),t.notifyOnChanges()}return!0}return!1}function Ia(t,e,n,r){const i=zt();if(i.firstCreatePass){const o=Gt();(function(t,e,n){null===t.queries&&(t.queries=new wa),t.queries.track(new _a(e,n))})(i,new ba(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new ma(4==(4&n));vi(t,e,r,r.destroy),null===e[19]&&(e[19]=new va),e[19].queries.push(new ya(r))}(i,Ht(),n)}function xa(){return t=Ht(),e=te(),t[19].queries[e].queryList;var t,e}function Aa(t,e){return t.queries.getByIndex(e)}function ja(t=k.Default){const e=qs(!0);if(null!=e||t&k.Optional)return e;_("ChangeDetectorRef")}const ka=new Je("Application Initializer");let Ra=(()=>{class t{constructor(t){this.appInits=t,this.resolve=hs,this.reject=hs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Co(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(yn(ka,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const Da=new Je("AppId"),Na={provide:Da,useFactory:function(){return`${Pa()}${Pa()}${Pa()}`},deps:[]};function Pa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ma=new Je("Platform Initializer"),La=new Je("Platform ID"),Ua=new Je("appBootstrapListener");let Va=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const Fa=new Je("LocaleId"),qa=new Je("DefaultCurrencyCode");class Ba{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ha=function(t){return new da(t)},za=Ha,Ga=function(t){return Promise.resolve(Ha(t))},Qa=function(t){const e=Ha(t),n=mr(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new ca(n)),t},[]);return new Ba(e,n)},Ka=Qa,Wa=function(t){return Promise.resolve(Qa(t))};let $a=(()=>{class t{constructor(){this.compileModuleSync=za,this.compileModuleAsync=Ga,this.compileModuleAndAllComponentsSync=Ka,this.compileModuleAndAllComponentsAsync=Wa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const Ya=(()=>Promise.resolve(0))();function Xa(t){"undefined"==typeof Zone?Ya.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Za{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pa(!1),this.onMicrotaskEmpty=new pa(!1),this.onStable=new pa(!1),this.onError=new pa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,eu(t),tu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),eu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return nu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),ru(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return nu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),ru(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,eu(t),tu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Za.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Za.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ja,hs,hs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Ja={};function tu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function eu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function nu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ru(t){t._nesting--,tu(t)}class iu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pa,this.onMicrotaskEmpty=new pa,this.onStable=new pa,this.onError=new pa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ou=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Za.assertNotInAngularZone(),Xa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(yn(Za))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})(),su=(()=>{class t{constructor(){this._applications=new Map,lu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return lu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();class au{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function uu(t){lu=t}let cu,lu=new au,hu=!0,fu=!1;function du(){return fu=!0,hu}function pu(){if(fu)throw new Error("Cannot enable prod mode after platform setup.");hu=!1}const gu=new Je("AllowMultipleToken");class mu{constructor(t,e){this.name=t,this.token=e}}function yu(t,e,n=[]){const r=`Platform: ${e}`,i=new Je(r);return(e=[])=>{let o=vu();if(!o||o.injector.get(gu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Qi,useValue:"platform"});!function(t){if(cu&&!cu.destroyed&&!cu.injector.get(gu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");cu=t.get(bu);const e=t.get(Ma,null);e&&e.forEach(t=>t())}(so.create({providers:t,name:r}))}return function(t){const e=vu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function vu(){return cu&&!cu.destroyed?cu:null}let bu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new iu:("zone.js"===t?void 0:t)||new Za({enableLongStackTrace:du(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Za,useValue:n}];return n.run(()=>{const e=so.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(dr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ou(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Co(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ra);return t.runInitializers(),t.donePromise.then(()=>(Jo(i.injector.get(Fa,Xo)||Xo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=wu({},e);return function(t,e,n){const r=new da(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(_u);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(yn(so))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function wu(t,e){return Array.isArray(e)?e.reduce(wu,t):Object.assign(Object.assign({},t),e)}let _u=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Za.assertNotInAngularZone(),Xa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Za.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(t=>{return Object(u.a)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.b);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof us?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ys),i=n.create(so.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ou,null),a=s&&i.injector.get(su);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ou(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ou(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ua,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(yn(Za),yn(so),yn(dr),yn(ls),yn(Ra))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Ou(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Eu{}class Su{}const Tu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Cu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Tu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Iu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Iu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(yn($a),yn(Su,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Iu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const xu=function(t){return null},Au=yu(null,"core",[{provide:La,useValue:"unknown"},{provide:bu,deps:[so]},{provide:su,deps:[]},{provide:Va,deps:[]}]),ju=[{provide:_u,useClass:_u,deps:[Za,so,dr,ls,Ra]},{provide:ua,deps:[Za],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ra,useClass:Ra,deps:[[new _n,ka]]},{provide:$a,useClass:$a,deps:[]},Na,{provide:Ds,useFactory:function(){return Hs},deps:[]},{provide:Ps,useFactory:function(){return zs},deps:[]},{provide:Fa,useFactory:function(t){return Jo(t=t||"undefined"!=typeof $localize&&$localize.locale||Xo),t},deps:[[new wn(Fa),new _n,new On]]},{provide:qa,useValue:"USD"}];let ku=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(yn(_u))},t.\u0275mod=it({type:t}),t.\u0275inj=E({providers:ju}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return w}),n.d(e,"e",function(){return _}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return l}),n.d(e,"j",function(){return h}),n.d(e,"k",function(){return d}),n.d(e,"l",function(){return p}),n.d(e,"m",function(){return u}),n.d(e,"n",function(){return c}),n.d(e,"o",function(){return f}),n.d(e,"p",function(){return g});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new O(t,e);return n.subscribe.bind(n)}var O=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function E(){}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return C}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let C=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(u.C))},t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.f)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.d)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.d)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.g)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.g)(e,t)},createSubscribe:s.e,ErrorFactory:s.b,deepExtend:s.g}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.i)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.n)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Qb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Qb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Qb)(s).location;return new b(Object(r.Qb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(m),r.Qb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:O,token:t,providedIn:"root"}),t})();function O(){return new _(Object(r.Qb)(m),Object(r.Qb)(a))}function E(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const T=r.mb;class C{}let I=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(T(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[{provide:C,useClass:I}]}),t})();function A(t){return"server"===t}let j=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new k(Object(r.Qb)(s),window)}),t})();class k{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=R(this.window.history)||R(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function R(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class D extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new D,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=P||(P=document.querySelector("base"),P)?P.getAttribute("href"):null;return null==e?null:(n=e,N||(N=document.createElement("a")),N.setAttribute("href",n),"/"===N.pathname.charAt(0)?N.pathname:"/"+N.pathname);var n}resetBaseElement(){P=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let N,P=null;const M=new r.r("TRANSITION_ID"),L=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[M,s,r.s],multi:!0}];class U{static init(){Object(r.X)(new U)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const V=new r.r("EventManagerPlugins");let F=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(V),r.Qb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class q{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let B=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),H=(()=>{class t extends B{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const z={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},G=/%COMP%/g;function Q(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Q(t,i,n):(i=i.replace(G,t),n.push(i))}return n}function K(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let W=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new $(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Y(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new X(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Q(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(F),r.Qb(H),r.Qb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class ${constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(z[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=z[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=z[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,K(n)):this.eventManager.addEventListener(t,e,K(n))}}class Y extends ${constructor(t,e,n,r){super(t),this.component=n;const i=Q(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(G,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(G,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class X extends ${constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Q(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Z=(()=>{class t extends q{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const J=["alt","control","meta","shift"],tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},et={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},nt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let rt=(()=>{class t extends q{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(J.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&et.hasOwnProperty(e)&&(e=et[e]))}return tt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),J.forEach(r=>{r!=n&&(0,nt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const it=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){D.makeCurrent(),U.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],ot=Object(r.S)(r.W,"browser",it),st=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:V,useClass:Z,multi:!0,deps:[s,r.A,r.C]},{provide:V,useClass:rt,multi:!0,deps:[s]},[],{provide:W,useClass:W,deps:[F,H,r.c]},{provide:r.F,useExisting:W},{provide:B,useExisting:H},{provide:H,useClass:H,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:F,useClass:F,deps:[V,r.A]},[]];let at=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:M,useExisting:r.c},L]}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(t,12))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:st,imports:[x,r.f]}),t})();"undefined"!=typeof window&&window;var ut=n("Cfvw"),ct=n("HDdC"),lt=n("DH7j"),ht=n("lJxs"),ft=n("XoHu");function dt(t,e){return new ct.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(ut.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class pt{}const gt=new r.r("NgValueAccessor"),mt={provide:gt,useExisting:Object(r.U)(()=>vt),multi:!0},yt=new r.r("CompositionEventMode");let vt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(yt,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([mt])]}),t})();const bt=new r.r("NgValidators"),wt=new r.r("NgAsyncValidators");function _t(t){return null!=t}function Ot(t){const e=Object(r.rb)(t)?Object(ut.a)(t):t;return Object(r.qb)(e),e}function Et(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function St(t,e){return e.map(e=>e(t))}function Tt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Ct(t){return null!=t?function(t){if(!t)return null;const e=t.filter(_t);return 0==e.length?null:function(t){return Et(St(t,e))}}(Tt(t)):null}function It(t){return null!=t?function(t){if(!t)return null;const e=t.filter(_t);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(lt.a)(e))return dt(e,null);if(Object(ft.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return dt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return dt(t=1===t.length&&Object(lt.a)(t[0])?t[0]:t,null).pipe(Object(ht.a)(t=>e(...t)))}return dt(t,null)}(St(t,e).map(Ot)).pipe(Object(ht.a)(Et))}}(Tt(t)):null}function xt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let At=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Ct(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=It(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),jt=(()=>{class t extends At{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return kt(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const kt=r.Ob(jt);class Rt extends At{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Dt=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Rt,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function Nt(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Pt(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Mt(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Lt="VALID",Ut="INVALID",Vt="PENDING",Ft="DISABLED";function qt(t){return(Gt(t)?t.validators:t)||null}function Bt(t){return Array.isArray(t)?Ct(t):t||null}function Ht(t,e){return(Gt(e)?e.asyncValidators:t)||null}function zt(t){return Array.isArray(t)?It(t):t||null}function Gt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Qt{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Bt(this._rawValidators),this._composedAsyncValidatorFn=zt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Lt}get invalid(){return this.status===Ut}get pending(){return this.status==Vt}get disabled(){return this.status===Ft}get enabled(){return this.status!==Ft}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Bt(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=zt(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Vt,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ft,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Lt,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Lt&&this.status!==Vt||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ft:Lt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Vt,this._hasOwnPendingAsyncValidator=!0;const e=Ot(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Wt?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof $t&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?Ft:this.errors?Ut:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vt)?Vt:this._anyControlsHaveStatus(Ut)?Ut:Lt}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Gt(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Kt extends Qt{constructor(t=null,e,n){super(qt(e),Ht(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Mt(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Mt(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Wt extends Qt{constructor(t,e,n){super(qt(e),Ht(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Kt?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class $t extends Qt{constructor(t,e,n){super(qt(e),Ht(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Kt?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Yt={provide:Rt,useExisting:Object(r.U)(()=>Zt)},Xt=(()=>Promise.resolve(null))();let Zt=(()=>{class t extends Rt{constructor(t,e,n,i){super(),this.control=new Kt,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===vt?n=t:Object.getPrototypeOf(t.constructor)===pt?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(xt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(xt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();Nt(e._rawValidators,n),Nt(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Pt(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Pt(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Xt.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Xt.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(jt,9),r.Kb(bt,10),r.Kb(wt,10),r.Kb(gt,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([Yt]),r.xb,r.yb]}),t})();const Jt={provide:gt,useExisting:Object(r.U)(()=>te),multi:!0};let te=(()=>{class t extends pt{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Jt]),r.xb]}),t})(),ee=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})(),ne=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[ee]]}),t})(),re=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[ne]}),t})();var ie=n("LRne"),oe=n("XNiG"),se=n("9ppp");class ae extends oe.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new se.a;return this._value}next(t){super.next(this._value=t)}}var ue=n("z+Ro"),ce=n("7o/Q");class le extends ce.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class he extends ce.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var fe=n("SeVD");function de(t,e,n,r,i=new he(t,n,r)){if(!i.closed)return e instanceof ct.a?e.subscribe(i):Object(fe.a)(e)(i)}var pe=n("yCtX");const ge={};class me{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ye(t,this.resultSelector))}}class ye extends le{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(ge),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(de(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===ge?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ve=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var be=n("bHdf");function we(...t){return Object(be.a)(1)(Object(ie.a)(...t))}var _e=n("EY2u");function Oe(t){return new ct.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ut.a)(n):Object(_e.b)()).subscribe(e)})}var Ee=n("EQ5u"),Se=n("zx2A");function Te(t,e){return"function"==typeof e?n=>n.pipe(Te((n,r)=>Object(ut.a)(t(n,r)).pipe(Object(ht.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Ce(t))}class Ce{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ie(t,this.project))}}class Ie extends Se.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Se.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Se.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const xe=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Ae(t){return e=>0===t?Object(_e.b)():e.lift(new je(t))}class je{constructor(t){if(this.total=t,this.total<0)throw new xe}call(t,e){return e.subscribe(new ke(t,this.total))}}class ke extends ce.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Re(...t){const e=t[t.length-1];return Object(ue.a)(e)?(t.pop(),n=>we(t,n,e)):e=>we(t,e)}function De(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ne(t,e,n))}}class Ne{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Pe(t,this.accumulator,this.seed,this.hasSeed))}}class Pe extends ce.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Me(t,e){return function(n){return n.lift(new Le(t,e))}}class Le{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Ue(t,this.predicate,this.thisArg))}}class Ue extends ce.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Ve(t){return function(e){const n=new Fe(t),r=e.lift(n);return n.caught=r}}class Fe{constructor(t){this.selector=t}call(t,e){return e.subscribe(new qe(t,this.selector,this.caught))}}class qe extends Se.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Se.a(this);this.add(r);const i=Object(Se.c)(n,r);i!==r&&this.add(i)}}}var Be=n("5+tZ");function He(t,e){return Object(Be.a)(t,e,1)}function ze(t){return function(e){return 0===t?Object(_e.b)():e.lift(new Ge(t))}}class Ge{constructor(t){if(this.total=t,this.total<0)throw new xe}call(t,e){return e.subscribe(new Qe(t,this.total))}}class Qe extends ce.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ke(t=Ye){return e=>e.lift(new We(t))}class We{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new $e(t,this.errorFactory))}}class $e extends ce.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Kb){t=Kb}this.destination.error(t)}}}function Ye(){return new ve}function Xe(t=null){return e=>e.lift(new Ze(t))}class Ze{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Je(t,this.defaultValue))}}class Je extends ce.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var tn=n("SpAZ");function en(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Me((e,n)=>t(e,n,r)):tn.a,Ae(1),n?Xe(e):Ke(()=>new ve))}var nn=n("vkgz"),rn=n("x+ZX"),on=n("quSY");class sn{constructor(t){this.callback=t}call(t,e){return e.subscribe(new an(t,this.callback))}}class an extends ce.a{constructor(t,e){super(t),this.add(new on.a(e))}}class un{constructor(t,e){this.id=t,this.url=e}}class cn extends un{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ln extends un{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hn extends un{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fn extends un{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dn extends un{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pn extends un{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gn extends un{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mn extends un{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yn extends un{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _n{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class On{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class En{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Tn="primary";class Cn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function In(t){return new Cn(t)}function xn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function An(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function jn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!kn(t[i],e[i]))return!1;return!0}function kn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Rn(t){return Array.prototype.concat.apply([],t)}function Dn(t){return t.length>0?t[t.length-1]:null}function Nn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Pn(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(ut.a)(Promise.resolve(t)):Object(ie.a)(t)}function Mn(t,e,n){return n?function(t,e){return jn(t,e)}(t.queryParams,e.queryParams)&&Ln(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>kn(t[n],e[n]))}(t.queryParams,e.queryParams)&&Un(t.root,e.root)}function Ln(t,e){if(!Hn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ln(t.children[n],e.children[n]))return!1}return!0}function Un(t,e){return Vn(t,e,e.segments)}function Vn(t,e,n){if(t.segments.length>n.length)return!!Hn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Hn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Un(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Hn(t.segments,r)&&!!t.children.primary&&Vn(t.children.primary,e,i)}}class Fn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=In(this.queryParams)),this._queryParamMap}toString(){return Qn.serialize(this)}}class qn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Nn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kn(this)}}class Bn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=In(this.parameters)),this._parameterMap}toString(){return tr(this)}}function Hn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class zn{}class Gn{parse(t){const e=new or(t);return new Fn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Wn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Yn(e)}=${Yn(t)}`).join("&"):`${Yn(e)}=${Yn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Qn=new Gn;function Kn(t){return t.segments.map(t=>tr(t)).join("/")}function Wn(t,e){if(!t.hasChildren())return Kn(t);if(e){const e=t.children.primary?Wn(t.children.primary,!1):"",n=[];return Nn(t.children,(t,e)=>{e!==Tn&&n.push(`${e}:${Wn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Nn(t.children,(t,r)=>{r===Tn&&(n=n.concat(e(t,r)))}),Nn(t.children,(t,r)=>{r!==Tn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Tn?[Wn(t.children.primary,!1)]:[`${n}:${Wn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Kn(t)}/${e[0]}`:`${Kn(t)}/(${e.join("//")})`}}function $n(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yn(t){return $n(t).replace(/%3B/gi,";")}function Xn(t){return $n(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zn(t){return decodeURIComponent(t)}function Jn(t){return Zn(t.replace(/\+/g,"%20"))}function tr(t){return`${Xn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Xn(t)}=${Xn(e[t])}`).join("")}`;var e}const er=/^[^\/()?;=#]+/;function nr(t){const e=t.match(er);return e?e[0]:""}const rr=/^[^=?&#]+/,ir=/^[^?&#]+/;class or{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qn([],{}):new qn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new qn(t,e)),n}parseSegment(){const t=nr(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Bn(Zn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=nr(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=nr(this.remaining);t&&(n=t,this.capture(n))}t[Zn(e)]=Zn(n)}parseQueryParam(t){const e=function(t){const e=t.match(rr);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ir);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Jn(e),i=Jn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=nr(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Tn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new qn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class sr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ar(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ar(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ur(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return ur(t,this._root).map(t=>t.value)}}function ar(t,e){if(t===e.value)return e;for(const n of e.children){const e=ar(t,n);if(e)return e}return null}function ur(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ur(t,n);if(r.length)return r.unshift(e),r}return[]}class cr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function lr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class hr extends sr{constructor(t,e){super(t),this.snapshot=e,yr(this,t)}toString(){return this.snapshot.toString()}}function fr(t,e){const n=function(t,e){const n=new gr([],{},{},"",{},Tn,e,null,t.root,-1,{});return new mr("",new cr(n,[]))}(t,e),r=new ae([new Bn("",{})]),i=new ae({}),o=new ae({}),s=new ae({}),a=new ae(""),u=new dr(r,i,s,a,o,Tn,e,n.root);return u.snapshot=n.root,new hr(new cr(u,[]),n)}class dr{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(ht.a)(t=>In(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(ht.a)(t=>In(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class gr{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=In(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=In(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mr extends sr{constructor(t,e){super(e),this.url=t,yr(this,e)}toString(){return vr(this._root)}}function yr(t,e){e.value._routerState=t,e.children.forEach(e=>yr(t,e))}function vr(t){const e=t.children.length>0?` { ${t.children.map(vr).join(", ")} } `:"";return`${t.value}${e}`}function br(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,jn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),jn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!jn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),jn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function wr(t,e){return jn(t.params,e.params)&&function(t,e){return Hn(t,e)&&t.every((t,n)=>jn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||wr(t.parent,e.parent))}function _r(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return _r(t,e,r);return _r(t,e)})}(t,e,n);return new cr(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Or(e,t),t}{const n=new dr(new ae((r=e.value).url),new ae(r.params),new ae(r.queryParams),new ae(r.fragment),new ae(r.data),r.outlet,r.component,r),i=e.children.map(e=>_r(t,e));return new cr(n,i)}}var r}function Or(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Or(t.children[n],e.children[n])}function Er(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Sr(t){return"object"==typeof t&&null!=t&&t.outlets}function Tr(t,e,n,r,i){let o={};return r&&Nn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Fn(n.root===t?e:Cr(n.root,t,e),o,i)}function Cr(t,e,n){const r={};return Nn(t.children,(t,i)=>{r[i]=t===e?n:Cr(t,e,n)}),new qn(t.segments,r)}class Ir{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Er(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Sr);if(r&&r!==Dn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ar(t,e,n){if(t||(t=new qn([],{})),0===t.segments.length&&t.hasChildren())return jr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Sr(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Nr(a,u,e))return o;r+=2}else{if(!Nr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new qn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new qn(t.segments.slice(r.pathIndex),t.children),jr(e,0,i)}return r.match&&0===i.length?new qn(t.segments,{}):r.match&&!t.hasChildren()?kr(t,e,n):r.match?jr(t,0,i):kr(t,e,n)}function jr(t,e,n){if(0===n.length)return new qn(t.segments,{});{const r=function(t){return Sr(t[0])?t[0].outlets:{[Tn]:t}}(n),i={};return Nn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Ar(t.children[r],e,n))}),Nn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new qn(t.segments,i)}}function kr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Sr(o)){const t=Rr(o.outlets);return new qn(r,t)}if(0===i&&Er(n[0])){r.push(new Bn(t.segments[e].path,Dr(n[0]))),i++;continue}const s=Sr(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Er(a)?(r.push(new Bn(s,Dr(a))),i+=2):(r.push(new Bn(s,{})),i++)}return new qn(r,{})}function Rr(t){const e={};return Nn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=kr(new qn([],{}),0,t))}),e}function Dr(t){const e={};return Nn(t,(t,n)=>e[n]=`${t}`),e}function Nr(t,e,n){return t==n.path&&jn(e,n.parameters)}class Pr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),br(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=lr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Nn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=lr(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=lr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new En(t.value.snapshot))}),t.children.length&&this.forwardEvent(new _n(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(br(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Mr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Mr(t){br(t.value),t.children.forEach(Mr)}class Lr{constructor(t,e){this.routes=t,this.module=e}}function Ur(t){return"function"==typeof t}function Vr(t){return t instanceof Fn}const Fr=Symbol("INITIAL_VALUE");function qr(){return Te(t=>function(...t){let e,n;return Object(ue.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(lt.a)(t[0])&&(t=t[0]),Object(pe.a)(t,n).lift(new me(e))}(t.map(t=>t.pipe(Ae(1),Re(Fr)))).pipe(De((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Fr)return t;if(r===Fr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Vr(r))return r}return t},t)},Fr),Me(t=>t!==Fr),Object(ht.a)(t=>Vr(t)?t:!0===t),Ae(1)))}let Br=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Pi]},encapsulation:2}),t})();function Hr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];zr(r,Gr(e,r))}}function zr(t,e){t.children&&Hr(t.children,e)}function Gr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Qr(t){const e=t.children&&t.children.map(Qr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Tn&&(n.component=Br),n}function Kr(t){return t.outlet||Tn}function Wr(t,e){const n=t.filter(t=>Kr(t)===e);return n.push(...t.filter(t=>Kr(t)!==e)),n}const $r={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Yr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},$r):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||An)(n,t,e);if(!i)return Object.assign({},$r);const o={};Nn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Xr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Zr(t,e,n)&&Kr(n)!==Tn)}(t,n,r)){const i=new qn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Kr(o)!==Tn){const n=new qn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Kr(o)]=n}return i}(t,e,r,new qn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Zr(t,e,n))}(t,n,r)){const o=new qn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Zr(t,n,a)&&!i[Kr(a)]){const n=new qn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Kr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new qn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Zr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Jr(t,e,n,r){return!!(Kr(t)===r||r!==Tn&&Zr(e,n,t))&&("**"===t.path||Yr(e,t,n).matched)}function ti(t,e,n){return 0===e.length&&!t.children[n]}class ei{constructor(t){this.segmentGroup=t||null}}class ni{constructor(t){this.urlTree=t}}function ri(t){return new ct.a(e=>e.error(new ei(t)))}function ii(t){return new ct.a(e=>e.error(new ni(t)))}function oi(t){return new ct.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class si{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Xr(this.urlTree.root,[],[],this.config).segmentGroup,e=new qn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Tn).pipe(Object(ht.a)(t=>this.createUrlTree(ai(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ve(t=>{if(t instanceof ni)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof ei)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Tn).pipe(Object(ht.a)(e=>this.createUrlTree(ai(e),t.queryParams,t.fragment))).pipe(Ve(t=>{if(t instanceof ei)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new qn([],{[Tn]:t}):t;return new Fn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(ht.a)(t=>new qn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(ut.a)(r).pipe(He(r=>{const i=n.children[r],o=Wr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(ht.a)(t=>({segment:t,outlet:r})))}),De((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Me((e,n)=>t(e,n,r)):tn.a,ze(1),n?Xe(e):Ke(()=>new ve))}())}expandSegment(t,e,n,r,i,o){return Object(ut.a)(n).pipe(He(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Ve(t=>{if(t instanceof ei)return Object(ie.a)(null);throw t}))),en(t=>!!t),Ve((t,n)=>{if(t instanceof ve||"EmptyError"===t.name){if(ti(e,r,i))return Object(ie.a)(new qn([],{}));throw new ei(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Jr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):ri(e):ri(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ii(i):this.lineralizeSegments(n,i).pipe(Object(Be.a)(n=>{const i=new qn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Yr(e,r,i);if(!s)return ri(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ii(l):this.lineralizeSegments(r,l).pipe(Object(Be.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(ie.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(ht.a)(t=>(n._loadedConfig=t,new qn(r,{})))):Object(ie.a)(new qn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Yr(e,n,r);if(!o)return ri(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Be.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Xr(e,s,u,o),l=new qn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(ht.a)(t=>new qn(s,t)));if(0===o.length&&0===c.length)return Object(ie.a)(new qn(s,{}));const h=Kr(n)===i;return this.expandSegment(r,l,o,c,h?Tn:i,!0).pipe(Object(ht.a)(t=>new qn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ie.a)(new Lr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ie.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Be.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(ht.a)(t=>(e._loadedConfig=t,t))):function(t){return new ct.a(e=>e.error(xn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ie.a)(new Lr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ie.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Ur(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Ur(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Pn(o)});return Object(ie.a)(i).pipe(qr(),Object(nn.a)(t=>{if(!Vr(t))return;const e=xn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(ht.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ie.a)(n);if(r.numberOfChildren>1||!r.children.primary)return oi(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Fn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Nn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Nn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new qn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ai(t){const e={};for(const n of Object.keys(t.children)){const r=ai(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new qn(t.segments.concat(e.segments),e.children)}return t}(new qn(t.segments,e))}class ui{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ci{constructor(t,e){this.component=t,this.route=e}}function li(t,e,n){const r=t._root;return fi(r,e?e._root:null,n,[r.value])}function hi(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function fi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=lr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Hn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Hn(t.url,e.url)||!jn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wr(t,e)||!jn(t.queryParams,e.queryParams);case"paramsChange":default:return!wr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ui(r)):(o.data=s.data,o._resolvedData=s._resolvedData),fi(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ci(a.outlet.component,s))}else s&&di(e,a,i),i.canActivateChecks.push(new ui(r)),fi(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Nn(o,(t,e)=>di(t,n.getContext(e),i)),i}function di(t,e,n){const r=lr(t),i=t.value;Nn(r,(t,r)=>{di(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ci(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class pi{}function gi(t){return new ct.a(e=>e.error(t))}class mi{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Xr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Tn);if(null===e)return null;const n=new gr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Tn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new cr(n,e),i=new mr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=pr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Wr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!yi(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Tn?-1:e.value.outlet===Tn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return ti(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Jr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Dn(n).parameters:{};i=new gr(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wi(t),Kr(t),t.component,t,vi(e),bi(e)+n.length,_i(t))}else{const r=Yr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new gr(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wi(t),Kr(t),t.component,t,vi(e),bi(e)+o.length,_i(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Xr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new cr(i,t)]}if(0===a.length&&0===c.length)return[new cr(i,[])];const l=Kr(t)===r,h=this.processSegment(a,u,c,l?Tn:r);return null===h?null:[new cr(i,h)]}}function yi(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bi(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function wi(t){return t.data||{}}function _i(t){return t.resolve||{}}function Oi(t){return Te(e=>{const n=t(e);return n?Object(ut.a)(n).pipe(Object(ht.a)(()=>e)):Object(ie.a)(e)})}class Ei extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Si=new r.r("ROUTES");class Ti{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(ht.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Lr(Rn(i.injector.get(Si,void 0,r.q.Self|r.q.Optional)).map(Qr),i)}),Ve(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ee.a(n,()=>new oe.a).pipe(Object(rn.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(ut.a)(this.loader.load(t)):Pn(t()).pipe(Object(Be.a)(t=>t instanceof r.w?Object(ie.a)(t):Object(ut.a)(this.compiler.compileModuleAsync(t))))}}class Ci{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ii,this.attachRef=null}}class Ii{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Ci,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class xi{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ai(t){throw t}function ji(t,e,n){return e.parse("/")}function ki(t,e){return Object(ie.a)(null)}let Ri=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new oe.a,this.errorHandler=Ai,this.malformedUriErrorHandler=ji,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ki,afterPreactivation:ki},this.urlHandlingStrategy=new xi,this.routeReuseStrategy=new Ei,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Fn(new qn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ti(s,a,t=>this.triggerEvent(new vn(t)),t=>this.triggerEvent(new bn(t))),this.routerState=fr(this.currentUrlTree,this.rootComponentType),this.transitions=new ae({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Me(t=>0!==t.id),Object(ht.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Te(t=>{let n=!1,r=!1;return Object(ie.a)(t).pipe(Object(nn.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Te(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ie.a)(t).pipe(Te(t=>{const n=this.transitions.getValue();return e.next(new cn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?_e.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Te(t=>function(t,e,n,r,i){return new si(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(ht.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(nn.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Be.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new mi(t,e,n,r,i,o).recognize();return null===s?gi(new pi):Object(ie.a)(s)}catch(Kb){return gi(Kb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(ht.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(nn.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new dn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new cn(n,this.serializeUrl(r),i,o);e.next(a);const u=fr(r,this.rootComponentType).snapshot;return Object(ie.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),_e.a}),Oi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(nn.a)(t=>{const e=new pn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(ht.a)(t=>Object.assign(Object.assign({},t),{guards:li(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Be.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ie.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ut.a)(t).pipe(Object(Be.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ie.a)(!0);const s=o.map(o=>{const s=hi(o,e,i);let a;if(function(t){return t&&Ur(t.canDeactivate)}(s))a=Pn(s.canDeactivate(t,e,n,r));else{if(!Ur(s))throw new Error("Invalid CanDeactivate guard");a=Pn(s(t,e,n,r))}return a.pipe(en())});return Object(ie.a)(s).pipe(qr())}(t.component,t.route,n,e,r)),en(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Be.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(ut.a)(e).pipe(He(e=>we(function(t,e){return null!==t&&e&&e(new wn(t)),Object(ie.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new On(t)),Object(ie.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Oe(()=>{const i=e.guards.map(i=>{const o=hi(i,e.node,n);let s;if(function(t){return t&&Ur(t.canActivateChild)}(o))s=Pn(o.canActivateChild(r,t));else{if(!Ur(o))throw new Error("Invalid CanActivateChild guard");s=Pn(o(r,t))}return s.pipe(en())});return Object(ie.a)(i).pipe(qr())}));return Object(ie.a)(i).pipe(qr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ie.a)(!0);const i=r.map(r=>Oe(()=>{const i=hi(r,e,n);let o;if(function(t){return t&&Ur(t.canActivate)}(i))o=Pn(i.canActivate(e,t));else{if(!Ur(i))throw new Error("Invalid CanActivate guard");o=Pn(i(e,t))}return o.pipe(en())}));return Object(ie.a)(i).pipe(qr())}(t,e.route,n))),en(t=>!0!==t,!0))}(r,o,t,e):Object(ie.a)(n)),Object(ht.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(nn.a)(t=>{if(Vr(t.guardsResult)){const e=xn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new gn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Me(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new hn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Oi(t=>{if(t.guards.canActivateChecks.length)return Object(ie.a)(t).pipe(Object(nn.a)(t=>{const e=new mn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Te(t=>{let n=!1;return Object(ie.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Be.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ie.a)(t);let o=0;return Object(ut.a)(n).pipe(He(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ie.a)({});const o={};return Object(ut.a)(i).pipe(Object(Be.a)(i=>function(t,e,n,r){const i=hi(t,e,r);return Pn(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(nn.a)(t=>{o[i]=t}))),ze(1),Object(Be.a)(()=>Object.keys(o).length===i.length?Object(ie.a)(o):_e.a))}(t._resolve,t,e,r).pipe(Object(ht.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),pr(t,n).resolve),null)))}(t.route,e,r,i)),Object(nn.a)(()=>o++),ze(1),Object(Be.a)(e=>o===n.length?Object(ie.a)(t):_e.a))})),Object(nn.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new hn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(nn.a)(t=>{const e=new yn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Oi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ht.a)(t=>{const e=function(t,e,n){const r=_r(t,e._root,n?n._root:void 0);return new hr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(nn.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(ht.a)(t=>(new Pr(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(nn.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new hn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new sn(i))),Ve(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Vr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new hn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new fn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(gh){t.reject(gh)}}var i;return _e.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Hr(t),this.config=t.map(Qr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Tr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ir(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Nn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ir(n,e,r)}(n);if(o.toRoot())return Tr(e.root,new qn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new xr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new xr(t,t===e.root,0)}const r=Er(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new xr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?jr(s.segmentGroup,s.index,o.commands):Ar(s.segmentGroup,s.index,o.commands);return Tr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Vr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Kb){e=this.malformedUriErrorHandler(Kb,this.urlSerializer,t)}return e}isActive(t,e){if(Vr(t))return Mn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Mn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new ln(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.N),r.Qb(zn),r.Qb(Ii),r.Qb(_),r.Qb(r.s),r.Qb(r.x),r.Qb(r.i),r.Qb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Di=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new oe.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Ni(this.skipLocationChange),replaceUrl:Ni(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ni(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ri),r.Kb(dr),r.Rb("tabindex"),r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Tb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function Ni(t){return""===t||!!t}let Pi=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Tn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Mi(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ii),r.Kb(r.Q),r.Kb(r.j),r.Rb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Mi{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===dr?this.route:t===Ii?this.childContexts:this.parent.get(t,e)}}class Li{}class Ui{preload(t,e){return Object(ie.a)(null)}}let Vi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Ti(e,n,e=>t.triggerEvent(new vn(e)),e=>t.triggerEvent(new bn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Me(t=>t instanceof ln),He(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(ut.a)(n).pipe(Object(be.a)(),Object(ht.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(ie.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Be.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ri),r.Qb(r.x),r.Qb(r.i),r.Qb(r.s),r.Qb(Li))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Fi=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ln&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Sn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Sn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ri),r.Qb(j),r.Qb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const qi=new r.r("ROUTER_CONFIGURATION"),Bi=new r.r("ROUTER_FORROOT_GUARD"),Hi=[_,{provide:zn,useClass:Gn},{provide:Ri,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Ri(null,t,e,n,r,i,s,Rn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[zn,Ii,_,r.s,r.x,r.i,Si,qi,[class{},new r.B],[class{},new r.B]]},Ii,{provide:dr,useFactory:function(t){return t.routerState.root},deps:[Ri]},{provide:r.x,useClass:r.K},Vi,Ui,class{preload(t,e){return e().pipe(Ve(()=>Object(ie.a)(null)))}},{provide:qi,useValue:{enableTracing:!1}}];function zi(){return new r.z("Router",Ri)}let Gi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Hi,$i(e),{provide:Bi,useFactory:Wi,deps:[[Ri,new r.B,new r.J]]},{provide:qi,useValue:n||{}},{provide:m,useFactory:Ki,deps:[a,[new r.p(v),new r.B],qi]},{provide:Fi,useFactory:Qi,deps:[Ri,j,qi]},{provide:Li,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ui},{provide:r.z,multi:!0,useFactory:zi},[Yi,{provide:r.d,multi:!0,useFactory:Xi,deps:[Yi]},{provide:Ji,useFactory:Zi,deps:[Yi]},{provide:r.b,multi:!0,useExisting:Ji}]]}}static forChild(e){return{ngModule:t,providers:[$i(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Bi,8),r.Qb(Ri,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();function Qi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Fi(t,e,n)}function Ki(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function Wi(t){return"guarded"}function $i(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Si,multi:!0,useValue:t}]}let Yi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new oe.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Ri),r=this.injector.get(qi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(ie.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(qi),n=this.injector.get(Vi),i=this.injector.get(Fi),o=this.injector.get(Ri),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Xi(t){return t.appInitializer.bind(t)}function Zi(t){return t.bootstrapListener.bind(t)}const Ji=new r.r("Router Initializer");let to=(()=>{class t{constructor(){this.title="Ejercicios"}calcular(){this.resSuma=this.numero1+this.numero2,this.resProm=this.resSuma/2}limpiar(){this.numero1=0,this.numero2=0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:21,vars:4,consts:[["type","number","placeholder","Ingrese una edad",3,"ngModel","ngModelChange"],[3,"click"],["routerLink","/ejercicio2"]],template:function(t,e){1&t&&(r.Nb(0,"label"),r.Zb(1,"Ingrese la primer edad: "),r.Mb(),r.Nb(2,"input",0),r.Tb("ngModelChange",function(t){return e.numero1=t}),r.Mb(),r.Lb(3,"br"),r.Nb(4,"label"),r.Zb(5,"Ingrese la segunda edad: "),r.Mb(),r.Nb(6,"input",0),r.Tb("ngModelChange",function(t){return e.numero2=t}),r.Mb(),r.Lb(7,"br"),r.Nb(8,"button",1),r.Tb("click",function(){return e.calcular()}),r.Zb(9,"Calcular"),r.Mb(),r.Nb(10,"button",1),r.Tb("click",function(){return e.limpiar()}),r.Zb(11,"Limpiar"),r.Mb(),r.Lb(12,"br"),r.Nb(13,"p"),r.Zb(14),r.Mb(),r.Lb(15,"br"),r.Nb(16,"p"),r.Zb(17),r.Mb(),r.Nb(18,"button",2),r.Zb(19,"Ejercicio 2"),r.Mb(),r.Lb(20,"router-outlet")),2&t&&(r.Ab(2),r.Vb("ngModel",e.numero1),r.Ab(4),r.Vb("ngModel",e.numero2),r.Ab(8),r.ac("Suma de las edades: ",e.resSuma,""),r.Ab(3),r.ac("Promedio de las edades: ",e.resProm,""))},directives:[te,vt,Dt,Zt,Di,Pi],styles:['[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#1976d2;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}.toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}svg.material-icons[_ngcontent-%COMP%]{height:24px;width:auto}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{flex-wrap:wrap;margin-top:16px}.card[_ngcontent-%COMP%], .card-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.card[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;flex-direction:row;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px rgba(0,0,0,.35)}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:visited{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022 \\2022 \\2022";position:absolute;top:0;left:0;height:4px;background:#3a3a3a;color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px rgba(0,0,0,.2)}footer[_ngcontent-%COMP%]{margin-top:8px;line-height:20px}.github-star-badge[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:rgba(27,31,35,.35);background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width:767px){.card-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width:575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}']}),t})();var eo=n("VRyK"),no=n("pxpQ"),ro=n("qgXg"),io=n("Ylt2");class oo extends oe.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new so(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new se.a;if(this.isStopped||this.hasError?o=on.a.EMPTY:(this.observers.push(t),o=new io.a(this,t)),r&&t.add(t=new no.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||ro.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class so{constructor(t,e){this.time=t,this.value=e}}function ao(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new oo(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function uo(t,e){return e?Te(()=>t,e):Te(()=>t)}var co=n("tf+s"),lo=n("spgP");const ho=new r.r("angularfire2.auth.use-emulator"),fo=new r.r("angularfire2.auth.settings"),po=new r.r("angularfire2.auth.tenant-id"),go=new r.r("angularfire2.auth.langugage-code"),mo=new r.r("angularfire2.auth.use-device-language"),yo=new r.r("angularfire.auth.persistence");let vo=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new lo.d(i),f=Object(lo.h)(h),d=new oe.a,p=Object(ie.a)(void 0).pipe(Object(no.b)(h.outsideAngular),Te(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(ht.a)(()=>Object(lo.g)(t,i,e)),Object(ht.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(lo.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),ao({bufferSize:1,refCount:!1}));if(A(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(ie.a)(null);else{p.pipe(en()).subscribe();const t=p.pipe(Te(t=>t.getRedirectResult().then(t=>t,()=>null)),f,ao({bufferSize:1,refCount:!1})),e=t=>new ct.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Te(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Te(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(uo(n),Object(co.a)(h.outsideAngular),Object(no.b)(h.insideAngular)),this.user=t.pipe(uo(r),Object(co.a)(h.outsideAngular),Object(no.b)(h.insideAngular)),this.idToken=this.user.pipe(Te(t=>t?Object(ut.a)(t.getIdToken()):Object(ie.a)(null))),this.idTokenResult=this.user.pipe(Te(t=>t?Object(ut.a)(t.getIdTokenResult()):Object(ie.a)(null))),this.credential=Object(eo.a)(t,d,this.authState.pipe(Me(t=>!t))).pipe(Object(ht.a)(t=>(null==t?void 0:t.user)?t:null),Object(co.a)(h.outsideAngular),Object(no.b)(h.insideAngular))}return Object(lo.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(lo.c),r.Qb(lo.b,8),r.Qb(r.C),r.Qb(r.A),r.Qb(ho,8),r.Qb(fo,8),r.Qb(po,8),r.Qb(go,8),r.Qb(mo,8),r.Qb(yo,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(lo.c),Object(r.Qb)(lo.b,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(ho,8),Object(r.Qb)(fo,8),Object(r.Qb)(po,8),Object(r.Qb)(go,8),Object(r.Qb)(mo,8),Object(r.Qb)(yo,8))},token:t,providedIn:"any"}),t})();Object(lo.e)(vo,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let bo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[vo]}),t})();const wo=[{path:"/",component:to},{path:"ejercicio2",component:(()=>{class t{constructor(t,e){this.fireAuth=t,this.router=e}ngOnInit(){}login(){this.fireAuth.signInWithEmailAndPassword(this.usrName,this.usrPass).then(()=>{this.router.navigate(["bienvenido"])}).catch(t=>{alert(t),this.router.navigate(["error"])}),this.clearInputs()}clearInputs(){this.usrName="",this.usrPass=""}volverHome(){this.router.navigate(["home"])}fillInputs(){this.usrName="test@gmail.com",this.usrPass="isanoe20"}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(vo),r.Kb(Ri))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-login"]],decls:4,vars:0,consts:[["routerLink","/"]],template:function(t,e){1&t&&(r.Nb(0,"p"),r.Zb(1,"login works!"),r.Mb(),r.Nb(2,"button",0),r.Zb(3,"Volver a la pantalla de inicio"),r.Mb())},directives:[Di],styles:[""]}),t})()}];let _o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[Gi.forRoot(wo)],Gi]}),t})();const Oo={apiKey:"AIzaSyDxLLYzC6aclzh_ZCoQIj_VuAO-R7J8JGA",authDomain:"pruebaapp-8ff5f.firebaseapp.com",databaseURL:"https://pruebaapp-8ff5f.firebaseio.com",projectId:"pruebaapp-8ff5f",storageBucket:"pruebaapp-8ff5f.appspot.com",messagingSenderId:"1012685789679",appId:"1:1012685789679:web:90073346b36739452b3e1a",measurementId:"G-MQ03S457D9"};var Eo=n("D0XW");function So(){return t=>t.lift(new To)}class To{call(t,e){return e.subscribe(new Co(t))}}class Co extends ce.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class Io{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new xo(t,this.compare,this.keySelector))}}class xo extends ce.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ao=n("Jgta"),jo=n("zIRd"),ko=n("q/0M"),Ro=n("qOnz"),Do=function(t,e){return(Do=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function No(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Po,Mo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Lo=Lo||{},Uo=Mo||self;function Vo(){}function Fo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function qo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Bo="closure_uid_"+(1e9*Math.random()>>>0),Ho=0;function zo(t,e,n){return t.call.apply(t.bind,arguments)}function Go(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Qo(t,e,n){return(Qo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zo:Go).apply(null,arguments)}function Ko(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Wo(){return Date.now()}function $o(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Yo(){this.j=this.j,this.i=this.i}Yo.prototype.j=!1,Yo.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Bo)&&t[Bo]||(t[Bo]=++Ho)}(this)},Yo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Xo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Zo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Jo(t){return Array.prototype.concat.apply([],arguments)}function ts(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function es(t){return/^[\s\xa0]*$/.test(t)}var ns,rs=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function is(t,e){return-1!=t.indexOf(e)}function os(t,e){return t<e?-1:t>e?1:0}t:{var ss=Uo.navigator;if(ss){var as=ss.userAgent;if(as){ns=as;break t}}ns=""}function us(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function cs(t){var e={};for(var n in t)e[n]=t[n];return e}var ls="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ls.length;o++)n=ls[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function fs(t){return fs[" "](t),t}fs[" "]=Vo;var ds,ps,gs=is(ns,"Opera"),ms=is(ns,"Trident")||is(ns,"MSIE"),ys=is(ns,"Edge"),vs=ys||ms,bs=is(ns,"Gecko")&&!(is(ns.toLowerCase(),"webkit")&&!is(ns,"Edge"))&&!(is(ns,"Trident")||is(ns,"MSIE"))&&!is(ns,"Edge"),ws=is(ns.toLowerCase(),"webkit")&&!is(ns,"Edge");function _s(){var t=Uo.document;return t?t.documentMode:void 0}t:{var Os="",Es=(ps=ns,bs?/rv:([^\);]+)(\)|;)/.exec(ps):ys?/Edge\/([\d\.]+)/.exec(ps):ms?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ps):ws?/WebKit\/(\S+)/.exec(ps):gs?/(?:Version)[ \/]?(\S+)/.exec(ps):void 0);if(Es&&(Os=Es?Es[1]:""),ms){var Ss=_s();if(null!=Ss&&Ss>parseFloat(Os)){ds=String(Ss);break t}}ds=Os}var Ts={};function Cs(t){return function(t,e){var n=Ts;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=rs(String(ds)).split("."),r=rs(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=os(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||os(0==s[2].length,0==a[2].length)||os(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Is=Uo.document&&ms&&(_s()||parseInt(ds,10))||void 0,xs=!ms||9<=Number(Is),As=ms&&!Cs("9"),js=function(){if(!Uo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Uo.addEventListener("test",Vo,e),Uo.removeEventListener("test",Vo,e)}catch(n){}return t}();function ks(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Rs(t,e){if(ks.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(bs){t:{try{fs(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ds[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ks.prototype.b=function(){this.defaultPrevented=!0},$o(Rs,ks);var Ds={2:"touch",3:"pen",4:"mouse"};Rs.prototype.b=function(){Rs.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,As)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ns="closure_listenable_"+(1e6*Math.random()|0),Ps=0;function Ms(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ps,this.Y=this.Z=!1}function Ls(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Us(t){this.src=t,this.a={},this.b=0}function Vs(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Xo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ls(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Fs(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Us.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Fs(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ms(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var qs="closure_lm_"+(1e6*Math.random()|0),Bs={};function Hs(t,e,n,r,i){if(r&&r.once)return Gs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Hs(t,e[o],n,r,i);return null}return n=Js(n),t&&t[Ns]?t.va(e,n,qo(r)?!!r.capture:!!r,i):zs(t,e,n,!1,r,i)}function zs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=qo(i)?!!i.capture:!!i;if(s&&!xs)return null;var a=Xs(t);if(a||(t[qs]=a=new Us(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ys,e=xs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)js||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ws(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Gs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Gs(t,e[o],n,r,i);return null}return n=Js(n),t&&t[Ns]?t.wa(e,n,qo(r)?!!r.capture:!!r,i):zs(t,e,n,!0,r,i)}function Qs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Qs(t,e[o],n,r,i);else r=qo(r)?!!r.capture:!!r,n=Js(n),t&&t[Ns]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Fs(o=t.a[e],n,r,i))&&(Ls(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Xs(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Fs(e,n,r,i)),(n=-1<t?e[t]:null)&&Ks(n))}function Ks(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ns])Vs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ws(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Xs(e))?(Vs(n,t),0==n.b&&(n.src=null,e[qs]=null)):Ls(t)}}}function Ws(t){return t in Bs?Bs[t]:Bs[t]="on"+t}function $s(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ks(t),n.call(r,e)}function Ys(t,e){if(t.Y)return!0;if(!xs){if(!e)t:{e=["window","event"];for(var n=Uo,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return $s(t,e=new Rs(e,this))}return $s(t,new Rs(e,this))}function Xs(t){return(t=t[qs])instanceof Us?t:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Js(t){return"function"==typeof t?t:(t[Zs]||(t[Zs]=function(e){return t.handleEvent(e)}),t[Zs])}function ta(){Yo.call(this),this.c=new Us(this),this.J=this,this.C=null}function ea(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ks(e,t);else if(e instanceof ks)e.target=e.target||t;else{var i=e;hs(e=new ks(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=na(s,r,!0,e)&&i}if(i=na(s=e.a=t,r,!0,e)&&i,i=na(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=na(s=e.a=n[o],r,!1,e)&&i}function na(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Vs(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}$o(ta,Yo),ta.prototype[Ns]=!0,(Po=ta.prototype).addEventListener=function(t,e,n,r){Hs(this,t,e,n,r)},Po.removeEventListener=function(t,e,n,r){Qs(this,t,e,n,r)},Po.G=function(){if(ta.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ls(n[r]);delete e.a[t],e.b--}}this.C=null},Po.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Po.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ra=Uo.JSON.stringify;function ia(){this.b=this.a=null}var oa,sa=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ua},function(t){t.reset()});function aa(){var t=fa,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ua(){this.next=this.b=this.a=null}function ca(t){Uo.setTimeout(function(){throw t},0)}function la(t,e){oa||function(){var t=Uo.Promise.resolve(void 0);oa=function(){t.then(da)}}(),ha||(oa(),ha=!0),fa.add(t,e)}ia.prototype.add=function(t,e){var n=sa.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ua.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ua.prototype.reset=function(){this.next=this.b=this.a=null};var ha=!1,fa=new ia;function da(){for(var t;t=aa();){try{t.a.call(t.b)}catch(n){ca(n)}var e=sa;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ha=!1}function pa(t,e){ta.call(this),this.b=t||1,this.a=e||Uo,this.f=Qo(this.Za,this),this.g=Wo()}function ga(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ma(t,e,n){if("function"==typeof t)n&&(t=Qo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Qo(t.handleEvent,t)}return 2147483647<Number(e)?-1:Uo.setTimeout(t,e||0)}function ya(t){t.a=ma(function(){t.a=null,t.c&&(t.c=!1,ya(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}$o(pa,ta),(Po=pa.prototype).aa=!1,Po.M=null,Po.Za=function(){if(this.aa){var t=Wo()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ea(this,"tick"),this.aa&&(ga(this),this.start()))}},Po.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Wo())},Po.G=function(){pa.X.G.call(this),ga(this),delete this.a};var va=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Do(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ya(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Uo.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Yo);function ba(t){Yo.call(this),this.b=t,this.a={}}$o(ba,Yo);var wa=[];function _a(t,e,n,r){Array.isArray(n)||(n&&(wa[0]=n.toString()),n=wa);for(var i=0;i<n.length;i++){var o=Hs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Oa(t){us(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ks(t)},t),t.a={}}function Ea(){this.a=!0}function Sa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ra(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ba.prototype.G=function(){ba.X.G.call(this),Oa(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ea.prototype.info=function(){};var Ta={},Ca=null;function Ia(){return Ca=Ca||new ta}function xa(t){ks.call(this,Ta.Fa,t)}function Aa(t){var e=Ia();ea(e,new xa(e,t))}function ja(t,e){ks.call(this,Ta.STAT_EVENT,t),this.stat=e}function ka(t){var e=Ia();ea(e,new ja(e,t))}function Ra(t){ks.call(this,Ta.Ga,t)}function Da(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Uo.setTimeout(function(){t()},e)}Ta.Fa="serverreachability",$o(xa,ks),Ta.STAT_EVENT="statevent",$o(ja,ks),Ta.Ga="timingevent",$o(Ra,ks);var Na={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Pa={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ma(){}function La(){}Ma.prototype.a=null;var Ua,Va={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Fa(){ks.call(this,"d")}function qa(){ks.call(this,"c")}function Ba(){}function Ha(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ba(this),this.P=za,this.R=new pa(t=vs?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}$o(Fa,ks),$o(qa,ks),$o(Ba,Ma),Ua=new Ba;var za=45e3,Ga={},Qa={};function Ka(t,e,n){t.H=1,t.i=gu(cu(e)),t.j=n,t.I=!0,Wa(t,null)}function Wa(t,e){t.u=Wo(),Xa(t),t.l=cu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),xu(n.b,"t",r),t.D=0,t.a=Oc(t.g,t.g.C?e:null),0<t.O&&(t.F=new va(Qo(t.Ca,t,t.a),t.O)),_a(t.J,t.a,"readystatechange",t.Xa),e=t.B?cs(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Aa(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function $a(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ya(t,n);if(i==Qa){4==e&&(t.h=4,ka(14),r=!1),Sa(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ga){t.h=4,ka(15),Sa(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Sa(t.c,t.f,i,null),nu(t,i)}4==e&&0==n.length&&(t.h=1,ka(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),pc(e),e.F=!0,ka(11))):(Sa(t.c,t.f,n,"[Invalid Chunked Response]"),eu(t),tu(t))}function Ya(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Qa:(n=Number(e.substring(n,r)),isNaN(n)?Ga:(r+=1)+n>e.length?Qa:(e=e.substr(r,n),t.D=r+n,e))}function Xa(t){t.T=Wo()+t.P,Za(t,t.P)}function Za(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Da(Qo(t.Va,t),e)}function Ja(t){t.o&&(Uo.clearTimeout(t.o),t.o=null)}function tu(t){0==t.g.v||t.A||yc(t.g,t)}function eu(t){Ja(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ga(t.R),Oa(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function nu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Pu(n.b,t)))if(n.I=t.N,!t.C&&Pu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(sb){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;mc(n),oc(n)}dc(n),ka(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Da(Qo(n.Sa,n),6e3));if(1>=Nu(n.b)&&n.ea){try{n.ea()}catch(sb){}n.ea=void 0}}else bc(n,11)}else if((t.C||n.a==t)&&mc(n),!es(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(is(l,"spdy")||is(l,"quic")||is(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Mu(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,pu(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Wo()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=_c(u,u.C?u.ga:null,u.fa),d.C){Lu(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Ja(p),Xa(p)),u.a=d}else fc(u);0<n.g.length&&uc(n)}else"stop"!=i[0]&&"close"!=i[0]||bc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?bc(n,7):ic(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Aa(4)}catch(sb){}}function ru(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Fo(t)||"string"==typeof t)Zo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Fo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Fo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function iu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof iu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ou(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];su(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)su(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function su(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Po=Ha.prototype).setTimeout=function(t){this.P=t},Po.Xa=function(t){t=t.target;var e=this.F;e&&3==tc(t)?e.f():this.Ca(t)},Po.Ca=function(t){try{if(t==this.a)t:{var e=tc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!vs&&!this.a.$())){this.A||4!=e||7==n||Aa(8==n||0>=r?3:2),Ja(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!es(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ka(12),eu(this),tu(this);break t}Sa(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,nu(this,u)}this.I?($a(this,e,o),vs&&this.b&&3==e&&(_a(this.J,this.R,"tick",this.Wa),this.R.start())):(Sa(this.c,this.f,o,null),nu(this,o)),4==e&&eu(this),this.b&&!this.A&&(4==e?yc(this.g,this):(this.b=!1,Xa(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ka(12)):(this.h=0,ka(13)),eu(this),tu(this)}}}catch(c){}},Po.Wa=function(){if(this.a){var t=tc(this.a),e=this.a.$();this.D<e.length&&(Ja(this),$a(this,t,e),this.b&&4!=t&&Xa(this))}},Po.cancel=function(){this.A=!0,eu(this)},Po.Va=function(){this.o=null;var t=Wo();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Aa(3),ka(17)),eu(this),this.h=2,tu(this)):Za(this,this.T-t)},(Po=iu.prototype).K=function(){ou(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Po.L=function(){return ou(this),this.a.concat()},Po.get=function(t,e){return su(this.b,t)?this.b[t]:e},Po.set=function(t,e){su(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Po.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var au=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function uu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof uu){this.a=void 0!==e?e:t.a,lu(this,t.f),this.j=t.j,hu(this,t.c),fu(this,t.h),this.g=t.g,e=t.b;var n=new Su;n.c=e.c,e.a&&(n.a=new iu(e.a),n.b=e.b),du(this,n),this.i=t.i}else t&&(n=String(t).match(au))?(this.a=!!e,lu(this,n[1]||"",!0),this.j=mu(n[2]||""),hu(this,n[3]||"",!0),fu(this,n[4]),this.g=mu(n[5]||"",!0),du(this,n[6]||"",!0),this.i=mu(n[7]||"")):(this.a=!!e,this.b=new Su(null,this.a))}function cu(t){return new uu(t)}function lu(t,e,n){t.f=n?mu(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function hu(t,e,n){t.c=n?mu(e,!0):e}function fu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function du(t,e,n){e instanceof Su?(t.b=e,function(t,e){e&&!t.f&&(Tu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Cu(this,e),xu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=yu(e,Ou)),t.b=new Su(e,t.a))}function pu(t,e,n){t.b.set(e,n)}function gu(t){return pu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Wo()).toString(36)),t}function mu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,vu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function vu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}uu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(yu(e,bu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(yu(e,bu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(yu(n,"/"==n.charAt(0)?_u:wu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",yu(n,Eu)),t.join("")};var bu=/[#\/\?@]/g,wu=/[#\?:]/g,_u=/[#\?]/g,Ou=/[#\?@]/g,Eu=/#/g;function Su(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Tu(t){t.a||(t.a=new iu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Cu(t,e){Tu(t),e=Au(t,e),su(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,su((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ou(t)))}function Iu(t,e){return Tu(t),e=Au(t,e),su(t.a.b,e)}function xu(t,e,n){Cu(t,e),0<n.length&&(t.c=null,t.a.set(Au(t,e),ts(n)),t.b+=n.length)}function Au(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Po=Su.prototype).add=function(t,e){Tu(this),this.c=null,t=Au(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Po.forEach=function(t,e){Tu(this),this.a.forEach(function(n,r){Zo(n,function(n){t.call(e,n,r,this)},this)},this)},Po.L=function(){Tu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Po.K=function(t){Tu(this);var e=[];if("string"==typeof t)Iu(this,t)&&(e=Jo(e,this.a.get(Au(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Jo(e,t[n])}return e},Po.set=function(t,e){return Tu(this),this.c=null,Iu(this,t=Au(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Po.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Po.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ju=function(){return function(t,e){this.b=t,this.a=e}}();function ku(t){this.g=t||Ru,t=Uo.PerformanceNavigationTiming?0<(t=Uo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Uo.ia&&Uo.ia.ya&&Uo.ia.ya()&&Uo.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ru=10;function Du(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Nu(t){return t.b?1:t.a?t.a.size:0}function Pu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Mu(t,e){t.a?t.a.add(e):t.b=e}function Lu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Uu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=No(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ts(t.c)}function Vu(){}function Fu(){this.a=new Vu}function qu(t,e,n){var r=n||"";try{ru(t,function(t,n){var i=t;qo(t)&&(i=ra(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Kb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Kb}}function Bu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ku.prototype.cancel=function(){var t,e;if(this.c=Uu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=No(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Vu.prototype.stringify=function(t){return Uo.JSON.stringify(t,void 0)},Vu.prototype.parse=function(t){return Uo.JSON.parse(t,void 0)};var Hu=Uo.JSON.parse;function zu(t){ta.call(this),this.headers=new iu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Gu,this.D=this.F=!1}$o(zu,ta);var Gu="",Qu=/^https?$/i,Ku=["POST","PUT"];function Wu(t){return"content-type"==t.toLowerCase()}function $u(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Yu(t),Zu(t)}function Yu(t){t.u||(t.u=!0,ea(t,"complete"),ea(t,"error"))}function Xu(t){if(t.b&&void 0!==Lo&&(!t.s[1]||4!=tc(t)||2!=t.W()))if(t.l&&4==tc(t))ma(t.za,0,t);else if(ea(t,"readystatechange"),4==tc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(au)[1]||null;if(!o&&Uo.self&&Uo.self.location){var s=Uo.self.location.protocol;o=s.substr(0,s.length-1)}i=!Qu.test(o?o.toLowerCase():"")}e=i}if(e)ea(t,"complete"),ea(t,"success");else{t.h=6;try{var a=2<tc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Yu(t)}}finally{Zu(t)}}}function Zu(t,e){if(t.a){Ju(t);var n=t.a,r=t.s[0]?Vo:null;t.a=null,t.s=null,e||ea(t,"ready");try{n.onreadystatechange=r}catch(Kb){}}}function Ju(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Uo.clearTimeout(t.m),t.m=null)}function tc(t){return t.a?t.a.readyState:0}function ec(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return us(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):pu(t,e,n))}function nc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function rc(t){this.pa=0,this.g=[],this.c=new Ea,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=nc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=nc("baseRetryDelayMs",5e3,t),this.Ra=nc("retryDelaySeedMs",1e4,t),this.Ma=nc("forwardChannelMaxRetries",2,t),this.ma=nc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ku(t&&t.concurrentRequestLimit),this.ka=new Fu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function ic(t){if(sc(t),3==t.v){var e=t.R++,n=cu(t.B);pu(n,"SID",t.J),pu(n,"RID",e),pu(n,"TYPE","terminate"),lc(t,n),(e=new Ha(t,t.c,e,void 0)).H=2,e.i=gu(cu(n)),n=!1,Uo.navigator&&Uo.navigator.sendBeacon&&(n=Uo.navigator.sendBeacon(e.i.toString(),"")),!n&&Uo.Image&&((new Image).src=e.i,n=!0),n||(e.a=Oc(e.g,null),e.a.ba(e.i)),e.u=Wo(),Xa(e)}wc(t)}function oc(t){t.a&&(pc(t),t.a.cancel(),t.a=null)}function sc(t){oc(t),t.j&&(Uo.clearTimeout(t.j),t.j=null),mc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Uo.clearTimeout(t.h),t.h=null)}function ac(t,e){t.g.push(new ju(t.Oa++,e)),3==t.v&&uc(t)}function uc(t){Du(t.b)||t.h||(t.h=!0,la(t.Ba,t),t.u=0)}function cc(t,e){var n;n=e?e.f:t.R++;var r=cu(t.B);pu(r,"SID",t.J),pu(r,"RID",n),pu(r,"AID",t.P),lc(t,r),t.i&&t.l&&ec(r,t.i,t.l),n=new Ha(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=hc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Mu(t.b,n),Ka(n,r,e)}function lc(t,e){t.f&&ru({},function(t,n){pu(e,n,t)})}function hc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Qo(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{qu(l,s,"req"+c+"_")}catch(el){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function fc(t){t.a||t.j||(t.T=1,la(t.Aa,t),t.o=0)}function dc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Da(Qo(t.Aa,t),vc(t,t.o)),t.o++,0))}function pc(t){null!=t.s&&(Uo.clearTimeout(t.s),t.s=null)}function gc(t){t.a=new Ha(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=cu(t.la);pu(e,"RID","rpc"),pu(e,"SID",t.J),pu(e,"CI",t.H?"0":"1"),pu(e,"AID",t.P),lc(t,e),pu(e,"TYPE","xmlhttp"),t.i&&t.l&&ec(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=gu(cu(e)),n.j=null,n.I=!0,Wa(n,t)}function mc(t){null!=t.m&&(Uo.clearTimeout(t.m),t.m=null)}function yc(t,e){var n=null;if(t.a==e){mc(t),pc(t),t.a=null;var r=2}else{if(!Pu(t.b,e))return;n=e.s,Lu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Wo()-e.u;var i=t.u;ea(r=Ia(),new Ra(r,n,e,i)),uc(t)}else fc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Nu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Da(Qo(t.Ba,t,e),vc(t,t.u)),t.u++,0)))}(t,e)||2==r&&dc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:bc(t,5);break;case 4:bc(t,10);break;case 3:bc(t,6);break;default:bc(t,2)}}function vc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function bc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Qo(t.Ya,t);n||(n=new uu("//www.google.com/images/cleardot.gif"),Uo.location&&"http"==Uo.location.protocol||lu(n,"https"),gu(n)),function(t,e){var n=new Ea;if(Uo.Image){var r=new Image;r.onload=Ko(Bu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ko(Bu,n,r,"TestLoadImage: error",!1,e),r.onabort=Ko(Bu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ko(Bu,n,r,"TestLoadImage: timeout",!1,e),Uo.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ka(2);t.v=0,t.f&&t.f.ra(e),wc(t),sc(t)}function wc(t){t.v=0,t.I=-1,t.f&&(0==Uu(t.b).length&&0==t.g.length||(t.b.c.length=0,ts(t.g),t.g.length=0),t.f.qa())}function _c(t,e,n){var r=function(t){return t instanceof uu?cu(t):new uu(t,void 0)}(n);if(""!=r.c)e&&hu(r,e+"."+r.c),fu(r,r.h);else{var i=Uo.location;r=function(t,e,n,r){var i=new uu(null,void 0);return t&&lu(i,t),e&&hu(i,e),n&&fu(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&us(t.V,function(t,e){pu(r,e,t)}),n=t.na,(e=t.A)&&n&&pu(r,e,n),pu(r,"VER",t.ha),lc(t,r),r}function Oc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zu(t.Na)).F=t.C,e}function Ec(){}function Sc(){if(ms&&!(10<=Number(Is)))throw Error("Environmental error: no available transport.")}function Tc(t,e){ta.call(this),this.a=new rc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!es(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!es(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new xc(this)}function Cc(t){Fa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ic(){qa.call(this),this.status=1}function xc(t){this.a=t}(Po=zu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ua),this.a.onreadystatechange=Qo(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void $u(this,o)}t=n||"";var i=new iu(this.headers);r&&ru(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Wu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Uo.FormData&&t instanceof Uo.FormData,!(0<=Xo(Ku,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ju(this),0<this.o&&((this.D=function(t){return ms&&Cs(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Qo(this.xa,this)):this.m=ma(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){$u(this,o)}},Po.xa=function(){void 0!==Lo&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ea(this,"timeout"),this.abort(8))},Po.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ea(this,"complete"),ea(this,"abort"),Zu(this))},Po.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Zu(this,!0)),zu.X.G.call(this)},Po.za=function(){this.j||(this.A||this.l||this.g?Xu(this):this.Ua())},Po.Ua=function(){Xu(this)},Po.W=function(){try{return 2<tc(this)?this.a.status:-1}catch(ps){return-1}},Po.$=function(){try{return this.a?this.a.responseText:""}catch(ps){return""}},Po.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Hu(e)}},Po.ua=function(){return this.h},Po.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Po=rc.prototype).ha=8,Po.v=1,Po.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ha(this,this.c,t,void 0),r=this.l;if(this.O&&(r?hs(r=cs(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=hc(this,n,e),pu(i=cu(this.B),"RID",t),pu(i,"CVER",22),this.A&&pu(i,"X-HTTP-Session-Id",this.A),lc(this,i),this.i&&r&&ec(i,this.i,r),Mu(this.b,n),this.Ia&&pu(i,"TYPE","init"),this.da?(pu(i,"$req",e),pu(i,"SID","null"),n.U=!0,Ka(n,i,null)):Ka(n,i,e),this.v=2}}else 3==this.v&&(t?cc(this,t):0==this.g.length||Du(this.b)||cc(this))},Po.Aa=function(){if(this.j=null,gc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Da(Qo(this.Ta,this),t)}},Po.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ka(10),oc(this),gc(this))},Po.Sa=function(){null!=this.m&&(this.m=null,oc(this),dc(this),ka(19))},Po.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ka(2)):(this.c.info("Failed to ping google.com"),ka(1))},(Po=Ec.prototype).ta=function(){},Po.sa=function(){},Po.ra=function(){},Po.qa=function(){},Po.Ja=function(){},Sc.prototype.a=function(t,e){return new Tc(t,e)},$o(Tc,ta),Tc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ka(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=_c(t,null,t.fa),uc(t)},Tc.prototype.close=function(){ic(this.a)},Tc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,ac(this.a,e)}else this.l?((e={}).__data__=ra(t),ac(this.a,e)):ac(this.a,t)},Tc.prototype.G=function(){this.a.f=null,delete this.f,ic(this.a),delete this.a,Tc.X.G.call(this)},$o(Cc,Fa),$o(Ic,qa),$o(xc,Ec),xc.prototype.ta=function(){ea(this.a,"a")},xc.prototype.sa=function(t){ea(this.a,new Cc(t))},xc.prototype.ra=function(t){ea(this.a,new Ic(t))},xc.prototype.qa=function(){ea(this.a,"b")},Sc.prototype.createWebChannel=Sc.prototype.a,Tc.prototype.send=Tc.prototype.h,Tc.prototype.open=Tc.prototype.g,Tc.prototype.close=Tc.prototype.close,Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,Pa.COMPLETE="complete",La.EventType=Va,Va.OPEN="a",Va.CLOSE="b",Va.ERROR="c",Va.MESSAGE="d",ta.prototype.listen=ta.prototype.va,zu.prototype.listenOnce=zu.prototype.wa,zu.prototype.getLastError=zu.prototype.Qa,zu.prototype.getLastErrorCode=zu.prototype.ua,zu.prototype.getStatus=zu.prototype.W,zu.prototype.getResponseJson=zu.prototype.Pa,zu.prototype.getResponseText=zu.prototype.$,zu.prototype.send=zu.prototype.ba;var Ac=Na,jc=Pa,kc=Ta,Rc=La,Dc=zu,Nc=n("mrSG"),Pc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Pc.o=-1;var Mc=new ko.b("@firebase/firestore");function Lc(){return Mc.logLevel}function Uc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Mc.logLevel<=ko.a.DEBUG){var r=e.map(qc);Mc.debug.apply(Mc,Object(Nc.f)(["Firestore (8.3.1): "+t],r))}}function Vc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Mc.logLevel<=ko.a.ERROR){var r=e.map(qc);Mc.error.apply(Mc,Object(Nc.f)(["Firestore (8.3.1): "+t],r))}}function Fc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Mc.logLevel<=ko.a.WARN){var r=e.map(qc);Mc.warn.apply(Mc,Object(Nc.f)(["Firestore (8.3.1): "+t],r))}}function qc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Kb){return t}}function Bc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw Vc(e),new Error(e)}function Hc(t,e){t||Bc()}function zc(t,e){return t}function Gc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Gc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Kc(t,e){return t<e?-1:t>e?1:0}function Wc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function $c(t){return t+"\0"}function Yc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jc(t){return null==t}function tl(t){return 0===t&&1/t==-1/0}function el(t){return"number"==typeof t&&Number.isInteger(t)&&!tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var nl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},rl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Nc.c)(e,t),e}(Error),il=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Bc(),void 0===n?n=t.length-e:n>t.length-e&&Bc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ol=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new rl(nl.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(il),sl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return sl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new rl(nl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new rl(nl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new rl(nl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new rl(nl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(il),ul=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ol.fromString(e))},t.fromName=function(e){return new t(ol.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ol.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ol.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ol(e.slice()))},t}(),cl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Kc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();cl.EMPTY_BYTE_STRING=new cl("");var ll=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(t){if(Hc(!!t),"string"==typeof t){var e=0,n=ll.exec(t);if(Hc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:fl(t.seconds),nanos:fl(t.nanos)}}function fl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function dl(t){return"string"==typeof t?cl.fromBase64String(t):cl.fromUint8Array(t)}var pl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new rl(nl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new rl(nl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new rl(nl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rl(nl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Kc(this.nanoseconds,t.nanoseconds):Kc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function gl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ml(t){var e=t.mapValue.fields.__previous_value__;return gl(e)?ml(e):e}function yl(t){var e=hl(t.mapValue.fields.__local_write_time__.timestampValue);return new pl(e.seconds,e.nanos)}function vl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gl(t)?4:10:Bc()}function bl(t,e){var n=vl(t);if(n!==vl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yl(t).isEqual(yl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=hl(t.timestampValue),r=hl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return dl(t.bytesValue).isEqual(dl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return fl(t.geoPointValue.latitude)===fl(e.geoPointValue.latitude)&&fl(t.geoPointValue.longitude)===fl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return fl(t.integerValue)===fl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=fl(t.doubleValue),r=fl(e.doubleValue);return n===r?tl(n)===tl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Wc(t.arrayValue.values||[],e.arrayValue.values||[],bl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Yc(n)!==Yc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bl(n[i],r[i])))return!1;return!0}(t,e);default:return Bc()}}function wl(t,e){return void 0!==(t.values||[]).find(function(t){return bl(t,e)})}function _l(t,e){var n=vl(t),r=vl(e);if(n!==r)return Kc(n,r);switch(n){case 0:return 0;case 1:return Kc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=fl(t.integerValue||t.doubleValue),r=fl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ol(t.timestampValue,e.timestampValue);case 4:return Ol(yl(t),yl(e));case 5:return Kc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=dl(t),r=dl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Kc(n[i],r[i]);if(0!==o)return o}return Kc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Kc(fl(t.latitude),fl(e.latitude));return 0!==n?n:Kc(fl(t.longitude),fl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=_l(n[i],r[i]);if(o)return o}return Kc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Kc(r[s],o[s]);if(0!==a)return a;var u=_l(n[r[s]],i[o[s]]);if(0!==u)return u}return Kc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Bc()}}function Ol(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Kc(t,e);var n=hl(t),r=hl(e),i=Kc(n.seconds,r.seconds);return 0!==i?i:Kc(n.nanos,r.nanos)}function El(t){return Sl(t)}function Sl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=hl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?dl(t.bytesValue).toBase64():"referenceValue"in t?ul.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Sl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Sl(t.fields[o])}return e+"}"}(t.mapValue):Bc();var e}function Tl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Cl(t){return!!t&&"integerValue"in t}function Il(t){return!!t&&"arrayValue"in t}function xl(t){return!!t&&"nullValue"in t}function Al(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jl(t){return!!t&&"mapValue"in t}var kl=function(t,e){this.key=t,this.version=e},Rl=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Nc.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(kl),Dl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Nc.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(kl),Nl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(kl),Pl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Ml(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Pl(t,e,n,r,i,o,s)}function Ll(t){var e=zc(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+El(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Yl(e.startAt)),e.endAt&&(n+="|ub:",n+=Yl(e.endAt)),e.h=n}return e.h}function Ul(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Zl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!bl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!th(t.startAt,e.startAt)&&th(t.endAt,e.endAt)}function Vl(t){return ul.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Fl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Nc.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ql(t,n,r):"array-contains"===n?new Gl(t,r):"in"===n?new Ql(t,r):"not-in"===n?new Kl(t,r):"array-contains-any"===n?new Wl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Bl(t,n):new Hl(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(_l(e,this.value)):null!==e&&vl(this.value)===vl(e)&&this.m(_l(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Bc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ql=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ul.fromName(r.referenceValue),i}return Object(Nc.c)(e,t),e.prototype.matches=function(t){var e=ul.comparator(t.key,this.key);return this.m(e)},e}(Fl),Bl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=zl(0,n),r}return Object(Nc.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Fl),Hl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=zl(0,n),r}return Object(Nc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Fl);function zl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return ul.fromName(t.referenceValue)})}var Gl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Nc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Il(e)&&wl(e.arrayValue,this.value)},e}(Fl),Ql=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Nc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&wl(this.value.arrayValue,e)},e}(Fl),Kl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Nc.c)(e,t),e.prototype.matches=function(t){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!wl(this.value.arrayValue,e)},e}(Fl),Wl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Nc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Il(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return wl(e.value.arrayValue,t)})},e}(Fl),$l=function(t,e){this.position=t,this.before=e};function Yl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return El(t)}).join(",")}var Xl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Zl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Jl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ul.comparator(ul.fromName(s.referenceValue),n.key):_l(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function th(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!bl(t.position[n],e.position[n]))return!1;return!0}var eh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function nh(t,e,n,r,i,o,s,a){return new eh(t,e,n,r,i,o,s,a)}function rh(t){return new eh(t)}function ih(t){return!Jc(t.limit)&&"F"===t.limitType}function oh(t){return!Jc(t.limit)&&"L"===t.limitType}function sh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ah(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function uh(t){return null!==t.collectionGroup}function ch(t){var e=zc(t);if(null===e.p){e.p=[];var n=ah(e),r=sh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Xl(n)),e.p.push(new Xl(al.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Xl(al.keyField(),u))}}}return e.p}function lh(t){var e=zc(t);if(!e.T)if("F"===e.limitType)e.T=Ml(e.path,e.collectionGroup,ch(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ch(e);r<i.length;r++){var o=i[r];n.push(new Xl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new $l(e.endAt.position,!e.endAt.before):null,a=e.startAt?new $l(e.startAt.position,!e.startAt.before):null;e.T=Ml(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function hh(t,e,n){return new eh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fh(t,e){return Ul(lh(t),lh(e))&&t.limitType===e.limitType}function dh(t){return Ll(lh(t))+"|lt:"+t.limitType}function ph(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+El(e.value);var e}).join(", ")+"]"),Jc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Yl(t.startAt)),t.endAt&&(e+=", endAt: "+Yl(t.endAt)),"Target("+e+")"}(lh(t))+"; limitType="+t.limitType+")"}function gh(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ul.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Jl(t.startAt,ch(t),e)||t.endAt&&Jl(t.endAt,ch(t),e))}(t,e)}function mh(t){return function(e,n){for(var r=!1,i=0,o=ch(t);i<o.length;i++){var s=o[i],a=yh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function yh(t,e,n){var r=t.field.isKeyField()?ul.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?_l(r,i):Bc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Bc()}}var vh=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new pl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),bh=function(){function t(t){this.fields=t,t.sort(al.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Wc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),wh=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!jl(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return bl(this.proto,t.proto)},t}(),_h=function(){function t(t){void 0===t&&(t=wh.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===vl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(al.emptyPath(),this.A);return null!=t?new wh(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=jl(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Oh(t){var e=[];return Xc(t.fields||{},function(t,n){var r=new al([t]);if(jl(n)){var i=Oh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new bh(e)}function Eh(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(e)?"-0":e}}function Sh(t){return{integerValue:""+t}}function Th(t,e){return el(e)?Sh(e):Eh(t,e)}var Ch=function(){this._=void 0};function Ih(t,e,n){return t instanceof jh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof kh?Rh(t,e):t instanceof Dh?Nh(t,e):function(t,e){var n=Ah(t,e),r=Mh(n)+Mh(t.S);return Cl(n)&&Cl(t.S)?Sh(r):Eh(t.D,r)}(t,e)}function xh(t,e,n){return t instanceof kh?Rh(t,e):t instanceof Dh?Nh(t,e):n}function Ah(t,e){return t instanceof Ph?Cl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e}(Ch),kh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Nc.c)(e,t),e}(Ch);function Rh(t,e){for(var n=Lh(e),r=function(t){n.some(function(e){return bl(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Dh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Nc.c)(e,t),e}(Ch);function Nh(t,e){for(var n=Lh(e),r=function(t){n=n.filter(function(e){return!bl(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ph=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(Nc.c)(e,t),e}(Ch);function Mh(t){return fl(t.integerValue||t.doubleValue)}function Lh(t){return Il(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Uh=function(t,e){this.field=t,this.transform=e},Vh=function(t,e){this.version=t,this.transformResults=e},Fh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function qh(t,e){return void 0!==t.updateTime?e instanceof Rl&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Rl}var Bh=function(){};function Hh(t,e,n){return t instanceof Wh?function(t,e,n){var r=t.value,i=Xh(t.fieldTransforms,e,n.transformResults);return r=Jh(t.fieldTransforms,r,i),new Rl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof $h?function(t,e,n){if(!qh(t.precondition,e))return new Nl(t.key,n.version);var r=Yh(t,e,Xh(t.fieldTransforms,e,n.transformResults));return new Rl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Dl(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function zh(t,e,n){return t instanceof Wh?function(t,e,n){if(!qh(t.precondition,e))return e;var r=t.value,i=Zh(t.fieldTransforms,n,e);r=Jh(t.fieldTransforms,r,i);var o=Kh(e);return new Rl(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof $h?function(t,e,n){if(!qh(t.precondition,e))return e;var r=Kh(e),i=Yh(t,e,Zh(t.fieldTransforms,n,e));return new Rl(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return qh(t.precondition,e)?new Dl(t.key,vh.min()):e}(t,e)}function Gh(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Rl?e.field(o.field):void 0,a=Ah(o.transform,s||null);null!=a&&(n=null==n?(new _h).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function Qh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Wc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof kh&&e instanceof kh||t instanceof Dh&&e instanceof Dh?Wc(t.elements,e.elements,bl):t instanceof Ph&&e instanceof Ph?bl(t.S,e.S):t instanceof jh&&e instanceof jh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Kh(t){return t instanceof Rl?t.version:vh.min()}var Wh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Nc.c)(e,t),e}(Bh),$h=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Nc.c)(e,t),e}(Bh);function Yh(t,e,n){var r;return r=function(t,e){var n=new _h(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof Rl?e.data():wh.empty()),Jh(t.fieldTransforms,r,n)}function Xh(t,e,n){var r=[];Hc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Rl&&(a=e.field(o.field)),r.push(xh(s,a,n[i]))}return r}function Zh(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Rl&&(u=n.field(s.field)),r.push(Ih(a,u,e))}return r}function Jh(t,e,n){for(var r=new _h(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var tf,ef,nf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Nc.c)(e,t),e}(Bh),rf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Nc.c)(e,t),e}(Bh),of=function(t){this.count=t};function sf(t){switch(t){case nl.OK:return Bc();case nl.CANCELLED:case nl.UNKNOWN:case nl.DEADLINE_EXCEEDED:case nl.RESOURCE_EXHAUSTED:case nl.INTERNAL:case nl.UNAVAILABLE:case nl.UNAUTHENTICATED:return!1;case nl.INVALID_ARGUMENT:case nl.NOT_FOUND:case nl.ALREADY_EXISTS:case nl.PERMISSION_DENIED:case nl.FAILED_PRECONDITION:case nl.ABORTED:case nl.OUT_OF_RANGE:case nl.UNIMPLEMENTED:case nl.DATA_LOSS:return!0;default:return Bc()}}function af(t){if(void 0===t)return Vc("GRPC error has no .code"),nl.UNKNOWN;switch(t){case tf.OK:return nl.OK;case tf.CANCELLED:return nl.CANCELLED;case tf.UNKNOWN:return nl.UNKNOWN;case tf.DEADLINE_EXCEEDED:return nl.DEADLINE_EXCEEDED;case tf.RESOURCE_EXHAUSTED:return nl.RESOURCE_EXHAUSTED;case tf.INTERNAL:return nl.INTERNAL;case tf.UNAVAILABLE:return nl.UNAVAILABLE;case tf.UNAUTHENTICATED:return nl.UNAUTHENTICATED;case tf.INVALID_ARGUMENT:return nl.INVALID_ARGUMENT;case tf.NOT_FOUND:return nl.NOT_FOUND;case tf.ALREADY_EXISTS:return nl.ALREADY_EXISTS;case tf.PERMISSION_DENIED:return nl.PERMISSION_DENIED;case tf.FAILED_PRECONDITION:return nl.FAILED_PRECONDITION;case tf.ABORTED:return nl.ABORTED;case tf.OUT_OF_RANGE:return nl.OUT_OF_RANGE;case tf.UNIMPLEMENTED:return nl.UNIMPLEMENTED;case tf.DATA_LOSS:return nl.DATA_LOSS;default:return Bc()}}(ef=tf||(tf={}))[ef.OK=0]="OK",ef[ef.CANCELLED=1]="CANCELLED",ef[ef.UNKNOWN=2]="UNKNOWN",ef[ef.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ef[ef.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ef[ef.NOT_FOUND=5]="NOT_FOUND",ef[ef.ALREADY_EXISTS=6]="ALREADY_EXISTS",ef[ef.PERMISSION_DENIED=7]="PERMISSION_DENIED",ef[ef.UNAUTHENTICATED=16]="UNAUTHENTICATED",ef[ef.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ef[ef.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ef[ef.ABORTED=10]="ABORTED",ef[ef.OUT_OF_RANGE=11]="OUT_OF_RANGE",ef[ef.UNIMPLEMENTED=12]="UNIMPLEMENTED",ef[ef.INTERNAL=13]="INTERNAL",ef[ef.UNAVAILABLE=14]="UNAVAILABLE",ef[ef.DATA_LOSS=15]="DATA_LOSS";var uf=function(){function t(t,e){this.comparator=t,this.root=e||lf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new cf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new cf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new cf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new cf(this.root,t,this.comparator,!0)},t}(),cf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),lf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Bc();if(this.right.isRed())throw Bc();var t=this.left.check();if(t!==this.right.check())throw Bc();return t+(this.isRed()?0:1)},t}();lf.EMPTY=null,lf.RED=!0,lf.BLACK=!1,lf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Bc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new lf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var hf=function(){function t(t){this.comparator=t,this.data=new uf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ff(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ff(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ff=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),df=new uf(ul.comparator);function pf(){return df}function gf(){return pf()}var mf=new uf(ul.comparator);function yf(){return mf}var vf=new uf(ul.comparator);function bf(){return vf}var wf=new hf(ul.comparator);function _f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=wf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Of=new hf(Kc);function Ef(){return Of}var Sf=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Tf.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(vh.min(),r,Ef(),pf(),_f())},t}(),Tf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(cl.EMPTY_BYTE_STRING,n,_f(),_f(),_f())},t}(),Cf=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},If=function(t,e){this.targetId=t,this.$=e},xf=function(t,e,n,r){void 0===n&&(n=cl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Af=function(){function t(){this.F=0,this.O=Rf(),this.k=cl.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=_f(),e=_f(),n=_f();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Bc()}}),new Tf(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=Rf()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),jf=function(){function t(t){this.X=t,this.Z=new Map,this.tt=pf(),this.et=kf(),this.nt=new hf(Kc)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof Rl?this.it(r,t.N):t.N instanceof Dl&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Bc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(Vl(i))if(0===n){var o=new ul(i.path);this.rt(e,o,new Dl(o,vh.min()))}else Hc(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&Vl(o.target)){var s=new ul(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new Dl(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=_f();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Sf(t,n,this.nt,this.tt,r);return this.tt=pf(),this.et=kf(),this.nt=new hf(Kc),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new Af,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new hf(Kc),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||Uc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new Af),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function kf(){return new uf(ul.comparator)}function Rf(){return new uf(ul.comparator)}var Df={asc:"ASCENDING",desc:"DESCENDING"},Nf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pf=function(t,e){this.databaseId=t,this.V=e};function Mf(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lf(t,e){return t.V?e.toBase64():e.toUint8Array()}function Uf(t,e){return Mf(t,e.toTimestamp())}function Vf(t){return Hc(!!t),vh.fromTimestamp(function(t){var e=hl(t);return new pl(e.seconds,e.nanos)}(t))}function Ff(t,e){return function(t){return new ol(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function qf(t){var e=ol.fromString(t);return Hc(hd(e)),e}function Bf(t,e){return Ff(t.databaseId,e.path)}function Hf(t,e){var n=qf(e);if(n.get(1)!==t.databaseId.projectId)throw new rl(nl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new rl(nl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ul(Kf(n))}function zf(t,e){return Ff(t.databaseId,e)}function Gf(t){var e=qf(t);return 4===e.length?ol.emptyPath():Kf(e)}function Qf(t){return new ol(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kf(t){return Hc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Wf(t,e,n){return{name:Bf(t,e),fields:n.proto.mapValue.fields}}function $f(t,e,n){var r=Hf(t,e.name),i=Vf(e.updateTime),o=new wh({mapValue:{fields:e.fields}});return new Rl(r,i,o,{hasCommittedMutations:!!n})}function Yf(t,e){var n;if(e instanceof Wh)n={update:Wf(t,e.key,e.value)};else if(e instanceof nf)n={delete:Bf(t,e.key)};else if(e instanceof $h)n={update:Wf(t,e.key,e.data),updateMask:ld(e.fieldMask)};else{if(!(e instanceof rf))return Bc();n={verify:Bf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof jh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Dh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ph)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Bc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Uf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Bc()}(t,e.precondition)),n}function Xf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Fh.updateTime(Vf(t.updateTime)):void 0!==t.exists?Fh.exists(t.exists):Fh.none()}(e.currentDocument):Fh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Hc("REQUEST_TIME"===e.setToServerValue),n=new jh):"appendMissingElements"in e?n=new kh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Dh(e.removeAllFromArray.values||[]):"increment"in e?n=new Ph(t,e.increment):Bc();var r=al.fromServerFormat(e.fieldPath);return new Uh(r,n)}(t,e)}):[];if(e.update){var i=Hf(t,e.update.name),o=new wh({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new bh((t.fieldPaths||[]).map(function(t){return al.fromServerFormat(t)}))}(e.updateMask);return new $h(i,o,s,n,r)}return new Wh(i,o,n,r)}if(e.delete){var a=Hf(t,e.delete);return new nf(a,n)}if(e.verify){var u=Hf(t,e.verify);return new rf(u,n)}return Bc()}function Zf(t,e){return{documents:[zf(t,e.path)]}}function Jf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=zf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=zf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Al(t.value))return{unaryFilter:{field:sd(t.field),op:"IS_NAN"}};if(xl(t.value))return{unaryFilter:{field:sd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Al(t.value))return{unaryFilter:{field:sd(t.field),op:"IS_NOT_NAN"}};if(xl(t.value))return{unaryFilter:{field:sd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sd(t.field),op:od(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:sd(t.field),direction:id(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||Jc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=nd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=nd(e.endAt)),n}function td(t){var e=Gf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Hc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=ed(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Xl(ad(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Jc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=rd(n.startAt));var l=null;return n.endAt&&(l=rd(n.endAt)),nh(e,i,a,s,u,"F",c,l)}function ed(t){return t?void 0!==t.unaryFilter?[cd(t)]:void 0!==t.fieldFilter?[ud(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return ed(t)}).reduce(function(t,e){return t.concat(e)}):Bc():[]}function nd(t){return{before:t.before,values:t.position}}function rd(t){return new $l(t.values||[],!!t.before)}function id(t){return Df[t]}function od(t){return Nf[t]}function sd(t){return{fieldPath:t.canonicalString()}}function ad(t){return al.fromServerFormat(t.fieldPath)}function ud(t){return Fl.create(ad(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Bc()}}(t.fieldFilter.op),t.fieldFilter.value)}function cd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ad(t.unaryFilter.field);return Fl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ad(t.unaryFilter.field);return Fl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ad(t.unaryFilter.field);return Fl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ad(t.unaryFilter.field);return Fl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Bc()}}function ld(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function hd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function fd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=pd(e)),e=dd(t.get(n),e);return pd(e)}function dd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function pd(t){return t+"\x01\x01"}function gd(t){var e=t.length;if(Hc(e>=2),2===e)return Hc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ol.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Bc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Bc()}o=s+2}return new ol(r)}var md=function(t,e){this.seconds=t,this.nanoseconds=e},yd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};yd.store="owner",yd.key="owner";var vd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};vd.store="mutationQueues",vd.keyPath="userId";var bd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};bd.store="mutations",bd.keyPath="batchId",bd.userMutationsIndex="userMutationsIndex",bd.userMutationsKeyPath=["userId","batchId"];var wd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,fd(e)]},t.key=function(t,e,n){return[t,fd(e),n]},t}();wd.store="documentMutations",wd.PLACEHOLDER=new wd;var _d=function(t,e){this.path=t,this.readTime=e},Od=function(t,e){this.path=t,this.version=e},Ed=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ed.store="remoteDocuments",Ed.readTimeIndex="readTimeIndex",Ed.readTimeIndexPath="readTime",Ed.collectionReadTimeIndex="collectionReadTimeIndex",Ed.collectionReadTimeIndexPath=["parentPath","readTime"];var Sd=function(t){this.byteSize=t};Sd.store="remoteDocumentGlobal",Sd.key="remoteDocumentGlobalKey";var Td=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Td.store="targets",Td.keyPath="targetId",Td.queryTargetsIndexName="queryTargetsIndex",Td.queryTargetsKeyPath=["canonicalId","targetId"];var Cd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Cd.store="targetDocuments",Cd.keyPath=["targetId","path"],Cd.documentTargetsIndex="documentTargetsIndex",Cd.documentTargetsKeyPath=["path","targetId"];var Id=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Id.key="targetGlobalKey",Id.store="targetGlobal";var xd=function(t,e){this.collectionId=t,this.parent=e};xd.store="collectionParents",xd.keyPath=["collectionId","parent"];var Ad=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ad.store="clientMetadata",Ad.keyPath="clientId";var jd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};jd.store="bundles",jd.keyPath="bundleId";var kd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};kd.store="namedQueries",kd.keyPath="name";var Rd=Object(Nc.f)(Object(Nc.f)([],Object(Nc.f)(Object(Nc.f)([],Object(Nc.f)(Object(Nc.f)([],Object(Nc.f)(Object(Nc.f)([],[vd.store,bd.store,wd.store,Ed.store,Td.store,yd.store,Id.store,Cd.store]),[Ad.store])),[Sd.store])),[xd.store])),[jd.store,kd.store]),Dd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nd=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Pd=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Md=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Bc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Ld=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new Pd,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new Fd(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=Gd(e.target.error);n.gt.reject(new Fd(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Fd(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Uc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Bd(e)},t}(),Ud=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(Ro.h)())&&Vc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Uc("SimpleDb","Removing database:",t),Hd(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(Ro.h)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n=this;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Uc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Fd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new rl(nl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Fd(t,n))},i.onupgradeneeded=function(t){Uc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Uc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Nc.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Nc.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Nc.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=Ld.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Md.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Uc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Vd=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Hd(this.xt.delete())},t}(),Fd=function(t){function e(e,n){var r=this;return(r=t.call(this,nl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Nc.c)(e,t),e}(rl);function qd(t){return"IndexedDbTransactionError"===t.name}var Bd=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Uc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Uc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Hd(n)},t.prototype.add=function(t){return Uc("SimpleDb","ADD",this.store.name,t,t),Hd(this.store.add(t))},t.prototype.get=function(t){var e=this;return Hd(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Uc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Uc("SimpleDb","DELETE",this.store.name,t),Hd(this.store.delete(t))},t.prototype.count=function(){return Uc("SimpleDb","COUNT",this.store.name),Hd(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){Uc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new Md(function(n,r){e.onerror=function(t){var e=Gd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new Md(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Vd(i),s=e(i.primaryKey,i.value,o);if(s instanceof Md){var a=s.catch(function(t){return o.done(),Md.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return Md.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Hd(t){return new Md(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Gd(t.target.error);n(e)}})}var zd=!1;function Gd(t){var e=Ud.It(Object(Ro.h)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new rl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return zd||(zd=!0,setTimeout(function(){throw r},0)),r}}return t}var Qd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(Nc.c)(e,t),e}(Nd);function Kd(t,e){var n=zc(t);return Ud.Pt(n.Qt,e)}var Wd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Hh(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=zh(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=zh(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},_f())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Wc(this.mutations,t.mutations,function(t,e){return Qh(t,e)})&&Wc(this.baseMutations,t.baseMutations,function(t,e){return Qh(t,e)})},t}(),$d=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Hc(e.mutations.length===r.length);for(var i=bf(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Yd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=vh.min()),void 0===o&&(o=vh.min()),void 0===s&&(s=cl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Xd=function(t){this.Kt=t};function Zd(t,e){if(e.document)return $f(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ul.fromSegments(e.noDocument.path),r=rp(e.noDocument.readTime);return new Dl(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ul.fromSegments(e.unknownDocument.path);return r=rp(e.unknownDocument.version),new Nl(i,r)}return Bc()}function Jd(t,e,n){var r=tp(n),i=e.key.path.popLast().toArray();if(e instanceof Rl){var o=function(t,e){return{name:Bf(t,e.key),fields:e.toProto().mapValue.fields,updateTime:Mf(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new Ed(null,null,o,s,r,i)}if(e instanceof Dl){var a=e.key.path.toArray(),u=np(e.version);return s=e.hasCommittedMutations,new Ed(null,new _d(a,u),null,s,r,i)}if(e instanceof Nl){var c=e.key.path.toArray(),l=np(e.version);return new Ed(new Od(c,l),null,null,!0,r,i)}return Bc()}function tp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ep(t){var e=new pl(t[0],t[1]);return vh.fromTimestamp(e)}function np(t){var e=t.toTimestamp();return new md(e.seconds,e.nanoseconds)}function rp(t){var e=new pl(t.seconds,t.nanoseconds);return vh.fromTimestamp(e)}function ip(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Xf(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Xf(t.Kt,e)}),o=pl.fromMillis(e.localWriteTimeMs);return new Wd(e.batchId,o,n,i)}function op(t){var e,n,r=rp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?rp(t.lastLimboFreeSnapshotVersion):vh.min();return void 0!==t.query.documents?(Hc(1===(n=t.query).documents.length),e=lh(rh(Gf(n.documents[0])))):e=function(t){return lh(td(t))}(t.query),new Yd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,cl.fromBase64String(t.resumeToken))}function sp(t,e){var n,r=np(e.snapshotVersion),i=np(e.lastLimboFreeSnapshotVersion);n=Vl(e.target)?Zf(t.Kt,e.target):Jf(t.Kt,e.target);var o=e.resumeToken.toBase64();return new Td(e.targetId,Ll(e.target),r,o,e.sequenceNumber,i,n)}function ap(t){var e=td({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?hh(e,e.limit,"L"):e}var up=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return cp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:rp(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return cp(t).put({bundleId:(n=e).id,createTime:np(Vf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return lp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:ap(e.bundledQuery),readTime:rp(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return lp(t).put(function(t){return{name:t.name,readTime:np(Vf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function cp(t){return Kd(t,jd.store)}function lp(t){return Kd(t,kd.store)}var hp=function(){function t(){this.Wt=new fp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),Md.resolve()},t.prototype.getCollectionParents=function(t,e){return Md.resolve(this.Wt.getEntries(e))},t}(),fp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new hf(ol.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new hf(ol.comparator)).toArray()},t}(),dp=function(){function t(){this.jt=new fp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:fd(i)};return pp(t).put(o)}return Md.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[$c(e),""],!1,!0);return pp(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(gd(o.parent))}return n})},t}();function pp(t){return Kd(t,xd.store)}var gp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function yp(t,e,n){var r=t.store(bd.store),i=t.store(wd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Hc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=wd.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Md.waitFor(o).next(function(){return c})}function vp(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Bc();e=t.noDocument}return JSON.stringify(e).length}mp.DEFAULT_COLLECTION_PERCENTILE=10,mp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mp.DEFAULT=new mp(41943040,mp.DEFAULT_COLLECTION_PERCENTILE,mp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mp.DISABLED=new mp(-1,0,0);var bp=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Hc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _p(t).qt({index:bd.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Op(t),s=_p(t);return s.add({}).next(function(a){Hc("number"==typeof a);for(var u=new Wd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Yf(t.Kt,e)}),i=n.mutations.map(function(e){return Yf(t.Kt,e)});return new bd(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new hf(function(t,e){return Kc(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=wd.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,wd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),Md.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return _p(t).get(e).next(function(t){return t?(Hc(t.userId===n.userId),ip(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?Md.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _p(t).qt({index:bd.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Hc(e.batchId>=r),o=ip(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return _p(t).qt({index:bd.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _p(t).kt(bd.userMutationsIndex,n).next(function(t){return t.map(function(t){return ip(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=wd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Op(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=gd(r[1]);if(a===n.userId&&e.path.isEqual(c))return _p(t).get(u).next(function(t){if(!t)throw Bc();Hc(t.userId===n.userId),o.push(ip(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new hf(Kc),i=[];return e.forEach(function(e){var o=wd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Op(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=gd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Md.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=wd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new hf(Kc);return Op(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=gd(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(_p(t).get(e).next(function(t){if(null===t)throw Bc();Hc(t.userId===n.userId),r.push(ip(n.D,t))}))}),Md.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return yp(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),Md.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Md.resolve();var r=IDBKeyRange.lowerBound(wd.prefixForUser(e.userId)),i=[];return Op(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=gd(t[1]);i.push(o)}else r.done()}).next(function(){Hc(0===i.length)})})},t.prototype.containsKey=function(t,e){return wp(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return Ep(t).get(this.userId).next(function(t){return t||new vd(e.userId,-1,"")})},t}();function wp(t,e,n){var r=wd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Op(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function _p(t){return Kd(t,bd.store)}function Op(t){return Kd(t,wd.store)}function Ep(t){return Kd(t,vd.store)}var Sp=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),Tp=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new Sp(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return vh.fromTimestamp(new pl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Cp(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return Hc(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Cp(t).qt(function(s,a){var u=op(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Md.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Cp(t).qt(function(t,n){var r=op(n);e(r)})},t.prototype.se=function(t){return Ip(t).get(Id.key).next(function(t){return Hc(null!==t),t})},t.prototype.ie=function(t,e){return Ip(t).put(Id.key,e)},t.prototype.re=function(t,e){return Cp(t).put(sp(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Ll(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Cp(t).qt({range:r,index:Td.queryTargetsIndexName},function(t,n,r){var o=op(n);Ul(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=xp(t);return e.forEach(function(e){var s=fd(e.path);i.push(o.put(new Cd(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Md.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=xp(t);return Md.forEach(e,function(e){var o=fd(e.path);return Md.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=xp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xp(t),i=_f();return r.qt({range:n,Bt:!0},function(t,e,n){var r=gd(t[1]),o=new ul(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=fd(e.path),r=IDBKeyRange.bound([n],[$c(n)],!1,!0),i=0;return xp(t).qt({index:Cd.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return Cp(t).get(e).next(function(t){return t?op(t):null})},t}();function Cp(t){return Kd(t,Td.store)}function Ip(t){return Kd(t,Id.store)}function xp(t){return Kd(t,Cd.store)}function Ap(t){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(e){if(t.code!==nl.FAILED_PRECONDITION||t.message!==Dd)throw t;return Uc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function jp(t,e){var n=t[1],r=e[1],i=Kc(t[0],e[0]);return 0===i?Kc(n,r):i}var kp=function(){function t(t){this.ce=t,this.buffer=new hf(jp),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();jp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Rp=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;Uc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Nc.b)(e,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return qd(e=n.sent())?(Uc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ap(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),Dp=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Md.resolve(Pc.o);var r=new kp(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Uc("LruGarbageCollector","Garbage collection skipped; disabled"),Md.resolve(gp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Uc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),gp):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Uc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Lc()<=ko.a.DEBUG&&Uc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Md.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Np=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Dp(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Pp(t,n)},t.prototype.removeReference=function(t,e,n){return Pp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Pp(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return Ep(t).Ut(function(r){return wp(t,r,e).next(function(t){return t&&(n=!0),Md.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),xp(t).delete([0,fd(s.path)])})});i.push(u)}}).next(function(){return Md.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Pp(t,e)},t.prototype.pe=function(t,e){var n,r=xp(t),i=Pc.o;return r.qt({index:Cd.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Pc.o&&e(new ul(gd(n)),i),i=s,n=o):i=Pc.o}).next(function(){i!==Pc.o&&e(new ul(gd(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Pp(t,e){return xp(t).put(function(t,e){return new Cd(0,fd(t.path),e)}(e,t.currentSequenceNumber))}var Mp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Xc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Zc(this.inner)},t}(),Lp=function(){function t(){this.changes=new Mp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:vh.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Md.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Up=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return qp(t).put(Bp(e),n)},t.prototype.removeEntry=function(t,e){var n=qp(t),r=Bp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return qp(t).get(Bp(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return qp(t).get(Bp(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:vp(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=gf();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=gf(),i=new uf(ul.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,vp(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return Md.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return qp(t).qt({range:r},function(t,e,r){for(var s=ul.fromSegments(t);o&&ul.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=yf(),o=e.path.length+1,s={};if(n.isEqual(vh.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=tp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Ed.collectionReadTimeIndex}return qp(t).qt(s,function(t,n,s){if(t.length===o){var a=Zd(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof Rl&&gh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Vp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Fp(t).get(Sd.key).next(function(t){return Hc(!!t),t})},t.prototype.Te=function(t,e){return Fp(t).put(Sd.key,e)},t.prototype.Ie=function(t){if(t){var e=Zd(this.D,t);return e instanceof Dl&&e.version.isEqual(vh.min())?null:e}return null},t}(),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new Mp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Nc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new hf(function(t,e){return Kc(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=Jd(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=vp(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Jd(e.Ve.D,new Dl(o,vh.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),Md.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(Lp);function Fp(t){return Kd(t,Sd.store)}function qp(t){return Kd(t,Ed.store)}function Bp(t){return t.path.toArray()}var Hp=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Hc(n<r&&n>=0&&r<=11);var o=new Ld("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(yd.store)}(t),function(t){t.createObjectStore(vd.store,{keyPath:vd.keyPath}),t.createObjectStore(bd.store,{keyPath:bd.keyPath,autoIncrement:!0}).createIndex(bd.userMutationsIndex,bd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(wd.store)}(t),zp(t),function(t){t.createObjectStore(Ed.store)}(t));var s=Md.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Cd.store),t.deleteObjectStore(Td.store),t.deleteObjectStore(Id.store)}(t),zp(t)),s=s.next(function(){return function(t){var e=t.store(Id.store),n=new Id(0,0,vh.min().toTimestamp(),0);return e.put(Id.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(bd.store).kt().next(function(n){t.deleteObjectStore(bd.store),t.createObjectStore(bd.store,{keyPath:bd.keyPath,autoIncrement:!0}).createIndex(bd.userMutationsIndex,bd.userMutationsKeyPath,{unique:!0});var r=e.store(bd.store),i=n.map(function(t){return r.put(t)});return Md.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Ad.store,{keyPath:Ad.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Sd.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ed.store);e.createIndex(Ed.readTimeIndex,Ed.readTimeIndexPath,{unique:!1}),e.createIndex(Ed.collectionReadTimeIndex,Ed.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(jd.store,{keyPath:jd.keyPath})}(t),function(t){t.createObjectStore(kd.store,{keyPath:kd.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(Ed.store).qt(function(t,n){e+=vp(n)}).next(function(){var n=new Sd(e);return t.store(Sd.store).put(Sd.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(vd.store),r=t.store(bd.store);return n.kt().next(function(n){return Md.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(bd.userMutationsIndex,i).next(function(r){return Md.forEach(r,function(r){Hc(r.userId===n.userId);var i=ip(e.D,r);return yp(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(Cd.store),n=t.store(Ed.store);return t.store(Id.store).get(Id.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new ol(n),s=function(t){return[0,fd(t)]}(o);r.push(e.get(s).next(function(n){return n?Md.resolve():function(n){return e.put(new Cd(0,fd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Md.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(xd.store,{keyPath:xd.keyPath});var n=e.store(xd.store),r=new fp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:fd(i)})}};return e.store(Ed.store).qt({Bt:!0},function(t,e){var n=new ol(t);return i(n.popLast())}).next(function(){return e.store(wd.store).qt({Bt:!0},function(t,e){var n=gd(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(Td.store);return n.qt(function(t,r){var i=op(r),o=sp(e.D,i);return n.put(o)})},t}();function zp(t){t.createObjectStore(Cd.store,{keyPath:Cd.keyPath}).createIndex(Cd.documentTargetsIndex,Cd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Td.store,{keyPath:Td.keyPath}).createIndex(Td.queryTargetsIndexName,Td.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Id.store)}var Gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new rl(nl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Np(this,i),this.We=n+"main",this.D=new Xd(u),this.je=new Ud(this.We,11,new Hp(this.D)),this.Ge=new Tp(this.referenceDelegate,this.D),this.Gt=new dp,this.ze=function(t,e){return new Up(t,e)}(this.D,this.Gt),this.He=new up,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&Vc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new rl(nl.FAILED_PRECONDITION,Gp);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new Pc(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(Nc.b)(e,void 0,void 0,function(){return Object(Nc.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(Nc.b)(e,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(Nc.b)(e,void 0,void 0,function(){return Object(Nc.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Wp(e).put(new Ad(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(qd(e))return Uc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Uc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return Kp(t).get(yd.key).next(function(t){return Md.resolve(e.cn(t))})},t.prototype.an=function(t){return Wp(t).delete(this.clientId)},t.prototype.un=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Kd(t,Ad.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Md.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?Md.resolve(!0):Kp(t).get(yd.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new rl(nl.FAILED_PRECONDITION,Gp);return!1}}return!(!e.networkEnabled||!e.inForeground)||Wp(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Uc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t=this;return Object(Nc.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[yd.store,Ad.store],function(e){var n=new Qd(e,Pc.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Wp(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return bp.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Uc("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",Rd,function(o){return r=new Qd(o,i.Me?i.Me.next():Pc.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw Vc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new rl(nl.FAILED_PRECONDITION,Dd);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return Kp(t).get(yd.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new rl(nl.FAILED_PRECONDITION,Gp)})},t.prototype.on=function(t){var e=new yd(this.clientId,this.allowTabSynchronization,Date.now());return Kp(t).put(yd.key,e)},t.At=function(){return Ud.At()},t.prototype.rn=function(t){var e=this,n=Kp(t);return n.get(yd.key).next(function(t){return e.cn(t)?(Uc("IndexedDbPersistence","Releasing primary lease."),n.delete(yd.key)):Md.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Vc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Uc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Vc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){Vc("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Kp(t){return Kd(t,yd.store)}function Wp(t){return Kd(t,Ad.store)}function $p(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Yp=function(t,e){this.progress=t,this.En=e},Xp=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=gf();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=pf();return i.forEach(function(t,e){e||(e=new Dl(t,vh.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ul.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):uh(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new ul(e)).next(function(t){var e=yf();return t instanceof Rl&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=yf();return this.Gt.getCollectionParents(t,i).next(function(s){return Md.forEach(s,function(s){var a=function(t,e){return new eh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=zh(u,r.get(c),o.localWriteTime);r=l instanceof Rl?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){gh(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=_f(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof $h&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Rl&&(c=c.insert(t,e))}),c})},t}(),Zp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=_f(),i=_f(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Jp=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(vh.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(ih(e)||oh(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(Lc()<=ko.a.DEBUG&&Uc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ph(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new hf(mh(t));return e.forEach(function(e,r){r instanceof Rl&&gh(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return Lc()<=ko.a.DEBUG&&Uc("QueryEngine","Using full collection scan to execute query:",ph(e)),this.Fn.getDocumentsMatchingQuery(t,e,vh.min())},t}(),tg=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new uf(Kc),this.qn=new Mp(function(t){return Ll(t)},Ul),this.Un=vh.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new Xp(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function eg(t,e,n,r){return new tg(t,e,n,r)}function ng(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Nc.d)(this,function(s){switch(s.label){case 0:return n=zc(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Xp(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=_f(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function rg(t,e){var n=zc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Md.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);Hc(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function ig(t){var e=zc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function og(t,e){var n=zc(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Hc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=pf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(sg(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(vh.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Md.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function sg(t,e,n,r,i){var o=_f();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=pf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Dl&&s.version.isEqual(vh.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Uc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function ag(t,e){var n=zc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function ug(t,e){var n=zc(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?Md.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new Yd(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function cg(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Nc.d)(this,function(a){switch(a.label){case 0:r=zc(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!qd(s=a.sent()))throw s;return Uc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function lg(t,e,n){var r=zc(t),i=vh.min(),o=_f();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=zc(t),i=r.qn.get(n);return void 0!==i?Md.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,lh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:vh.min(),n?o:_f())}).next(function(t){return{documents:t,jn:o}})})}function hg(t,e){var n=zc(t),r=zc(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function fg(t){var e=zc(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=zc(t),i=pf(),o=tp(n),s=qp(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:Ed.readTimeIndex,range:a},function(t,e){var n=Zd(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:ep(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function dg(t){return Object(Nc.b)(this,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){return[2,(e=zc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=qp(t),n=vh.min();return e.qt({index:Ed.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=ep(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function pg(t,e,n,r){return Object(Nc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Nc.d)(this,function(p){switch(p.label){case 0:for(i=zc(t),o=_f(),s=pf(),a=bf(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,ug(i,function(t){return lh(rh(ol.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return sg(t,f,s,vh.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function gg(t,e,n){return void 0===n&&(n=_f()),Object(Nc.b)(this,void 0,void 0,function(){var r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return[4,ug(t,lh(ap(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=zc(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Vf(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(cl.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var mg=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Md.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Vf(n.createTime)}),Md.resolve()},t.prototype.getNamedQuery=function(t,e){return Md.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:ap(t.bundledQuery),readTime:Vf(t.readTime)}}(e)),Md.resolve()},t}(),yg=function(){function t(){this.Xn=new hf(vg.Zn),this.ts=new hf(vg.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new vg(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new vg(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new ul(new ol([])),r=new vg(n,t),i=new vg(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new ul(new ol([])),n=new vg(e,t),r=new vg(e,t+1),i=_f();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new vg(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),vg=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return ul.comparator(t.key,e.key)||Kc(t.hs,e.hs)},t.es=function(t,e){return Kc(t.hs,e.hs)||ul.comparator(t.key,e.key)},t}(),bg=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new hf(vg.Zn)}return t.prototype.checkEmpty=function(t){return Md.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new Wd(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new vg(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return Md.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Md.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return Md.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Md.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return Md.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new vg(e,0),i=new vg(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),Md.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new hf(Kc);return e.forEach(function(t){var e=new vg(t,0),i=new vg(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),Md.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ul.isDocumentKey(i)||(i=i.child(""));var o=new vg(new ul(i),0),s=new hf(Kc);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),Md.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Hc(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return Md.forEach(e.mutations,function(i){var o=new vg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new vg(e,0),r=this.fs.firstAfterOrEqual(n);return Md.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Md.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),wg=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new uf(ul.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Md.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=gf();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Md.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=yf(),i=new ul(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof Rl&&gh(e,u)&&(r=r.insert(u.key,u))}return Md.resolve(r)},t.prototype.ps=function(t,e){return Md.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new _g(this)},t.prototype.getSize=function(t){return Md.resolve(this.size)},t}(),_g=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(Nc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),Md.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(Lp),Og=function(){function t(t){this.persistence=t,this.Es=new Mp(function(t){return Ll(t)},Ul),this.lastRemoteSnapshotVersion=vh.min(),this.highestTargetId=0,this.Ts=0,this.Is=new yg,this.targetCount=0,this.As=Sp.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),Md.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Md.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Md.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),Md.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),Md.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new Sp(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,Md.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),Md.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,Md.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Md.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Md.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return Md.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),Md.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Md.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),Md.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return Md.resolve(n)},t.prototype.containsKey=function(t,e){return Md.resolve(this.Is.containsKey(e))},t}(),Eg=function(){function t(t,e){var n=this;this.Rs={},this.Me=new Pc(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new Og(this),this.Gt=new hp,this.ze=function(t,e){return new wg(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new Xd(e),this.He=new mg(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new bg(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Uc("MemoryPersistence","Starting transaction:",t);var i=new Sg(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return Md.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Sg=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Nc.c)(e,t),e}(Nd),Tg=function(){function t(t){this.persistence=t,this.Ss=new yg,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Bc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),Md.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),Md.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),Md.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Md.forEach(this.xs,function(r){var i=ul.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return Md.or([function(){return Md.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),Cg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ig(t,e){return"firestore_clients_"+t+"_"+e}function xg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ag(t,e){return"firestore_targets_"+t+"_"+e}Cg.UNAUTHENTICATED=new Cg(null),Cg.GOOGLE_CREDENTIALS=new Cg("google-credentials-uid"),Cg.FIRST_PARTY=new Cg("first-party-uid");var jg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new rl(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Vc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),kg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new rl(i.error.code,i.error.message)),o?new t(e,i.state,r):(Vc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ef(),s=0;i&&s<r.activeTargetIds.length;++s)i=el(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Vc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Dg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Vc("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ng=function(){function t(){this.activeTargetIds=Ef()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Pg=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new uf(Kc),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Ig(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new Ng),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Nc.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(Ig(this.persistenceKey,r)))&&(o=Rg.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ag(this.persistenceKey,t));if(n){var r=kg.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ag(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Uc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Uc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Uc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Uc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Vc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(Nc.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Nc.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=Pc.o;if(null!=t)try{var n=JSON.parse(t);Hc("number"==typeof n),e=n}catch(t){Vc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Pc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new jg(this.currentUser,t,e,n),i=xg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=xg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=Ag(this.persistenceKey,t),i=new kg(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return Rg.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return jg.$s(new Cg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return kg.$s(r,e)},t.prototype.Ys=function(t){return Dg.$s(t)},t.prototype.hi=function(t){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(Uc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=Ef();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Mg=function(){function t(){this.yi=new Ng,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new Ng,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Lg=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),Ug=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){Uc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){Uc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Vg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Fg=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),qg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Nc.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new Dc;s.listenOnce(jc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ac.NO_ERROR:var e=s.getResponseJson();Uc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ac.TIMEOUT:Uc("Connection",'RPC "'+t+'" timed out'),o(new rl(nl.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:var n=s.getStatus();if(Uc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(nl).indexOf(e)>=0?e:nl.UNKNOWN}(r.status);o(new rl(a,r.message))}else o(new rl(nl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new rl(nl.UNAVAILABLE,"Connection failed."));break;default:Bc()}}finally{Uc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Sc,i=Ia(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(Ro.m)()||Object(Ro.o)()||Object(Ro.k)()||Object(Ro.l)()||Object(Ro.p)()||Object(Ro.j)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Uc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Fg({vi:function(t){c?Uc("Connection","Not sending because WebChannel is closed:",t):(u||(Uc("Connection","Opening WebChannel transport."),a.open(),u=!0),Uc("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Rc.EventType.OPEN,function(){c||Uc("Connection","WebChannel transport opened.")}),h(a,Rc.EventType.CLOSE,function(){c||(c=!0,Uc("Connection","WebChannel transport closed"),l.$i())}),h(a,Rc.EventType.ERROR,function(t){c||(c=!0,Fc("Connection","WebChannel transport errored:",t),l.$i(new rl(nl.UNAVAILABLE,"The operation could not be completed")))}),h(a,Rc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Hc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Uc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=tf[t];if(void 0!==e)return af(e)}(i),s=r.message;void 0===o&&(o=nl.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new rl(o,s)),a.close()}else Uc("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,kc.STAT_EVENT,function(t){10===t.stat?Uc("Connection","Detected buffering proxy"):11===t.stat&&Uc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);Uc("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return Uc("RestConnection","Received: ",t),t},function(e){throw Fc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+Vg[t]},t}());function Bg(){return"undefined"!=typeof window?window:null}function Hg(){return"undefined"!=typeof document?document:null}function zg(t){return new Pf(t,!0)}var Gg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Uc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Qg=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Gg(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===nl.RESOURCE_EXHAUSTED?(Vc(e.toString()),Vc("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===nl.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new rl(nl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(Nc.b)(t,void 0,void 0,function(){return Object(Nc.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return Uc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(Uc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Kg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(Nc.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Bc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Hc(void 0===e||"string"==typeof e),cl.fromBase64String(e||"")):(Hc(void 0===e||e instanceof Uint8Array),cl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?nl.UNKNOWN:af(t.code);return new rl(e,t.message||"")}(a);n=new xf(r,i,o,s||null)}else if("documentChange"in e){i=Hf(t,(r=e.documentChange).document.name),o=Vf(r.document.updateTime);var a=new wh({mapValue:{fields:r.document.fields}}),u=(s=new Rl(i,o,a,{}),r.targetIds||[]);n=new Cf(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Hf(t,(r=e.documentDelete).document),o=r.readTime?Vf(r.readTime):vh.min(),a=new Dl(i,o),n=new Cf([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Hf(t,(r=e.documentRemove).document),n=new Cf([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Bc();var c=e.filter;i=new of(r=c.count||0),n=new If(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return vh.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?vh.min():e.readTime?Vf(e.readTime):vh.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Qf(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=Vl(r)?{documents:Zf(t,r)}:{query:Jf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Lf(t,e.resumeToken):e.snapshotVersion.compareTo(vh.min())>0&&(n.readTime=Mf(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Qf(this.D),e.removeTarget=t,this.wr(e)},e}(Qg),Wg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(Nc.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Hc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Hc(void 0!==e),t.map(function(t){return function(t,e){var n=Vf(t.updateTime?t.updateTime:e);return n.isEqual(vh.min())&&(n=Vf(e)),new Vh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Vf(t.commitTime);return this.listener.Pr(n,e)}return Hc(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Qf(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Yf(e.D,t)})};this.wr(n)},e}(Qg),$g=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(Nc.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new rl(nl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===nl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===nl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),Yg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(Vc(e),this.Fr=!1):Uc("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),Xg=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(Nc.b)(o,void 0,void 0,function(){return Object(Nc.d)(this,function(t){switch(t.label){case 0:return sm(this)?(Uc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return(e=zc(t)).Qr.add(4),[4,Jg(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,Zg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new Yg(n,r)};function Zg(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:if(!sm(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Jg(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function tm(t,e){var n=zc(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),om(n)?im(n):_m(n).ar()&&nm(n,e))}function em(t,e){var n=zc(t),r=_m(n);n.Ur.delete(e),r.ar()&&rm(n,e),0===n.Ur.size&&(r.ar()?r.lr():sm(n)&&n.jr.set("Unknown"))}function nm(t,e){t.Gr.H(e.targetId),_m(t).Ir(e)}function rm(t,e){t.Gr.H(e),_m(t).Ar(e)}function im(t){t.Gr=new jf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),_m(t).start(),t.jr.Or()}function om(t){return sm(t)&&!_m(t).cr()&&t.Ur.size>0}function sm(t){return 0===zc(t).Qr.size}function am(t){t.Gr=void 0}function um(t){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(e){return t.Ur.forEach(function(e,n){nm(t,e)}),[2]})})}function cm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(n){return am(t),om(t)?(t.jr.Lr(e),im(t)):t.jr.set("Unknown"),[2]})})}function lm(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i,o;return Object(Nc.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof xf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Nc.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Uc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,hm(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Cf?t.Gr.st(e):e instanceof If?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(vh.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,ig(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(cl.EMPTY_BYTE_STRING,n.snapshotVersion)),rm(t,e);var r=new Yd(n.target,e,1,n.sequenceNumber);nm(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Uc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,hm(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function hm(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r=this;return Object(Nc.d)(this,function(i){switch(i.label){case 0:if(!qd(e))throw e;return t.Qr.add(1),[4,Jg(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return ig(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Nc.b)(r,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return Uc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,Zg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function fm(t,e){return e().catch(function(n){return hm(t,n,e)})}function dm(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Nc.d)(this,function(s){switch(s.label){case 0:e=zc(t),n=Om(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return sm(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,ag(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=Om(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,hm(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return pm(e)&&gm(e),[2]}})})}function pm(t){return sm(t)&&!Om(t).cr()&&t.qr.length>0}function gm(t){Om(t).start()}function mm(t){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(e){return Om(t).Sr(),[2]})})}function ym(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n,r;return Object(Nc.d)(this,function(i){for(e=Om(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function vm(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=$d.from(r,e,n),[4,fm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,dm(t)];case 2:return o.sent(),[2]}})})}function bm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(n){switch(n.label){case 0:return e&&Om(t).br?[4,function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return sf(r=e.code)&&r!==nl.ABORTED?(n=t.qr.shift(),Om(t).hr(),[4,fm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,dm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return pm(t)&&gm(t),[2]}})})}function wm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return n=zc(t),e?(n.Qr.delete(2),[4,Zg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Jg(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function _m(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=zc(t);return r.Cr(),new Kg(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:um.bind(null,t),Di:cm.bind(null,t),Tr:lm.bind(null,t)}),t.Kr.push(function(n){return Object(Nc.b)(e,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),om(t)?im(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),am(t),e.label=3;case 3:return[2]}})})})),t.zr}function Om(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=zc(t);return r.Cr(),new Wg(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:mm.bind(null,t),Di:bm.bind(null,t),Vr:ym.bind(null,t),Pr:vm.bind(null,t)}),t.Kr.push(function(n){return Object(Nc.b)(e,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,dm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(Uc("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var Em=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Pd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rl(nl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Sm(t,e){if(Vc("AsyncQueue",e+": "+t),qd(t))return new rl(nl.UNAVAILABLE,e+": "+t);throw t}var Tm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ul.comparator(e.key,n.key)}:function(t,e){return ul.comparator(t.key,e.key)},this.keyedMap=yf(),this.sortedSet=new uf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Cm=function(){function t(){this.Jr=new uf(ul.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Bc():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Im=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Tm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xm=function(){this.Xr=void 0,this.listeners=[]},Am=function(){this.queries=new Mp(function(t){return dh(t)},fh),this.onlineState="Unknown",this.Zr=new Set};function jm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Nc.d)(this,function(c){switch(c.label){case 0:if(n=zc(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new xm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=Sm(a,"Initialization of query '"+ph(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&Nm(n),[2]}})})}function km(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Nc.d)(this,function(a){return n=zc(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Rm(t,e){for(var n=zc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&Nm(n)}function Dm(t,e,n){var r=zc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Nm(t){t.Zr.forEach(function(t){t.next()})}var Pm=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Im(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=Im.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),Mm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),Lm=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Hf(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?$f(this.D,t.document,!1):new Dl(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return Vf(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new Lm(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||_f()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return[4,pg(this.localStore,new Lm(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,gg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Yp(Object.assign({},this.progress),t))]}})})}}();var Um=function(t){this.key=t},Vm=function(t){this.key=t},Fm=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=_f(),this.mutatedKeys=_f(),this.po=mh(t),this.Eo=new Tm(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new Cm,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=ih(this.query)&&i.size===this.query.limit?i.last():null,c=oh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof Rl?e:null;h&&(h=gh(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ih(this.query)||oh(this.query))for(;s.size>this.query.limit;){var l=ih(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bc()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new Im(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Cm,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=_f(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new Vm(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new Um(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=_f();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return Im.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),qm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Bm=function(t){this.key=t,this.Co=!1},Hm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new Mp(function(t){return dh(t)},fh),this.$o=new Map,this.Fo=new Set,this.Oo=new uf(ul.comparator),this.ko=new Map,this.Mo=new yg,this.Lo={},this.Bo=new Map,this.qo=Sp.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function zm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Nc.d)(this,function(a){switch(a.label){case 0:return n=by(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,ug(n.localStore,lh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Gm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&tm(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Gm(t,e,n,r){return Object(Nc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Nc.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(Nc.b)(this,void 0,void 0,function(){var i,o,s;return Object(Nc.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,lg(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(iy(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,lg(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Fm(e,i.jn),s=o.Io(i.documents),a=Tf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),iy(t,n,u.Po),c=new qm(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function Qm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return n=zc(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!fh(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,cg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),em(n.remoteStore,r.targetId),ny(n,r.targetId)}).catch(Ap)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ny(n,r.targetId),[4,cg(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Km(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Nc.d)(this,function(a){switch(a.label){case 0:r=wy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=zc(t),i=pl.now(),o=e.reduce(function(t,e){return t.add(e.key)},_f());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Gh(c,n.get(c.key));null!=l&&s.push(new $h(c.key,l,Oh(l.proto.mapValue),Fh.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new uf(Kc)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ay(r,i.changes)];case 3:return a.sent(),[4,dm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Sm(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Wm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r;return Object(Nc.d)(this,function(i){switch(i.label){case 0:n=zc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,og(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(Hc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Hc(r.Co):t.removedDocuments.size>0&&(Hc(r.Co),r.Co=!1))}),[4,ay(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Ap(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function $m(t,e,n){var r=zc(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=zc(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&Nm(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ym(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Nc.d)(this,function(c){switch(c.label){case 0:return(r=zc(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new uf(ul.comparator)).insert(o,new Dl(o,vh.min())),a=_f().add(o),u=new Sf(vh.min(),new Map,new hf(Kc),s,a),[4,Wm(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),sy(r),[3,4];case 2:return[4,cg(r.localStore,e,!1).then(function(){return ny(r,e,n)}).catch(Ap)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Xm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:n=zc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,rg(n.localStore,e)];case 2:return i=o.sent(),ey(n,r,null),ty(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ay(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ap(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Zm(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:r=zc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=zc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return Hc(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),ey(r,e,n),ty(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ay(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ap(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Jm(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Nc.d)(this,function(a){switch(a.label){case 0:sm((n=zc(t)).remoteStore)||Uc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=zc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Sm(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function ty(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function ey(t,e,n){var r=zc(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function ny(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||ry(t,e)})}function ry(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(em(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),sy(t))}function iy(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Um?(t.Mo.addReference(o.key,e),oy(t,o)):o instanceof Vm?(Uc("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||ry(t,o.key)):Bc()}}function oy(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(Uc("SyncEngine","New document in limbo: "+n),t.Fo.add(r),sy(t))}function sy(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new ul(ol.fromString(e)),r=t.qo.next();t.ko.set(r,new Bm(n)),t.Oo=t.Oo.insert(n,r),tm(t.remoteStore,new Yd(lh(rh(n.path)),r,2,Pc.o))}}function ay(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Nc.d)(this,function(a){switch(a.label){case 0:return r=zc(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Zp.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Nc.d)(this,function(l){switch(l.label){case 0:n=zc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Md.forEach(e,function(e){return Md.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Md.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!qd(r=l.sent()))throw r;return Uc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function uy(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return(n=zc(t)).currentUser.isEqual(e)?[3,3]:(Uc("SyncEngine","User change. New user:",e.toKey()),[4,ng(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new rl(nl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ay(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function cy(t,e){var n=zc(t),r=n.ko.get(e);if(r&&r.Co)return _f().add(r.key);var i=_f(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function ly(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return[4,lg((n=zc(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&iy(n,e.targetId,i.Po),i)]}})})}function hy(t){return Object(Nc.b)(this,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){return[2,fg((e=zc(t)).localStore).then(function(t){return ay(e,t)})]})})}function fy(t,e,n,r){return Object(Nc.b)(this,void 0,void 0,function(){var i,o;return Object(Nc.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=zc(t),r=zc(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):Md.resolve(null)})})}((i=zc(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,dm(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ey(i,e,r||null),ty(i,e),function(t,e){zc(zc(t).Tn).Xt(e)}(i.localStore,e)):Bc(),s.label=4;case 4:return[4,ay(i,o)];case 5:return s.sent(),[3,7];case 6:Uc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function dy(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Nc.d)(this,function(c){switch(c.label){case 0:return by(n=zc(t)),wy(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,py(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,wm(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)tm(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return ny(n,e),cg(n.localStore,e,!0)}),em(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,py(n,a)];case 5:return c.sent(),function(t){var e=zc(t);e.ko.forEach(function(t,n){em(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new uf(ul.comparator)}(n),n.Uo=!1,[4,wm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function py(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Nc.d)(this,function(g){switch(g.label){case 0:n=zc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,ug(n.localStore,lh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,ly(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,hg(n.localStore,a)];case 8:return p=g.sent(),[4,ug(n.localStore,p)];case 9:return u=g.sent(),[4,Gm(n,gy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function gy(t){return nh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function my(t){var e=zc(t);return zc(zc(e.localStore).persistence).gn()}function yy(t,e,n,r){return Object(Nc.b)(this,void 0,void 0,function(){var i,o,s;return Object(Nc.d)(this,function(a){switch(a.label){case 0:return(i=zc(t)).Uo?(Uc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,fg(i.localStore)];case 3:return o=a.sent(),s=Sf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ay(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,cg(i.localStore,e,!0)];case 6:return a.sent(),ny(i,e,r),[3,8];case 7:Bc(),a.label=8;case 8:return[2]}})})}function vy(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Nc.d)(this,function(f){switch(f.label){case 0:if(!(r=by(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(Uc("SyncEngine","Adding an already active target "+s),[3,5]):[4,hg(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,ug(r.localStore,a)];case 3:return u=f.sent(),[4,Gm(r,gy(a),u.targetId,!1)];case 4:f.sent(),tm(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,cg(r.localStore,t,!1).then(function(){em(r.remoteStore,t),ny(r,t)}).catch(Ap)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function by(t){var e=zc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ym.bind(null,e),e.xo.Tr=Rm.bind(null,e.eventManager),e.xo.Ko=Dm.bind(null,e.eventManager),e}function wy(t){var e=zc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zm.bind(null,e),e}var _y=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return this.D=zg(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return eg(this.persistence,new Jp,t.initialUser,this.D)},t.prototype.Go=function(t){return new Eg(Tg.Cs,this.D)},t.prototype.jo=function(t){return new Mg},t.prototype.terminate=function(){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Oy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Nc.c)(e,t),e.prototype.initialize=function(e){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,dg(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,wy(this.Jo.syncEngine)];case 4:return n.sent(),[4,dm(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return eg(this.persistence,new Jp,t.initialUser,this.D)},e.prototype.zo=function(t){return new Rp(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=$p(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?mp.withCacheSize(this.cacheSizeBytes):mp.DEFAULT;return new Qp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Bg(),Hg(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new Mg},e}(_y),Ey=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Nc.c)(e,t),e.prototype.initialize=function(e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r=this;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof Pg?(this.sharedClientState.syncEngine={wi:fy.bind(null,n),_i:yy.bind(null,n),mi:vy.bind(null,n),gn:my.bind(null,n),di:hy.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(Nc.b)(r,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return[4,dy(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Bg();if(!Pg.At(e))throw new rl(nl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=$p(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Pg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Oy),Sy=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n=this;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return $m(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=uy.bind(null,this.syncEngine),[4,wm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Am},t.prototype.createDatastore=function(t){var e=zg(t.databaseInfo.databaseId),n=new qg(t.databaseInfo);return function(t,e,n){return new $g(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return $m(s.syncEngine,t,0)},o=Ug.At()?new Ug:new Lg,new Xg(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Hm(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return e=zc(t),Uc("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Jg(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Ty=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Cy=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new Pd,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new Mm(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n=this;return Object(Nc.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new rl(nl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Nc.d)(this,function(u){switch(u.label){case 0:return n=zc(t),r=Qf(n.D)+"/documents",i={documents:e.map(function(t){return Bf(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Hc(!!e.found);var n=Hf(t,e.found.name),r=Vf(e.found.updateTime),i=new wh({mapValue:{fields:e.found.fields}});return new Rl(n,r,i,{})}(t,e):"missing"in e?function(t,e){Hc(!!e.missing),Hc(!!e.readTime);var n=Hf(t,e.missing),r=Vf(e.readTime);return new Dl(n,r)}(t,e):Bc()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Hc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Dl||t instanceof Rl?n.recordVersion(t):Bc()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new nf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e=this;return Object(Nc.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=ul.fromPath(n);e.mutations.push(new rf(r,e.precondition(r)))}),[4,function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return n=zc(t),r=Qf(n.D)+"/documents",i={writes:e.map(function(t){return Yf(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof Rl)e=t.version;else{if(!(t instanceof Dl))throw Bc();e=vh.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new rl(nl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Fh.updateTime(e):Fh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(vh.min()))throw new rl(nl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fh.updateTime(e)}return Fh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Iy=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Gg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(Nc.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Nc.d)(this,function(r){return t=new Cy(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Jc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!sf(e)}return!1},t}(),xy=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Cg.UNAUTHENTICATED,this.clientId=Qc.u(),this.credentialListener=function(){},this.receivedInitialUser=new Pd,this.credentials.setChangeListener(function(t){Uc("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new rl(nl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Pd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Nc.b)(t,void 0,void 0,function(){var t,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Sm(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Ay(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Uc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Nc.b)(i,void 0,void 0,function(){return Object(Nc.d)(this,function(t){switch(t.label){case 0:return[4,ng(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function jy(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ky(t)];case 1:return n=i.sent(),Uc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return(n=zc(t)).asyncQueue.verifyOperationInProgress(),Uc("RemoteStore","RemoteStore received new credentials"),r=sm(n),n.Qr.add(3),[4,Jg(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,Zg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function ky(t){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Uc("FirestoreClient","Using default OfflineComponentProvider"),[4,Ay(t,new _y)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Ry(t){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Uc("FirestoreClient","Using default OnlineComponentProvider"),[4,jy(t,new Sy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Dy(t){return ky(t).then(function(t){return t.persistence})}function Ny(t){return ky(t).then(function(t){return t.localStore})}function Py(t){return Ry(t).then(function(t){return t.remoteStore})}function My(t){return Ry(t).then(function(t){return t.syncEngine})}function Ly(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return[4,Ry(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=zm.bind(null,e.syncEngine),n.onUnlisten=Qm.bind(null,e.syncEngine),n)]}})})}function Uy(t,e,n){var r=this;void 0===n&&(n={});var i=new Pd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(r,void 0,void 0,function(){var r;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ty({next:function(o){e.enqueueAndForget(function(){return km(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new rl(nl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new rl(nl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Pm(rh(n.path),o,{includeMetadataChanges:!0,uo:!0});return jm(t,s)},[4,Ly(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Vy(t,e,n){var r=this;void 0===n&&(n={});var i=new Pd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(r,void 0,void 0,function(){var r;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ty({next:function(n){e.enqueueAndForget(function(){return km(t,s)}),n.fromCache&&"server"===r.source?i.reject(new rl(nl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Pm(n,o,{includeMetadataChanges:!0,uo:!0});return jm(t,s)},[4,Ly(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Fy=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},qy=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),By=new Map,Hy=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},zy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Cg.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Gy=function(){function t(t){var e=this;this.fc=null,this.currentUser=Cg.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(Uc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Hc("string"==typeof n.accessToken),new Hy(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Hc(null===t||"string"==typeof t),new Cg(t)},t}(),Qy=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=Cg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Ky=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Qy(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(Cg.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Wy(t,e,n){if(!n)throw new rl(nl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function $y(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new rl(nl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Yy(t,e,n,r){if(!0===e&&!0===r)throw new rl(nl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Xy(t){if(!ul.isDocumentKey(t))throw new rl(nl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Zy(t){if(ul.isDocumentKey(t))throw new rl(nl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Jy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Bc()}function tv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new rl(nl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jy(t);throw new rl(nl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ev(t,e){if(e<=0)throw new rl(nl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var nv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new rl(nl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new rl(nl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Yy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),rv=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new nv({}),this._settingsFrozen=!1,t instanceof qy?(this._databaseId=t,this._credentials=new zy):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new rl(nl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qy(t.options.projectId)}(t),this._credentials=new Gy(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new rl(nl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new rl(nl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new zy;switch(t.type){case"gapi":var e=t.client;return Hc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ky(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new rl(nl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=By.get(this))&&(Uc("ComponentProvider","Removing Datastore"),By.delete(this),t.terminate()),Promise.resolve();var t},t}(),iv=function(t){this._delegate=t},ov=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new av(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),sv=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),av=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,rh(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(Nc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ov(this.firestore,null,new ul(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(sv);function uv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof iv&&(t=t._delegate),Wy("collection","path",e),t instanceof rv)return Zy(n=ol.fromString.apply(ol,Object(Nc.f)([e],r))),new av(t,null,n);if(!(t instanceof ov||t instanceof av))throw new rl(nl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Zy(n=ol.fromString.apply(ol,Object(Nc.f)([t.path],r)).child(ol.fromString(e))),new av(t.firestore,null,n)}function cv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof iv&&(t=t._delegate),1===arguments.length&&(e=Qc.u()),Wy("doc","path",e),t instanceof rv)return Xy(n=ol.fromString.apply(ol,Object(Nc.f)([e],r))),new ov(t,null,new ul(n));if(!(t instanceof ov||t instanceof av))throw new rl(nl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xy(n=t._path.child(ol.fromString.apply(ol,Object(Nc.f)([e],r)))),new ov(t.firestore,t instanceof av?t._converter:null,new ul(n))}function lv(t,e){return t instanceof iv&&(t=t._delegate),e instanceof iv&&(e=e._delegate),(t instanceof ov||t instanceof av)&&(e instanceof ov||e instanceof av)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function hv(t,e){return t instanceof iv&&(t=t._delegate),e instanceof iv&&(e=e._delegate),t instanceof sv&&e instanceof sv&&t.firestore===e.firestore&&fh(t._query,e._query)&&t._converter===e._converter}var fv=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Gg(this,"async_queue_retry"),this.bc=function(){var e=Hg();e&&Uc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Hg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Hg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e=this;return Object(Nc.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!qd(t=n.sent()))throw t;return Uc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,Vc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=Em.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Bc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t;return Object(Nc.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function dv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Pd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var pv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new fv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Nc.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||mv(this),this._firestoreClient.terminate()},e}(rv);function gv(t){return t._firestoreClient||mv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mv(t){var e=t._freezeSettings(),n=function(t,e,n){return new Fy(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new xy(t._credentials,t._queue,n)}function yv(t,e,n){var r=this,i=new Pd;return t.asyncQueue.enqueue(function(){return Object(Nc.b)(r,void 0,void 0,function(){var r;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ay(t,n)];case 1:return o.sent(),[4,jy(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===nl.FAILED_PRECONDITION||t.code===nl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function vv(t){if(t._initialized||t._terminated)throw new rl(nl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new rl(nl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new al(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),wv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(cl.fromBase64String(e))}catch(e){throw new rl(nl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(cl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),_v=function(t){this._methodName=t},Ov=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new rl(nl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new rl(nl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Kc(this._lat,t._lat)||Kc(this._long,t._long)},t}(),Ev=/^__.*__$/,Sv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new $h(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wh(t,this.data,e,this.fieldTransforms)},t}(),Tv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new $h(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Cv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bc()}}var Iv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return Kv(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(Cv(this.Fc)&&Ev.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),xv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||zg(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new Iv({Fc:t,methodName:e,Kc:n,path:al.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function Av(t){var e=t._freezeSettings(),n=zg(t._databaseId);return new xv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Hv("Data must be an object, but it was:",s,r);var a,u,c=qv(r,s);if(o.merge)a=new bh(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=zv(e,f[h],n);if(!s.contains(d))throw new rl(nl.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Wv(l,d)||l.push(d)}a=new bh(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Sv(new wh(c),a,u)}var kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(_v);function Rv(t,e,n){return new Iv({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var Dv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype._toFieldTransform=function(t){return new Uh(t.path,new jh)},e.prototype.isEqual=function(t){return t instanceof e},e}(_v),Nv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Nc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Rv(this,t,!0),n=this.jc.map(function(t){return Fv(t,e)}),r=new kh(n);return new Uh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(_v),Pv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Nc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Rv(this,t,!0),n=this.jc.map(function(t){return Fv(t,e)}),r=new Dh(n);return new Uh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(_v),Mv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(Nc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ph(t.D,Th(t.D,this.Gc));return new Uh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(_v);function Lv(t,e,n,r){var i=t.Wc(1,e,n);Hv("Data must be an object, but it was:",i,r);var o=[],s=new _h;Xc(r,function(t,r){var a=Qv(e,t,n);r instanceof iv&&(r=r._delegate);var u=i.Bc(a);if(r instanceof kv)o.push(a);else{var c=Fv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new bh(o);return new Tv(s.v(),a,i.fieldTransforms)}function Uv(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[zv(e,r,n)],u=[i];if(o.length%2!=0)throw new rl(nl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(zv(e,o[c])),u.push(o[c+1]);for(var l=[],h=new _h,f=a.length-1;f>=0;--f)if(!Wv(l,a[f])){var d=a[f],p=u[f];p instanceof iv&&(p=p._delegate);var g=s.Bc(d);if(p instanceof kv)l.push(d);else{var m=Fv(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new bh(l);return new Tv(h.v(),y,s.fieldTransforms)}function Vv(t,e,n,r){return void 0===r&&(r=!1),Fv(n,t.Wc(r?4:3,e))}function Fv(t,e){if(t instanceof iv&&(t=t._delegate),Bv(t))return Hv("Unsupported field value:",e,t),qv(t,e);if(t instanceof _v)return function(t,e){if(!Cv(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Fv(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof iv&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Th(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=pl.fromDate(t);return{timestampValue:Mf(e.D,n)}}if(t instanceof pl)return n=new pl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Mf(e.D,n)};if(t instanceof Ov)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wv)return{bytesValue:Lf(e.D,t._byteString)};if(t instanceof ov){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ff(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Jy(t))}(t,e)}function qv(t,e){var n={};return Zc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xc(t,function(t,r){var i=Fv(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Bv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pl||t instanceof Ov||t instanceof wv||t instanceof ov||t instanceof _v)}function Hv(t,e,n){if(!Bv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Jy(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function zv(t,e,n){if(e instanceof iv&&(e=e._delegate),e instanceof bv)return e._internalPath;if("string"==typeof e)return Qv(t,e);throw Kv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Gv=new RegExp("[~\\*/\\[\\]]");function Qv(t,e,n){if(e.search(Gv)>=0)throw Kv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(bv.bind.apply(bv,Object(Nc.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Kv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Kv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new rl(nl.INVALID_ARGUMENT,(a+=". ")+t+u)}function Wv(t,e){return t.some(function(t){return t.isEqual(e)})}var $v=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ov(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Yv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(Xv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Yv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}($v);function Xv(t,e){return"string"==typeof e?Qv(t,e):e instanceof iv?e._delegate._internalPath:e._internalPath}var Zv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Jv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Nc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new tb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(Xv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}($v),tb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Jv),eb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Zv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new tb(n._firestore,n._userDataWriter,r.key,r,new Zv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new rl(nl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new tb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Zv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new tb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Zv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:nb(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function nb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bc()}}function rb(t,e){return t instanceof Jv&&e instanceof Jv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof eb&&e instanceof eb&&t._firestore===e._firestore&&hv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ib(t){if(oh(t)&&0===t.explicitOrderBy.length)throw new rl(nl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ob=function(){};function sb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var ab=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(Nc.c)(e,t),e.prototype._apply=function(t){var e=Av(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new rl(nl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){pb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(db(r,t,l[c]));a={arrayValue:{values:u}}}else a=db(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||pb(s,o),a=Vv(n,"where",s,"in"===o||"not-in"===o);var h=Fl.create(i,o,a);return function(t,e){if(e.g()){var n=ah(t);if(null!==n&&!n.isEqual(e.field))throw new rl(nl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=sh(t);null!==r&&gb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new rl(nl.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new sv(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new eh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(ob),ub=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(Nc.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new rl(nl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new rl(nl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xl(e,n);return function(t,e){if(null===sh(t)){var n=ah(t);null!==n&&gb(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new sv(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new eh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(ob),cb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(Nc.c)(e,t),e.prototype._apply=function(t){return new sv(t.firestore,t._converter,hh(t._query,this.Xc,this.Zc))},e}(ob),lb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Nc.c)(e,t),e.prototype._apply=function(t){var e=fb(t,this.type,this.ta,this.ea);return new sv(t.firestore,t._converter,function(t,e){return new eh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(ob),hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Nc.c)(e,t),e.prototype._apply=function(t){var e=fb(t,this.type,this.ta,this.ea);return new sv(t.firestore,t._converter,function(t,e){return new eh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(ob);function fb(t,e,n,r){if(n[0]instanceof iv&&(n[0]=n[0]._delegate),n[0]instanceof $v)return function(t,e,n,r,i){if(!r)throw new rl(nl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ch(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Tl(e,r.key));else{var c=r.field(u.field);if(gl(c))throw new rl(nl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new rl(nl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new $l(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Av(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new rl(nl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new rl(nl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!uh(t)&&-1!==c.indexOf("/"))throw new rl(nl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ol.fromString(c));if(!ul.isDocumentKey(l))throw new rl(nl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ul(l);a.push(Tl(e,h))}else{var f=Vv(n,r,c);a.push(f)}}return new $l(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function db(t,e,n){if(n instanceof iv&&(n=n._delegate),"string"==typeof n){if(""===n)throw new rl(nl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!uh(e)&&-1!==n.indexOf("/"))throw new rl(nl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ol.fromString(n));if(!ul.isDocumentKey(r))throw new rl(nl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Tl(t,new ul(r))}if(n instanceof ov)return Tl(t,n._key);throw new rl(nl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Jy(n)+".")}function pb(t,e){if(!Array.isArray(t)||0===t.length)throw new rl(nl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new rl(nl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function gb(t,e,n){if(!n.isEqual(e))throw new rl(nl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var mb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),vl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(dl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Bc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Xc(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Ov(fl(t.latitude),fl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ml(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(yl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=hl(t);return new pl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ol.fromString(t);Hc(hd(n));var r=new qy(n.get(1),n.get(3)),i=new ul(n.popFirst(5));return r.isEqual(e)||Vc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function yb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var vb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nc.c)(e,t),e.prototype.convertBytes=function(t){return new wv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ov(this.firestore,null,e)},e}(mb),bb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Av(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=wb(t,this._firestore),i=yb(r._converter,e,n),o=jv(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Fh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=wb(t,this._firestore);return e instanceof iv&&(e=e._delegate),o="string"==typeof e||e instanceof bv?Uv(this._dataReader,"WriteBatch.update",s._key,e,n,r):Lv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Fh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=wb(t,this._firestore);return this._mutations=this._mutations.concat(new nf(e._key,Fh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new rl(nl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function wb(t,e){if(t instanceof iv&&(t=t._delegate),t.firestore!==e)throw new rl(nl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var _b=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nc.c)(e,t),e.prototype.convertBytes=function(t){return new wv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ov(this.firestore,null,e)},e}(mb);function Ob(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=tv(t,ov);var o=tv(t.firestore,pv),s=Av(o);return e instanceof iv&&(e=e._delegate),Sb(o,[("string"==typeof e||e instanceof bv?Uv(s,"updateDoc",t._key,e,n,r):Lv(s,"updateDoc",t._key,e)).toMutation(t._key,Fh.exists(!0))])}function Eb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof iv&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||dv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(dv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof ov)c=tv(t.firestore,pv),l=rh(t._key.path),u={next:function(e){i[a]&&i[a](Tb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=tv(t,sv);c=tv(d.firestore,pv),l=d._query;var p=new _b(c);u={next:function(t){i[a]&&i[a](new eb(c,p,d,t))},error:i[a+1],complete:i[a+2]},ib(t._query)}return function(t,e,n,r){var i=this,o=new Ty(r),s=new Pm(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(i,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return e=jm,[4,Ly(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(i,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return e=km,[4,Ly(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(gv(c),l,h,u)}function Sb(t,e){return function(t,e){var n=this,r=new Pd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(n,void 0,void 0,function(){var n;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return n=Km,[4,My(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(gv(t),e)}function Tb(t,e,n){var r=n.docs.get(e._key),i=new _b(t);return new Jv(t,i,e._key,r,new Zv(n.hasPendingWrites,n.fromCache),e._converter)}var Cb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Nc.c)(e,t),e.prototype.get=function(e){var n=this,r=wb(e,this._firestore),i=new _b(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Jv(n._firestore,i,r._key,t._document,new Zv(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Av(t)}return t.prototype.get=function(t){var e=this,n=wb(t,this._firestore),r=new vb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Bc();var i=t[0];if(i instanceof Dl)return new $v(e._firestore,r,n._key,null,n._converter);if(i instanceof Rl)return new $v(e._firestore,r,i.key,i,n._converter);throw Bc()})},t.prototype.set=function(t,e,n){var r=wb(t,this._firestore),i=yb(r._converter,e,n),o=jv(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=wb(t,this._firestore);return e instanceof iv&&(e=e._delegate),o="string"==typeof e||e instanceof bv?Uv(this._dataReader,"Transaction.update",s._key,e,n,r):Lv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=wb(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Ib(){if("undefined"==typeof Uint8Array)throw new rl(nl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function xb(){if("undefined"==typeof atob)throw new rl(nl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.fromBase64String=function(t){return xb(),new e(wv.fromBase64String(t))},e.fromUint8Array=function(t){return Ib(),new e(wv.fromUint8Array(t))},e.prototype.toBase64=function(){return xb(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Ib(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(iv),jb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){vv(t=tv(t,pv));var n=gv(t),r=t._freezeSettings(),i=new Sy;return yv(n,i,new Oy(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){vv(t=tv(t,pv));var e=gv(t),n=t._freezeSettings(),r=new Sy;return yv(e,r,new Ey(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new rl(nl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Pd;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Nc.b)(e,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Nc.b)(this,void 0,void 0,function(){return Object(Nc.d)(this,function(e){switch(e.label){case 0:return Ud.At()?[4,Ud.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}($p(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),kb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof qy||(i.sa=e),i}return Object(Nc.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=tv(t,rv))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Fc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Nc.b)(e,void 0,void 0,function(){var e,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return[4,Dy(t)];case 1:return e=r.sent(),[4,Py(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=zc(t);return e.Qr.delete(0),Zg(e)}(n))]}})})})}(gv(tv(this._delegate,pv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Nc.b)(e,void 0,void 0,function(){var e,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return[4,Dy(t)];case 1:return e=r.sent(),[4,Py(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return(e=zc(t)).Qr.add(0),[4,Jg(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(gv(tv(this._delegate,pv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Yy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Pd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(e,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return e=Jm,[4,My(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(gv(tv(this._delegate,pv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ty(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(n,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){zc(t).Zr.add(e),e.next()},[4,Ly(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(n,void 0,void 0,function(){var e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){zc(t).Zr.delete(e)},[4,Ly(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(gv(t=tv(t,pv)),dv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new rl(nl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Gb(this,uv(this._delegate,t))}catch(t){throw Lb(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Mb(this,cv(this._delegate,t))}catch(t){throw Lb(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Bb(this,function(t,e){if(t=tv(t,rv),Wy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new rl(nl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new sv(t,null,function(t){return new eh(ol.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Lb(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Pd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(n,void 0,void 0,function(){var n;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Ry(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Iy(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(gv(t),function(n){return e(new Cb(t,n))})}(this._delegate,function(n){return t(new Db(e,n))})},e.prototype.batch=function(){var t=this;return gv(this._delegate),new Nb(new bb(this._delegate,function(e){return Sb(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new rl(nl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new rl(nl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(iv),Rb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nc.c)(e,t),e.prototype.convertBytes=function(t){return new Ab(new wv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Mb.ia(e,this.firestore,null)},e}(mb),Db=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new Rb(e),r}return Object(Nc.c)(e,t),e.prototype.get=function(t){var e=this,n=Qb(t);return this._delegate.get(n).then(function(t){return new Fb(e._firestore,new Jv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=Qb(t);return n?($y("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Qb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Nc.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Qb(t);return this._delegate.delete(e),this},e}(iv),Nb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype.set=function(t,e,n){var r=Qb(t);return n?($y("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Qb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Nc.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Qb(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(iv),Pb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(Nc.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new tb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new qb(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Rb(t),n),i.set(n,o)),o},e}(iv);Pb.oa=new WeakMap;var Mb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Rb(e),r}return Object(Nc.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new rl(nl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new ov(n._delegate,r,new ul(t)))},e.ia=function(t,n,r){return new e(n,new ov(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Gb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Gb(this.firestore,uv(this._delegate,t))}catch(t){throw Lb(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof iv&&(t=t._delegate),t instanceof ov&&lv(this._delegate,t)},e.prototype.set=function(t,e){e=$y("DocumentReference.set",e);try{return function(t,e,n){t=tv(t,ov);var r=tv(t.firestore,pv),i=yb(t._converter,e,n);return Sb(r,[jv(Av(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Fh.none())])}(this._delegate,t,e)}catch(t){throw Lb(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ob(this._delegate,t):Ob.apply(void 0,Object(Nc.f)([this._delegate,t,e],n))}catch(t){throw Lb(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Sb(tv((t=this._delegate).firestore,pv),[new nf(t._key,Fh.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ub(e),i=Vb(e,function(e){return new Fb(t.firestore,new Jv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return Eb(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=tv(t,ov);var e=tv(t.firestore,pv),n=gv(e),r=new _b(e);return function(t,e){var n=this,r=new Pd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(n,void 0,void 0,function(){var n;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=zc(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Rl?n.resolve(i):i instanceof Dl?n.resolve(null):n.reject(new rl(nl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Sm(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Ny(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Jv(e,r,t._key,n,new Zv(n instanceof Rl&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=tv(t,ov);var e=tv(t.firestore,pv);return Uy(gv(e),t._key,{source:"server"}).then(function(n){return Tb(e,t,n)})}(this._delegate):function(t){t=tv(t,ov);var e=tv(t.firestore,pv);return Uy(gv(e),t._key).then(function(n){return Tb(e,t,n)})}(this._delegate)).then(function(t){return new Fb(e.firestore,new Jv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Pb.ra(this.firestore,t):null))},e}(iv);function Lb(t,e,n){return t.message=t.message.replace(e,n),t}function Ub(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!dv(r))return r}return{}}function Vb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=dv(t[0])?t[0]:dv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Fb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Nc.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Mb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return rb(this._delegate,t._delegate)},e}(iv),qb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Fb),Bb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Rb(e),r}return Object(Nc.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,sb(this._delegate,function(t,e,n){var r=e,i=Xv("where",t);return new ab(i,r,n)}(t,n,r)))}catch(t){throw Lb(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,sb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Xv("orderBy",t);return new ub(r,n)}(t,n)))}catch(t){throw Lb(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,sb(this._delegate,function(t){return ev("limit",t),new cb("limit",t,"F")}(t)))}catch(t){throw Lb(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,sb(this._delegate,function(t){return ev("limitToLast",t),new cb("limitToLast",t,"L")}(t)))}catch(t){throw Lb(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,sb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lb("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Lb(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,sb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lb("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Lb(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,sb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hb("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Lb(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,sb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hb("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Lb(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return hv(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=tv(t,sv);var e=tv(t.firestore,pv),n=gv(e),r=new _b(e);return function(t,e){var n=this,r=new Pd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nc.b)(n,void 0,void 0,function(){var n;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Nc.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,lg(t,e,!0)];case 1:return a=u.sent(),r=new Fm(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Sm(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Ny(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new eb(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=tv(t,sv);var e=tv(t.firestore,pv),n=gv(e),r=new _b(e);return Vy(n,t._query,{source:"server"}).then(function(n){return new eb(e,r,t,n)})}(this._delegate):function(t){t=tv(t,sv);var e=tv(t.firestore,pv),n=gv(e),r=new _b(e);return ib(t._query),Vy(n,t._query).then(function(n){return new eb(e,r,t,n)})}(this._delegate)).then(function(t){return new zb(e.firestore,new eb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ub(e),i=Vb(e,function(e){return new zb(t.firestore,new eb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Eb(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Pb.ra(this.firestore,t):null))},e}(iv),Hb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Nc.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new qb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(iv),zb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Nc.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Bb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new qb(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Hb(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new qb(n._firestore,r))})},e.prototype.isEqual=function(t){return rb(this._delegate,t._delegate)},e}(iv),Gb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Nc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Mb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Mb(this.firestore,void 0===t?cv(this._delegate):cv(this._delegate,t))}catch(t){throw Lb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=tv(t.firestore,pv),r=cv(t),i=yb(t._converter,e);return Sb(n,[jv(Av(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Fh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Mb(e.firestore,t)})},e.prototype.isEqual=function(t){return lv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Pb.ra(this.firestore,t):null))},e}(Bb);function Qb(t){return t instanceof iv&&(t=t._delegate),tv(t,ov)}var Kb,Wb=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(bv.bind.apply(bv,Object(Nc.f)([void 0],e))))||this}return Object(Nc.c)(e,t),e.documentId=function(){return new e(al.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof iv&&(t=t._delegate),t instanceof bv&&this._delegate._internalPath.isEqual(t._internalPath)},e}(iv),$b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nc.c)(e,t),e.serverTimestamp=function(){var t=new Dv("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new kv("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nv("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pv("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Mv("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(iv),Yb=n("/6Yf"),Xb={Firestore:kb,GeoPoint:Ov,Timestamp:pl,Blob:Ab,Transaction:Db,WriteBatch:Nb,DocumentReference:Mb,DocumentSnapshot:Fb,Query:Bb,QueryDocumentSnapshot:qb,QuerySnapshot:zb,CollectionReference:Gb,FieldPath:Wb,FieldValue:$b,setLogLevel:function(t){Mc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Zb(t,e){return function(t,e=Eo.b){return new ct.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Jb(t,e){return Zb(t,e).pipe(Object(ht.a)(t=>({payload:t,type:"query"})))}function tw(t,e){return Jb(t,e).pipe(Re(void 0),So(),Object(ht.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function ew(t,e,n){return tw(t,n).pipe(De((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return nw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return nw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Io(void 0,void 0)),Object(ht.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function nw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function rw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new Yb.a("firestore",function(t){return function(t,e){return new kb(t,new pv(t,e),new jb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Xb)))})(Kb=jo.a),Kb.registerVersion("@firebase/firestore","2.2.1");class iw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=tw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(ht.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Re(void 0),So(),Me(([t,e])=>e.length>0||!t),Object(ht.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(De((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=rw(t);return ew(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Jb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ht.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ut.a)(this.query.get(t)).pipe(Object(no.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new ow(this.ref.doc(t),this.afs)}}class ow{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=hw(n,e);return new iw(r,i,this.afs)}snapshotChanges(){return Zb(this.ref,this.afs.schedulers.outsideAngular).pipe(Re(void 0),So(),Object(ht.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(ht.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(ut.a)(this.ref.get(t)).pipe(Object(no.b)(this.afs.schedulers.insideAngular))}}class sw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?tw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ht.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Me(t=>t.length>0),this.afs.keepUnstableUntilFirst):tw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(De((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=rw(t);return ew(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Jb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ht.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ut.a)(this.query.get(t)).pipe(Object(no.b)(this.afs.schedulers.insideAngular))}}const aw=new r.r("angularfire2.enableFirestorePersistence"),uw=new r.r("angularfire2.firestore.persistenceSettings"),cw=new r.r("angularfire2.firestore.settings"),lw=new r.r("angularfire2.firestore.use-emulator");function hw(t,e=(t=>t)){return{query:e(t),ref:t}}let fw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new lo.d(o),this.keepUnstableUntilFirst=Object(lo.h)(this.schedulers);const c=Object(lo.g)(t,o,e);!Ao.a.auth&&u&&Object(lo.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(lo.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!A(i)){const e=()=>{try{return Object(ut.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Kb){return"undefined"!=typeof console&&console.warn(Kb),Object(ie.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ie.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=hw(n,e),o=this.schedulers.ngZone.run(()=>r);return new iw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new sw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new ow(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(lo.c),r.Qb(lo.b,8),r.Qb(aw,8),r.Qb(cw,8),r.Qb(r.C),r.Qb(r.A),r.Qb(uw,8),r.Qb(lw,8),r.Qb(ho,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(lo.c),Object(r.Qb)(lo.b,8),Object(r.Qb)(aw,8),Object(r.Qb)(cw,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(uw,8),Object(r.Qb)(lw,8),Object(r.Qb)(ho,8))},token:t,providedIn:"any"}),t})(),dw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:aw,useValue:!0},{provide:uw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[fw]}),t})();class pw{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new gw(t,this.dueTime,this.scheduler))}}class gw extends ce.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(mw,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function mw(t){t.debouncedNext()}var yw="firebasestorage.googleapis.com",vw=function(t){function e(n,r){var i=t.call(this,bw(n),"Firebase Storage: "+r+" ("+bw(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Nc.c)(e,t),e.prototype._codeEquals=function(t){return bw(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Ro.c);function bw(t){return"storage/"+t}function ww(){return new vw("unknown","An unknown error occurred, please check the error payload for server response.")}function _w(){return new vw("canceled","User canceled the upload/download.")}function Ow(){return new vw("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ew(t){return new vw("invalid-argument",t)}function Sw(){return new vw("app-deleted","The Firebase app was deleted.")}function Tw(t){return new vw("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cw(t,e){return new vw("invalid-format","String does not match format '"+t+"': "+e)}function Iw(t){throw new vw("internal-error","Internal error: "+t)}var xw={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Aw=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function jw(t,e){switch(t){case xw.RAW:return new Aw(kw(e));case xw.BASE64:case xw.BASE64URL:return new Aw(Rw(t,e));case xw.DATA_URL:return new Aw((n=new Dw(e)).base64?Rw(xw.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Kb){throw Cw(xw.DATA_URL,"Malformed data URL.")}return kw(e)}(n.rest),new Dw(e).contentType)}var n;throw ww()}function kw(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Rw(t,e){switch(t){case xw.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Cw(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case xw.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Cw(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Kb){throw Cw(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Dw=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Cw(xw.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Nw={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pw(t){switch(t){case"running":case"pausing":case"canceling":return Nw.RUNNING;case"paused":return Nw.PAUSED;case"success":return Nw.SUCCESS;case"canceled":return Nw.CANCELED;case"error":default:return Nw.ERROR}}var Mw=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Lw=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Mw.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Mw.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Mw.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Iw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Iw("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Iw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Kb){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Iw("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Uw=function(){function t(){}return t.prototype.createXhrIo=function(){return new Lw},t}(),Vw=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(Kb){return new t(e,"")}if(""===n.path)return n;throw new vw("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=yw.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new vw("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}(),Fw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function qw(t){return"string"==typeof t||t instanceof String}function Bw(t){return Hw()&&t instanceof Blob}function Hw(){return"undefined"!=typeof Blob}function zw(t,e,n,r){if(r<e)throw Ew("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Ew("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Gw(t){return"https://"+yw+"/v0"+t}function Qw(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Kw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Kb){o(Kb)}else null!==s?((r=ww()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Sw():_w():new vw("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ww(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Ww(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Mw.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Ww(s,n))}else{var a=n.getErrorCode()===Mw.ABORT;e(!1,new Ww(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Nc.f)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Nc.f)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Ww=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function $w(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Yw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=$w();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Hw())return new Blob(t);throw new vw("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Xw=function(){function t(t,e){var n=0,r="";Bw(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Bw(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Hw()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Yw.apply(null,r))}var i=e.map(function(t){return qw(t)?jw(xw.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Zw(t){var e,n;try{e=JSON.parse(t)}catch(Kb){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Jw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function t_(t,e){return e}var e_=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||t_}}(),n_=null;function r_(){if(n_)return n_;var t=[];t.push(new e_("bucket")),t.push(new e_("generation")),t.push(new e_("metageneration")),t.push(new e_("name","fullPath",!0));var e=new e_("name");e.xform=function(t,e){return function(t){return!qw(t)||t.length<2?t:Jw(t)}(e)},t.push(e);var n=new e_("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new e_("timeCreated")),t.push(new e_("updated")),t.push(new e_("md5Hash",null,!0)),t.push(new e_("cacheControl",null,!0)),t.push(new e_("contentDisposition",null,!0)),t.push(new e_("contentEncoding",null,!0)),t.push(new e_("contentLanguage",null,!0)),t.push(new e_("contentType",null,!0)),t.push(new e_("metadata","customMetadata",!0)),n_=t}function i_(t,e,n){var r=Zw(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Vw(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function o_(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var s_=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function a_(t){if(!t)throw ww()}function u_(t,e){return function(n,r){var i=i_(t,r,e);return a_(null!==i),i}}function c_(t){return function(e,n){var r;return(r=401===e.getStatus()?new vw("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new vw("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new vw("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function l_(t){var e=c_(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new vw("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function h_(t,e,n){var r=Gw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new s_(r,"GET",u_(t,n),i);return o.errorHandler=l_(e),o}function f_(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var d_=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function p_(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Kb){a_(!1)}return a_(!!n&&-1!==(e||["active"]).indexOf(n)),n}var g_=262144,m_=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function y_(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var v_=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=r_(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then(function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=f_(e,r,i),a={name:s.fullPath},u=Gw(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=o_(s,n),h=new s_(u,"POST",function(t){var e;p_(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Kb){a_(!1)}return a_(qw(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=c_(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new s_(n,"POST",function(t){var e=p_(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Kb){a_(!1)}n||a_(!1);var i=Number(n);return a_(!isNaN(i)),new d_(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=c_(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=g_*this._chunkMultiplier,n=new d_(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new d_(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new vw("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw Ow();var p=new s_(n,"POST",function(t,n){var i,s=p_(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?u_(e,o)(t,n):null,new d_(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=c_(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Kb){return t._error=Kb,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){g_*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=h_(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=f_(e,r,i),c=o_(u,n),l=Xw.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Ow();var h={name:u.fullPath},f=Gw(o),d=t.maxUploadRetryTime,p=new s_(f,"POST",u_(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=c_(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=_w(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Pw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new m_(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Pw(this._state)){case Nw.SUCCESS:y_(this._resolve.bind(null,this.snapshot))();break;case Nw.CANCELED:case Nw.ERROR:y_(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Pw(this._state)){case Nw.RUNNING:case Nw.PAUSED:t.next&&y_(t.next.bind(t,this.snapshot))();break;case Nw.SUCCESS:t.complete&&y_(t.complete.bind(t))();break;case Nw.CANCELED:case Nw.ERROR:t.error&&y_(t.error.bind(t,this._error))();break;default:t.error&&y_(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),b_=function(){function t(t,e){this._service=t,this._location=e instanceof Vw?e:Vw.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Vw(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Jw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Vw(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Tw(t)},t}();function w_(t){var e={prefixes:[],items:[]};return __(t,e).then(function(){return e})}function __(t,e,n){return Object(Nc.b)(this,void 0,void 0,function(){var r,i,o;return Object(Nc.d)(this,function(s){switch(s.label){case 0:return[4,O_(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,__(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function O_(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nc.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&zw("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Gw(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new s_(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Zw(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Vw(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Vw(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return a_(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=c_(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}})})}function E_(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Vw(t._location.bucket,n);return new b_(t.storage,r)}function S_(t){return/^[A-Za-z]+:\/\//.test(t)}function T_(t,e){if(t instanceof I_){var n=t;if(null==n._bucket)throw new vw("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new b_(n,n._bucket);return null!=e?T_(r,e):r}if(void 0!==e){if(e.includes(".."))throw Ew('`path` param cannot contain ".."');return E_(t,e)}return t}function C_(t,e){if(e&&S_(e)){if(t instanceof I_)return new b_(t,e);throw Ew("To use ref(service, url), the first argument must be a Storage instance.")}return T_(t,e)}var I_=function(){function t(t,e,n,r,i){var o,s;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Vw.makeFromBucketSpec(r):null==(s=null==(o=this.app.options)?void 0:o.storageBucket)?null:Vw.makeFromBucketSpec(s)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){zw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){zw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Nc.b)(this,void 0,void 0,function(){var t,e;return Object(Nc.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new b_(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new Fw(Sw());var r=function(t,e,n,r,i){var o=Qw(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new Kw(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}();function x_(t,e){return C_(t,e)}var A_,j_,k_=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),R_=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new k_(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new k_(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new k_(t,i,i._ref))}:{next:e.next?function(t){return e.next(new k_(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),D_=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new N_(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new N_(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),N_=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return E_(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new R_(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new v_(t,new Xw(e),n)}(t,e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=xw.RAW),this._throwIfRoot("putString");var r=jw(e,t),i=Object(Nc.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new R_(new v_(this._delegate,new Xw(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,w_(t)).then(function(t){return new D_(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return O_(t,e)}(this._delegate,t||void 0).then(function(t){return new D_(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=h_(t.storage,t._location,r_()),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Nc.b)(this,void 0,void 0,function(){var n,r;return Object(Nc.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=Gw(e.fullServerUrl()),o=o_(n,r),s=t.maxOperationRetryTime,a=new s_(i,"PATCH",u_(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=l_(e),a}(t.storage,t._location,e,r_()),[2,t.storage._makeRequest(r,n).getPromise()]}})})}(t,e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=Gw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new s_(r,"GET",function(t,e){return function(n,r){var i=i_(t,r,e);return a_(null!==i),function(t,e){var n=Zw(e);if(null===n)return null;if(!qw(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return Gw("/b/"+i(t.bucket)+"/o/"+i(n))+Qw({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=l_(e),o}(t.storage,t._location,r_()),[2,t.storage._makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new vw("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(Nc.b)(this,void 0,void 0,function(){var e,n;return Object(Nc.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=Gw(e.fullServerUrl()),r=new s_(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=l_(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Tw(t)},t}(),P_=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(S_(t))throw Ew("ref() expected a child path but got a URL, use refFromURL instead.");return new N_(x_(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!S_(t))throw Ew("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vw.makeFromUrl(t)}catch(Kb){throw Ew("refFromUrl() expected a valid full URL but got an invalid one.")}return new N_(x_(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function M_(t){const e=function(t){return new ct.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=Eo.a){return n=>n.lift(new pw(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(ht.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function L_(t,e,n){return{getDownloadURL:()=>Object(ie.a)(void 0).pipe(Object(no.b)(e.outsideAngular),Te(()=>t.getDownloadURL()),n),getMetadata:()=>Object(ie.a)(void 0).pipe(Object(no.b)(e.outsideAngular),Te(()=>t.getMetadata()),n),delete:()=>Object(ut.a)(t.delete()),child:r=>L_(t.child(r),e,n),updateMetadata:e=>Object(ut.a)(t.updateMetadata(e)),put:(e,n)=>M_(t.put(e,n)),putString:(e,n,r)=>M_(t.putString(e,n,r)),listAll:()=>Object(ut.a)(t.listAll())}}j_={TaskState:Nw,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:xw,Storage:I_,Reference:N_},(A_=jo.a).INTERNAL.registerComponent(new Yb.a("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new P_(r,new I_(r,i,new Uw,n,jo.a.SDK_VERSION))},"PUBLIC").setServiceProps(j_).setMultipleInstances(!0)),A_.registerVersion("@firebase/storage","0.4.5");const U_=new r.r("angularfire2.storageBucket"),V_=new r.r("angularfire2.storage.maxUploadRetryTime"),F_=new r.r("angularfire2.storage.maxOperationRetryTime");let q_=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new lo.d(i),this.keepUnstableUntilFirst=Object(lo.h)(this.schedulers);const a=Object(lo.g)(t,i,e);this.storage=Object(lo.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return L_(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return L_(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return L_(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(lo.c),r.Qb(lo.b,8),r.Qb(U_,8),r.Qb(r.C),r.Qb(r.A),r.Qb(V_,8),r.Qb(F_,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(lo.c),Object(r.Qb)(lo.b,8),Object(r.Qb)(U_,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(V_,8),Object(r.Qb)(F_,8))},token:t,providedIn:"any"}),t})(),B_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})(),H_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[q_],imports:[B_]}),t})(),z_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t,bootstrap:[to]}),t.\u0275inj=r.Hb({providers:[],imports:[[lo.a.initializeApp(Oo),dw,bo,H_,re,at,_o]]}),t})();Object(r.T)(),ot().bootstrapModule(z_).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);